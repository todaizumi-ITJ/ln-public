<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”³ç«‹æ›¸ä½œæˆç®¡ç†ã‚»ãƒ³ã‚¿ãƒ¼</title>
    <!-- å®Œå…¨ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ: ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ãƒ­ãƒ¼ã‚«ãƒ«åŒæ¢± -->
    <script defer src="vendor/docx-8.0.4.build-index.js"></script>
    <script defer src="vendor/FileSaver-2.0.5.min.js"></script>
    <style>
        :root {
            --bg-main: #ffffff;
            --bg-page: #f8f9fb;
            --bg-card: #ffffff;
            --bg-glass: #f4f5f7;
            --border: #e8eaed;
            --border-hover: #d0d3d9;
            --accent: #111827;
            --accent-glow: rgba(0, 0, 0, 0.03);
            --text-primary: #111827;
            --text-secondary: #4b5563;
            --text-muted: #9ca3af;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        /* â”€â”€ Utility Classes (Tailwind replacement) â”€â”€ */
        .flex { display: flex; }
        .grid { display: grid; }
        .flex-1 { flex: 1; }
        .flex-wrap { flex-wrap: wrap; }
        .items-center { align-items: center; }
        .items-start { align-items: flex-start; }
        .justify-between { justify-content: space-between; }
        .justify-center { justify-content: center; }
        .justify-end { justify-content: flex-end; }
        .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
        .gap-2 { gap: 0.5rem; }
        .gap-2\.5 { gap: 0.625rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }
        .gap-5 { gap: 1.25rem; }
        .w-full { width: 100%; }
        .w-5 { width: 1.25rem; }
        .h-5 { height: 1.25rem; }
        .h-20 { height: 5rem; }
        .max-h-60 { max-height: 15rem; }
        .max-w-\[1400px\] { max-width: 1400px; }
        .overflow-hidden { overflow: hidden; }
        .overflow-y-auto { overflow-y: auto; }
        .p-2\.5 { padding: 0.625rem; }
        .p-3 { padding: 0.75rem; }
        .p-4 { padding: 1rem; }
        .p-5 { padding: 1.25rem; }
        .p-6 { padding: 1.5rem; }
        .px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .py-4 { padding-top: 1rem; padding-bottom: 1rem; }
        .py-6 { padding-top: 1.5rem; padding-bottom: 1.5rem; }
        .pb-4 { padding-bottom: 1rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mb-1\.5 { margin-bottom: 0.375rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .ml-4 { margin-left: 1rem; }
        .mr-2 { margin-right: 0.5rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .space-y-2 > * + * { margin-top: 0.5rem; }
        .space-y-3 > * + * { margin-top: 0.75rem; }
        .space-y-5 > * + * { margin-top: 1.25rem; }
        .text-xs { font-size: 0.75rem; line-height: 1rem; }
        .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
        .text-base { font-size: 1rem; line-height: 1.5rem; }
        .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
        .text-\[10px\] { font-size: 10px; }
        .text-\[11px\] { font-size: 11px; }
        .text-\[12px\] { font-size: 12px; }
        .text-\[13px\] { font-size: 13px; }
        .font-medium { font-weight: 500; }
        .font-semibold { font-weight: 600; }
        .font-bold { font-weight: 700; }
        .font-extrabold { font-weight: 800; }
        .tracking-tight { letter-spacing: -0.025em; }
        .text-emerald-400 { color: #34d399; }
        .bg-emerald-500\/20 { background: rgb(16 185 129 / 0.2); }
        .rounded-lg { border-radius: 0.5rem; }
        .rounded-xl { border-radius: 0.75rem; }
        .rounded-full { border-radius: 9999px; }
        .cursor-pointer { cursor: pointer; }
        @media (min-width: 768px) {
            .md\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
        }

        body {
            background: var(--bg-page);
            color: var(--text-primary);
            font-family: -apple-system, BlinkMacSystemFont, 'Hiragino Sans', 'Noto Sans JP', sans-serif;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
        }

        #mainContent, #applicationViewContainer { position: relative; z-index: 1; }

        /* Card */
        .glass-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.04), 0 1px 2px rgba(0,0,0,0.02);
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .glass-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.06);
        }

        .section-head {
            padding: 20px 24px 16px;
            border-bottom: 1px solid var(--border);
        }
        .section-head h3 {
            font-size: 14px;
            font-weight: 700;
            letter-spacing: -0.01em;
            color: var(--text-primary);
        }
        .section-head .sub {
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 4px;
        }

        /* Badge system */
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 3px 10px;
            border-radius: 100px;
            font-size: 10px;
            font-weight: 700;
            letter-spacing: 0.02em;
            border: 1px solid transparent;
        }
        .badge-blue { background: #eff6ff; color: #1d4ed8; border-color: #bfdbfe; }
        .badge-green { background: #f0fdf4; color: #15803d; border-color: #bbf7d0; }
        .badge-red { background: #fef2f2; color: #b91c1c; border-color: #fecaca; }
        .badge-purple { background: #faf5ff; color: #7e22ce; border-color: #e9d5ff; }
        .badge-amber { background: #fffbeb; color: #b45309; border-color: #fde68a; }
        .badge-cyan { background: #ecfeff; color: #0e7490; border-color: #a5f3fc; }

        /* Stat card */
        .stat-card {
            background: var(--bg-glass);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px 20px;
        }
        .stat-label { font-size: 11px; color: var(--text-muted); font-weight: 500; text-transform: uppercase; letter-spacing: 0.05em; }
        .stat-value { font-size: 22px; font-weight: 800; letter-spacing: -0.02em; margin-top: 4px; }

        /* â”€â”€ Main Tab Bar â”€â”€ */
        .main-tab-bar {
            display: flex;
            gap: 8px;
            padding: 6px;
            background: #e8ecf2;
            border-radius: 14px;
            margin-bottom: 0;
        }
        .main-tab {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 14px 24px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            font-size: 15px;
            font-weight: 700;
            font-family: inherit;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            background: transparent;
            color: #6b7280;
            position: relative;
        }
        .main-tab:hover:not(.main-tab--active) {
            background: rgba(255,255,255,0.5);
            color: #374151;
        }
        .main-tab--active {
            background: #ffffff;
            color: #1e293b;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.04);
        }
        .main-tab-icon {
            font-size: 20px;
            line-height: 1;
        }
        .main-tab-text {
            letter-spacing: -0.01em;
        }

        /* â”€â”€ Evidence Tab Redesign â”€â”€ */
        .ev-dashboard {
            background: linear-gradient(135deg, #1e293b 0%, #334155 50%, #475569 100%);
            border-radius: 14px;
            overflow: hidden;
            margin-bottom: 16px;
        }
        .ev-dashboard-head {
            padding: 20px 24px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .ev-dashboard-title {
            font-size: 15px;
            font-weight: 700;
            color: #ffffff;
        }
        .ev-dashboard-title small {
            font-size: 11px;
            font-weight: 500;
            color: rgba(255,255,255,0.55);
            margin-left: 8px;
        }
        .ev-progress-ring {
            width: 56px;
            height: 56px;
            position: relative;
        }
        .ev-progress-ring svg {
            transform: rotate(-90deg);
        }
        .ev-progress-ring .ring-bg {
            fill: none;
            stroke: rgba(255,255,255,0.12);
            stroke-width: 5;
        }
        .ev-progress-ring .ring-fill {
            fill: none;
            stroke: #22c55e;
            stroke-width: 5;
            stroke-linecap: round;
            transition: stroke-dashoffset 0.5s;
        }
        .ev-progress-ring .ring-text {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 800;
            color: #ffffff;
        }
        .ev-dashboard-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            padding: 0 24px 20px;
        }
        .ev-dash-card {
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 12px 16px;
        }
        .ev-dash-card-label {
            font-size: 10px;
            font-weight: 600;
            color: rgba(255,255,255,0.5);
            text-transform: uppercase;
            letter-spacing: 0.06em;
            margin-bottom: 6px;
        }
        .ev-dash-card-row {
            display: flex;
            align-items: baseline;
            gap: 6px;
        }
        .ev-dash-card-num {
            font-size: 22px;
            font-weight: 800;
            color: #ffffff;
            line-height: 1;
        }
        .ev-dash-card-denom {
            font-size: 11px;
            color: rgba(255,255,255,0.45);
        }
        .ev-dash-bar {
            height: 4px;
            background: rgba(255,255,255,0.12);
            border-radius: 3px;
            margin-top: 8px;
            overflow: hidden;
        }
        .ev-dash-bar-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.4s;
        }

        /* Action List */
        .ev-action-section {
            background: #ffffff;
            border: 1px solid var(--border);
            border-radius: 14px;
            overflow: hidden;
            margin-bottom: 16px;
        }
        .ev-action-head {
            padding: 14px 20px;
            font-size: 13px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid var(--border);
        }
        .ev-action-count {
            font-size: 11px;
            font-weight: 700;
            padding: 2px 10px;
            border-radius: 20px;
        }
        .ev-action-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 20px;
            border-bottom: 1px solid #f3f4f6;
            transition: background 0.15s;
        }
        .ev-action-item:last-child { border-bottom: none; }
        .ev-action-item:hover { background: #fafbfc; }
        .ev-action-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .ev-action-check {
            width: 20px;
            height: 20px;
            border-radius: 6px;
            border: 2px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 800;
            flex-shrink: 0;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .ev-action-check:hover {
            border-color: #9ca3af;
            transform: scale(1.05);
        }
        .ev-action-check--done {
            background: #f0fdf4;
            border-color: #86efac;
            color: #16a34a;
        }
        .ev-action-check--done::before {
            content: 'âœ“';
            font-size: 12px;
            font-weight: 800;
        }
        .ev-action-check--todo {
            background: #fff;
            border-color: #e5e7eb;
            color: transparent;
        }
        
        /* é›†ã‚æ–¹ãƒªãƒ³ã‚¯ */
        .ev-how-to-link {
            font-size: 11px;
            font-weight: 600;
            color: #3b82f6;
            text-decoration: none;
            transition: color 0.2s ease;
            white-space: nowrap;
        }
        .ev-how-to-link:hover {
            color: #2563eb;
            text-decoration: underline;
        }
        .ev-action-name {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
        }
        .ev-action-desc {
            font-size: 10px;
            color: var(--text-muted);
            margin-top: 1px;
        }
        .ev-action-badge {
            font-size: 9px;
            font-weight: 700;
            padding: 3px 10px;
            border-radius: 20px;
            white-space: nowrap;
        }
        .ev-badge-manual { background: #fef2f2; color: #b91c1c; border: 1px solid #fecaca; }
        .ev-badge-semi { background: #fffbeb; color: #b45309; border: 1px solid #fde68a; }
        .ev-badge-auto { background: #f0fdf4; color: #16a34a; border: 1px solid #bbf7d0; }

        /* Done section toggle */
        .ev-done-toggle {
            padding: 10px 20px;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-muted);
            cursor: pointer;
            border-top: 1px solid var(--border);
            background: #fafbfc;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: background 0.2s ease;
        }
        .ev-done-toggle:hover { background: #f4f5f7; }
        .ev-done-list { 
            display: none; 
            overflow: hidden;
            transition: max-height 0.3s ease, opacity 0.3s ease;
        }
        .ev-done-list.open { 
            display: block;
            animation: slideDown 0.3s ease-out;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slideOutRight {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(100px);
            }
        }

        /* CW Group collapsible */
        .ev-cw-section {
            background: #ffffff;
            border: 1px solid var(--border);
            border-radius: 14px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        .ev-cw-head {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 18px;
            cursor: pointer;
            transition: background 0.15s;
        }
        .ev-cw-head:hover { background: #fafbfc; }
        .ev-cw-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .ev-cw-name {
            font-size: 13px;
            font-weight: 700;
        }
        .ev-cw-count-badge {
            font-size: 10px;
            font-weight: 700;
            padding: 2px 8px;
            border-radius: 6px;
        }
        .ev-cw-stats {
            display: flex;
            align-items: center;
            gap: 14px;
            font-size: 10px;
            font-weight: 600;
        }
        .ev-cw-arrow {
            font-size: 10px;
            color: var(--text-muted);
            transition: transform 0.2s ease;
            margin-left: 8px;
        }
        .ev-cw-body { 
            display: none; 
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, opacity 0.3s ease;
            opacity: 0;
        }
        .ev-cw-body.open { 
            display: block;
            max-height: 2000px;
            opacity: 1;
        }
        .ev-cw-body table {
            width: 100%;
            border-collapse: collapse;
            font-size: 11px;
        }
        .ev-cw-body th {
            padding: 6px 12px;
            text-align: left;
            font-size: 9px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            background: var(--bg-glass);
            border-bottom: 1px solid var(--border);
        }
        .ev-cw-body td {
            padding: 6px 12px;
            border-bottom: 1px solid #f3f4f6;
        }
        .ev-cw-body tr.ev-missing-row td {
            background: #fef2f2;
        }
        .ev-cw-footer {
            padding: 8px 18px;
            font-size: 10px;
            color: var(--text-muted);
            background: #fafbfc;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 16px;
        }

        /* â”€â”€ Case Info Section â”€â”€ */
        #case-info {
            background: #f0f5ff;
            border-radius: 16px;
            border: 1px solid #e2e4ea;
            box-shadow: 0 1px 3px rgba(0,0,0,0.04), 0 8px 24px rgba(0,0,0,0.03);
            overflow: hidden;
        }
        .case-info-header {
            background: linear-gradient(135deg, #1e293b 0%, #334155 50%, #475569 100%);
            padding: 18px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .case-info-header-inner {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .case-info-header h3 {
            font-size: 14px;
            font-weight: 700;
            color: #ffffff;
            margin: 0;
            letter-spacing: 0.02em;
        }
        .case-info-badge {
            display: inline-flex;
            align-items: center;
            padding: 3px 10px;
            background: rgba(255,255,255,0.12);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255,255,255,0.18);
            border-radius: 6px;
            font-size: 10px;
            font-weight: 700;
            color: rgba(255,255,255,0.7);
            letter-spacing: 0.12em;
            text-transform: uppercase;
        }
        .case-info-ln-tag {
            font-family: 'SF Mono', Menlo, Consolas, monospace;
            font-size: 20px;
            font-weight: 800;
            color: #ffffff;
            letter-spacing: -0.02em;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
        .case-info-body {
            padding: 20px 24px 24px;
        }
        .ci-card {
            display: flex;
            align-items: flex-start;
            gap: 14px;
            padding: 16px 18px;
            border-radius: 12px;
            border: 1px solid transparent;
            transition: all 0.2s ease;
        }
        .ci-card--applicant {
            background: linear-gradient(135deg, #eff6ff 0%, #f0f7ff 100%);
            border-color: #bfdbfe;
        }
        .ci-card--opponent {
            background: linear-gradient(135deg, #fef3f2 0%, #fff5f4 100%);
            border-color: #fecaca;
        }
        .ci-card--lawyer {
            background: linear-gradient(135deg, #f5f3ff 0%, #f6f4ff 100%);
            border-color: #ddd6fe;
        }
        .ci-card:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.06);
        }
        .ci-card-icon {
            font-size: 20px;
            line-height: 1;
            flex-shrink: 0;
            margin-top: 2px;
        }
        .ci-label {
            font-size: 10px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.06em;
            margin-bottom: 4px;
        }
        .ci-value {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1.3;
        }
        .ci-meta-row {
            display: flex;
            align-items: center;
            gap: 0;
            margin-top: 16px;
            padding: 14px 20px;
            background: rgba(255,255,255,0.6);
            border-radius: 10px;
            border: 1px solid #dce5f5;
        }
        .ci-meta {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            justify-content: center;
        }
        .ci-meta-divider {
            width: 1px;
            height: 24px;
            background: #e2e4ea;
            flex-shrink: 0;
        }
        .ci-meta-label {
            font-size: 11px;
            font-weight: 500;
            color: var(--text-muted);
        }
        .ci-meta-val {
            font-size: 13px;
            font-weight: 700;
            color: var(--text-secondary);
        }
        .ci-meta-val--ok {
            color: #16a34a;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
        }
        .btn:active { transform: scale(0.97); }
        .btn-primary {
            background: #111827;
            color: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12);
        }
        .btn-primary:hover { background: #374151; box-shadow: 0 4px 12px rgba(0,0,0,0.15); transform: translateY(-1px); }
        .btn-ghost {
            background: white;
            color: var(--text-secondary);
            border: 1px solid var(--border);
        }
        .btn-ghost:hover { border-color: var(--border-hover); color: var(--text-primary); background: #fafafa; }
        .btn-emerald {
            background: #111827;
            color: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12);
        }
        .btn-emerald:hover { background: #374151; box-shadow: 0 4px 12px rgba(0,0,0,0.15); transform: translateY(-1px); }

        /* 3-panel */
        .three-panel { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 16px; 
            margin-bottom: 20px;
        }
        
        @media (max-width: 1400px) { 
            .three-panel { 
                grid-template-columns: 1fr; 
                gap: 16px;
            }
            .panel-card {
                max-width: 100%;
            }
        }
        
        @media (min-width: 1401px) and (max-width: 1600px) {
            .three-panel {
                gap: 12px;
            }
        }

        .panel-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 14px;
            overflow: hidden;
            transition: border-color 0.3s, box-shadow 0.3s, transform 0.2s;
            display: flex;
            flex-direction: column;
        }
        .panel-card:hover { 
            border-color: var(--border-hover); 
            box-shadow: 0 8px 32px rgba(0,0,0,0.08);
            transform: translateY(-2px);
        }
        
        /* ãƒ‘ãƒãƒ«ã‚«ãƒ¼ãƒ‰å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ */
        .panel-card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 16px 20px;
            background: linear-gradient(135deg, #f8f9fb 0%, #ffffff 100%);
            border-bottom: 1px solid var(--border);
        }
        
        .panel-card-icon {
            width: 24px;
            height: 24px;
            border-radius: 8px;
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.15);
        }
        
        .panel-card-title {
            font-size: 13px;
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: -0.01em;
            margin: 0;
        }
        
        .panel-card-body {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0;
        }
        
        .panel-card-footer {
            padding: 16px 20px;
            border-top: 1px solid var(--border);
            background: var(--bg-glass);
        }
        
        .panel-section {
            padding-bottom: 16px;
            margin-bottom: 16px;
            border-bottom: 1px solid var(--border);
        }
        
        .panel-section:last-child {
            border-bottom: none;
            padding-bottom: 0;
            margin-bottom: 0;
        }
        
        .panel-section-label {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }
        
        .panel-option {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            transition: background 0.2s ease;
        }
        
        .panel-option:hover {
            background: var(--bg-glass);
        }
        
        .panel-option-text {
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .panel-select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 10px;
            font-size: 12px;
            color: var(--text-primary);
            background: white;
            outline: none;
            transition: all 0.2s;
            font-weight: 500;
        }
        
        .panel-select:focus {
            border-color: #111827;
            box-shadow: 0 0 0 3px rgba(17, 24, 39, 0.06);
        }
        
        .panel-textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 10px;
            font-size: 12px;
            color: var(--text-primary);
            background: white;
            outline: none;
            transition: all 0.2s;
            resize: vertical;
            min-height: 80px;
            line-height: 1.6;
            font-family: inherit;
        }
        
        .panel-textarea:focus {
            border-color: #111827;
            box-shadow: 0 0 0 3px rgba(17, 24, 39, 0.06);
        }
        
        .panel-textarea::placeholder {
            color: var(--text-muted);
        }
        
        .panel-preview {
            background: var(--bg-glass);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 16px;
            max-height: 240px;
            overflow-y: auto;
            font-size: 11px;
            color: var(--text-muted);
            line-height: 1.6;
        }
        
        .panel-hint {
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border: 1px solid #fde68a;
            border-radius: 10px;
            padding: 12px 14px;
            font-size: 11px;
            color: #92400e;
            line-height: 1.6;
        }
        
        .space-y-2-5 > * + * {
            margin-top: 10px;
        }

        /* Evidence strips */
        .ev-strip {
            border-radius: 12px;
            padding: 16px 20px;
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }
        .ev-strip::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
        }
        .ev-red { background: #fef2f2; }
        .ev-red::before { background: linear-gradient(180deg, #dc2626, #ef4444); }
        .ev-green { background: #f0fdf4; }
        .ev-green::before { background: linear-gradient(180deg, #16a34a, #22c55e); }
        .ev-purple { background: #faf5ff; }
        .ev-purple::before { background: linear-gradient(180deg, #9333ea, #a855f7); }

        /* CW Group table */
        .cw-group {
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            transition: border-color 0.3s;
        }
        .cw-group:hover { border-color: var(--border-hover); }
        .cw-group-header {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--border);
        }
        .cw-group table { width: 100%; border-collapse: collapse; table-layout: fixed; }
        .cw-group th {
            padding: 3px 6px;
            text-align: left;
            font-size: 9px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            background: var(--bg-glass);
            border-bottom: 1px solid var(--border);
        }
        .cw-group td {
            padding: 2px 6px;
            font-size: 10px;
            border-bottom: 1px solid var(--border);
            line-height: 1.4;
        }
        .cw-group tbody tr { transition: background 0.15s; }
        .cw-group tbody tr:hover { background: var(--accent-glow); }
        .cw-group tbody tr:last-child td { border-bottom: none; }

        .ipn-link {
            color: #1d4ed8;
            font-weight: 700;
            font-family: 'SF Mono', Menlo, Consolas, monospace;
            text-decoration: none;
            position: relative;
        }
        .ipn-link::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 0;
            height: 1.5px;
            background: #1d4ed8;
            transition: width 0.2s;
        }
        .ipn-link:hover::after { width: 100%; }

        /* Template cards */
        .tpl-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(360px, 1fr)); gap: 14px; }
        .tpl-card {
            background: var(--bg-glass);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 18px;
            transition: border-color 0.3s, box-shadow 0.3s, transform 0.2s;
            position: relative;
        }
        .tpl-card:hover { 
            border-color: var(--border-hover); 
            box-shadow: 0 8px 32px rgba(0,0,0,0.12); 
            transform: translateY(-2px); 
        }
        .tpl-card.selected {
            border-color: #3b82f6;
            background: linear-gradient(135deg, #eff6ff 0%, #ffffff 100%);
            box-shadow: 0 4px 16px rgba(59, 130, 246, 0.15);
        }
        .tpl-card.selected::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #3b82f6, #2563eb);
        }
        
        .tpl-checkbox {
            appearance: none;
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid #d1d5db;
            border-radius: 6px;
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
            background: white;
            flex-shrink: 0;
        }
        .tpl-checkbox:checked {
            background: #3b82f6;
            border-color: #3b82f6;
        }
        .tpl-checkbox:checked::after {
            content: 'âœ“';
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 700;
        }
        .tpl-text {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 10px;
            padding: 14px;
            white-space: pre-wrap;
            line-height: 1.7;
            font-size: 11.5px;
            max-height: 200px;
            overflow-y: auto;
            font-family: 'Hiragino Mincho ProN', 'Yu Mincho', serif;
            color: #374151;
        }
        .tpl-text::-webkit-scrollbar { width: 4px; }
        .tpl-text::-webkit-scrollbar-track { background: transparent; }
        .tpl-text::-webkit-scrollbar-thumb { background: var(--border-hover); border-radius: 4px; }

        .copy-btn {
            opacity: 0;
            transition: opacity 0.2s, background 0.2s;
            padding: 4px 12px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 600;
            color: #111827;
            cursor: pointer;
            border: 1px solid #e5e7eb;
            background: #f9fafb;
        }
        .tpl-card:hover .copy-btn { opacity: 1; }
        .copy-btn:hover { background: #f3f4f6; border-color: #d1d5db; }

        /* Pulse animation */
        .pulse-dot {
            width: 8px; height: 8px;
            border-radius: 50%;
            background: #16a34a;
            position: relative;
        }
        .pulse-dot::after {
            content: '';
            position: absolute;
            inset: -3px;
            border-radius: 50%;
            background: rgba(22,163,74,0.25);
            animation: pulseDot 2s ease-in-out infinite;
        }
        @keyframes pulseDot { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.5; transform: scale(1.4); } }

        /* è¦ç´ ç•ªå·ãƒãƒƒã‚¸ */
        .element-id {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 9px;
            font-weight: 700;
            font-family: monospace;
            color: #9ca3af;
            background: #f3f4f6;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            padding: 2px 5px;
            margin-left: 6px;
            vertical-align: middle;
            cursor: help;
            transition: all 0.2s;
        }
        .element-id:hover {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
            transform: scale(1.1);
        }

        /* Checkbox custom */
        input[type="checkbox"] {
            appearance: none;
            width: 18px; height: 18px;
            border: 2px solid #d1d5db;
            border-radius: 5px;
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
            background: white;
        }
        input[type="checkbox"]:checked {
            background: #111827;
            border-color: #111827;
        }
        input[type="checkbox"]:checked::after {
            content: 'âœ“';
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 11px;
            font-weight: 700;
        }

        /* Radio custom */
        input[type="radio"] {
            appearance: none;
            width: 16px; height: 16px;
            border: 2px solid #d1d5db;
            border-radius: 50%;
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
            background: white;
        }
        input[type="radio"]:checked { border-color: #111827; }
        input[type="radio"]:checked::after {
            content: '';
            position: absolute;
            width: 8px; height: 8px;
            background: #111827;
            border-radius: 50%;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
        }

        /* Select */
        select, textarea {
            background: white !important;
            border: 1px solid #e5e7eb !important;
            color: #111827 !important;
            border-radius: 10px !important;
            outline: none;
            transition: border-color 0.2s;
        }
        select:focus, textarea:focus { border-color: #111827 !important; box-shadow: 0 0 0 3px rgba(17,24,39,0.06); }

        /* Placeholder */
        .placeholder-pill {
            display: inline-block;
            padding: 2px 10px;
            border-radius: 6px;
            font-size: 10px;
            font-weight: 600;
            font-family: 'SF Mono', Menlo, Consolas, monospace;
            background: #fffbeb;
            color: #92400e;
            border: 1px solid #fde68a;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 100px; }
        ::-webkit-scrollbar-thumb:hover { background: #9ca3af; }

        /* Print */
        @media print {
            @page { margin: 20mm; size: A4 portrait; }
            html, body { margin: 0; padding: 20mm; background: white; }
            body::before { display: none; }
            #mainContent { display: none !important; }
            .glass-card { background: white; border: 1px solid #ccc; }
        }

        /* Section number */
        .section-num {
            width: 28px; height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: 800;
        }
    </style>
</head>
<body>

<div id="mainContent" class="max-w-[1400px] mx-auto px-4 py-6 space-y-5">

    <!-- â•â•â•â•â•â•â•â•â•â•â• HEADER â•â•â•â•â•â•â•â•â•â•â• -->
    <header class="glass-card p-5 flex items-center justify-between">
        <div class="flex items-center gap-5">
            <div class="flex items-center gap-3">
                <div style="background:#111827;border-radius:12px;width:42px;height:42px;display:flex;align-items:center;justify-content:center">
                    <span style="font-size:20px;filter:grayscale(1) brightness(10)">âš–</span>
                </div>
                <div>
                    <h1 class="text-base font-extrabold tracking-tight" style="color:var(--text-primary)">ç”³ç«‹æ›¸ä½œæˆ</h1>
                </div>
            </div>
        </div>
        <div class="flex items-center gap-3">
            <button onclick="showLogViewer()" class="flex items-center gap-2 px-3 py-2 rounded-lg transition-all" style="background:#f3f4f6;border:1px solid #e5e7eb" onmouseover="this.style.background='#e5e7eb';this.style.borderColor='#d1d5db'" onmouseout="this.style.background='#f3f4f6';this.style.borderColor='#e5e7eb'">
                <span style="font-size:14px">ğŸ“Š</span>
                <span class="text-xs font-semibold" style="color:#374151">ãƒ­ã‚°</span>
                <span class="text-[10px] font-bold px-2 py-0.5 rounded-full" style="background:#3b82f6;color:#fff" id="logCountBadge">0</span>
            </button>
            <div style="background:#e5e7eb;border-radius:50%;width:30px;height:30px;display:flex;align-items:center;justify-content:center">
                <span class="text-xs font-bold" style="color:#374151">æˆ¸</span>
            </div>
            <span class="text-xs font-medium" style="color:var(--text-primary)">æˆ¸ç”° æ³‰</span>
        </div>
    </header>

    <!-- NAV -->
    <nav class="flex flex-wrap gap-2">
        <button class="btn btn-primary" onclick="location.href='lnportal.html'">â† LNä¸€è¦§ã«æˆ»ã‚‹</button>
    </nav>

    <!-- â•â•â•â•â•â•â•â•â•â•â• æ¡ˆä»¶æƒ…å ± â•â•â•â•â•â•â•â•â•â•â• -->
    <section id="case-info" class="overflow-hidden">
        <div class="case-info-header">
            <div class="case-info-header-inner">
                <span class="case-info-badge">CASE</span>
                <h3>æ¡ˆä»¶æƒ…å ±</h3>
            </div>
            <span class="case-info-ln-tag" id="current-ln-number">7K14488</span>
        </div>
        <div class="case-info-body">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="ci-card ci-card--applicant">
                    <div class="ci-card-icon">ğŸ‘¤</div>
                    <div>
                        <div class="ci-label">ç”³ç«‹äººï¼ˆæ¨©åˆ©è€…ï¼‰</div>
                        <div class="ci-value">æ ªå¼ä¼šç¤¾ãƒŠãƒãƒ¥</div>
                    </div>
                </div>
                <div class="ci-card ci-card--opponent">
                    <div class="ci-card-icon">ğŸ¢</div>
                    <div>
                        <div class="ci-label">ç›¸æ‰‹æ–¹ï¼ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ï¼‰</div>
                        <div class="ci-value">KDDIæ ªå¼ä¼šç¤¾</div>
                    </div>
                </div>
                <div class="ci-card ci-card--lawyer">
                    <div class="ci-card-icon">âš–ï¸</div>
                    <div>
                        <div class="ci-label">å¼è­·å£«</div>
                        <div class="ci-value">æ²³ç”°</div>
                    </div>
                </div>
            </div>
            <div class="ci-meta-row">
                <div class="ci-meta">
                    <span class="ci-meta-label">ä½œå“ç•ªå·</span>
                    <span class="ci-meta-val">SHC082 ã»ã‹</span>
                </div>
                <div class="ci-meta-divider"></div>
                <div class="ci-meta">
                    <span class="ci-meta-label">IPæ•°</span>
                    <span class="ci-meta-val">51ä»¶</span>
                </div>
                <div class="ci-meta-divider"></div>
                <div class="ci-meta">
                    <span class="ci-meta-label">ç¢ºèªæ›¸</span>
                    <span class="ci-meta-val ci-meta-val--ok">â—¯ ã‚ã‚Š</span>
                </div>
            </div>
        </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â• TAB SWITCHER â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="main-tab-bar">
        <button id="tab-create" onclick="switchTab('create')" class="main-tab main-tab--active">
            <span class="main-tab-icon">ğŸ“</span>
            <span class="main-tab-text">æ›¸é¡ä½œæˆ<span class="element-id" title="è¦ç´ ID: M-01">M-01</span></span>
        </button>
        <button id="tab-manage" onclick="switchTab('manage')" class="main-tab">
            <span class="main-tab-icon">ğŸ“¦</span>
            <span class="main-tab-text">è¨¼æ‹ ã‚’é›†ã‚ã‚‹<span class="element-id" title="è¦ç´ ID: M-02">M-02</span></span>
        </button>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â• TAB: æ›¸é¡ä½œæˆ â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="tabContent-create" style="padding-top:20px">

    <!-- â•â•â•â•â•â•â•â•â•â•â• 1. ç”³ç«‹æ›¸ã‚’ä½œæˆã™ã‚‹ â•â•â•â•â•â•â•â•â•â•â• -->
    <div>
        <div class="flex items-center gap-3 mb-3">
            <div class="section-num" style="background:#111827;color:white">1</div>
            <h2 class="text-lg font-extrabold tracking-tight" style="color:var(--text-primary)">ç”³ç«‹æ›¸ã‚’ä½œæˆã™ã‚‹</h2>
        </div>

        <section class="glass-card overflow-hidden">
            <div class="section-head">
                <h3>æå‡ºã™ã‚‹æ›¸é¡</h3>
            </div>
            <div class="p-5">
                <div class="three-panel">
                    <!-- ç”³ç«‹æ›¸æœ¬æ–‡ -->
                    <div class="panel-card">
                        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
                        <div class="panel-card-header">
                            <div class="panel-card-icon">
                                <span class="text-[10px] text-emerald-400 font-bold">âœ“</span>
                            </div>
                            <h4 class="panel-card-title">ç”³ç«‹æ›¸æœ¬æ–‡</h4>
                        </div>

                        <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
                        <div class="panel-card-body">
                            <div class="panel-section">
                                <p class="panel-section-label">ç”³ç«‹ã¦ã®ç¨®é¡</p>
                                <div class="space-y-2">
                                    <label class="panel-option">
                                        <input type="radio" name="appeal_type" value="disclosure_only" checked>
                                        <span class="panel-option-text">é–‹ç¤ºã®ã¿</span>
                                    </label>
                                    <label class="panel-option">
                                        <input type="radio" name="appeal_type" value="disclosure_deletion">
                                        <span class="panel-option-text">é–‹ç¤ºï¼‹æ¶ˆå»ç¦æ­¢</span>
                                    </label>
                                    <label class="panel-option">
                                        <input type="radio" name="appeal_type" value="disclosure_provision">
                                        <span class="panel-option-text">é–‹ç¤ºï¼‹æä¾›å‘½ä»¤</span>
                                    </label>
                                </div>
                            </div>

                            <div class="panel-section">
                                <p class="panel-section-label">è‘—ä½œæ¨©è¨¼æ˜ãƒ‘ã‚¿ãƒ¼ãƒ³</p>
                                <select id="copyrightPattern" class="panel-select">
                                    <option value="">-- é¸æŠ --</option>
                                    <option value="package">â‘  ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è‘—ä½œè¡¨è¨˜</option>
                                    <option value="film">â‘¡ æ˜ ç”»è£½ä½œè€…ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆç›£ç£ã‚ã‚Šï¼‰</option>
                                    <option value="director_none">â‘¢ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¡¨è¨˜ï¼ˆç›£ç£ãªã—ï¼‰</option>
                                    <option value="employment">â‘£ è·å‹™è‘—ä½œ</option>
                                    <option value="transfer">â‘¤ è‘—ä½œæ¨©è­²æ¸¡</option>
                                    <option value="trademark">â‘¥ å•†æ¨™è¡¨è¨˜</option>
                                    <option value="retailsite">â‘¦ è²©å£²ã‚µã‚¤ãƒˆè¡¨è¨˜</option>
                                    <option value="ethics">â‘§ å€«ç†æ©Ÿæ§‹å¯©æŸ»</option>
                                    <option value="multiple">â‘¨ è¤‡æ•°ç›£ç£</option>
                                    <option value="commission">â‘© å§”è¨—è²©å£²</option>
                                </select>
                            </div>

                            <div class="panel-section">
                                <p class="panel-section-label">ä¸»å¼µãƒ»ç«‹è¨¼æ–¹é‡</p>
                                <textarea id="mainArgument" class="panel-textarea" placeholder="è¿½åŠ ã®ä¸»å¼µãŒã‚ã‚Œã°å…¥åŠ›ã—ã¦ãã ã•ã„"></textarea>
                            </div>
                        </div>

                        <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ -->
                        <div class="panel-card-footer">
                            <button onclick="createApplication()" class="btn btn-emerald w-full justify-center">
                                ğŸ“„ ç”³ç«‹æ›¸ã‚’ä½œæˆ<span class="element-id" title="è¦ç´ ID: M-10">M-10</span>
                            </button>
                        </div>
                    </div>

                    <!-- è¨¼æ‹ èª¬æ˜æ›¸ -->
                    <div class="panel-card">
                        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
                        <div class="panel-card-header">
                            <div class="panel-card-icon">
                                <span class="text-[10px] text-emerald-400 font-bold">âœ“</span>
                            </div>
                            <h4 class="panel-card-title">è¨¼æ‹ èª¬æ˜æ›¸</h4>
                        </div>

                        <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
                        <div class="panel-card-body">
                            <div class="panel-section" style="border:none;padding-bottom:0">
                                <p class="panel-section-label">å‡ºåŠ›å½¢å¼</p>
                                <div class="flex gap-2">
                                    <button onclick="generateEvidenceStatement()" class="btn btn-primary flex-1 justify-center text-[11px]">ğŸ”§ è‡ªå‹•ç”Ÿæˆ</button>
                                    <button onclick="downloadEvidencePDF()" class="btn btn-ghost flex-1 justify-center text-[11px]">ğŸ“„ PDF</button>
                                    <button onclick="downloadEvidenceMD()" class="btn btn-ghost flex-1 justify-center text-[11px]">ğŸ“ MD</button>
                                </div>
                            </div>
                            <div class="panel-section" style="border:none;padding-top:12px">
                                <p class="panel-section-label">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</p>
                                <div id="evidencePreview" class="panel-preview">
                                    ç”Ÿæˆå†…å®¹ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- åˆ¥ç´™ä¸€å¼ -->
                    <div class="panel-card">
                        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
                        <div class="panel-card-header">
                            <div class="panel-card-icon">
                                <span class="text-[10px] text-emerald-400 font-bold">âœ“</span>
                            </div>
                            <h4 class="panel-card-title">åˆ¥ç´™ä¸€å¼</h4>
                        </div>

                        <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
                        <div class="panel-card-body">
                            <div class="panel-section">
                                <p class="panel-section-label">åŒ…å«ã™ã‚‹åˆ¥ç´™</p>
                                <div class="space-y-2-5">
                                    <label class="panel-option">
                                        <input type="checkbox" id="appendix1">
                                        <span class="panel-option-text">åˆ¥ç´™1: ç™ºä¿¡è€…æƒ…å ±ç›®éŒ²</span>
                                    </label>
                                    <label class="panel-option">
                                        <input type="checkbox" id="appendix2" checked>
                                        <span class="panel-option-text">åˆ¥ç´™2: IPNä¸€è¦§ï¼ˆå‹•ç”»ç›®éŒ²ï¼‰</span>
                                    </label>
                                    <label class="panel-option">
                                        <input type="checkbox" id="appendix3" checked>
                                        <span class="panel-option-text">åˆ¥ç´™3: è‘—ä½œæ¨©é–¢ä¿‚è¨¼æ˜</span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="panel-section" style="border:none">
                                <div class="panel-hint">
                                    ğŸ’¡ ç”³ç«‹ã¦ã®ç¨®é¡ã‚’é¸æŠã™ã‚‹ã¨ã€å¿…è¦ãªåˆ¥ç´™ãŒè‡ªå‹•çš„ã«é¸æŠã•ã‚Œã¾ã™ã€‚
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â• 2. è‘—ä½œæ¨©è¨¼æ˜ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé›† â•â•â•â•â•â•â•â•â•â•â• -->
    <div>
        <div class="flex items-center justify-between mb-3">
            <div class="flex items-center gap-3">
                <div class="section-num" style="background:#111827;color:white">2</div>
                <h2 class="text-lg font-extrabold tracking-tight" style="color:var(--text-primary)">è‘—ä½œæ¨©è¨¼æ˜ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé›†</h2>
            </div>
            <button onclick="openAddTemplate()" class="btn btn-primary text-[11px]">ï¼‹ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’è¿½åŠ </button>
        </div>

        <!-- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ« -->
        <div id="addTemplateModal" style="display:none" class="glass-card overflow-hidden mb-4">
            <div class="section-head" style="display:flex;justify-content:space-between;align-items:center">
                <h3>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’è¿½åŠ </h3>
                <button onclick="closeAddTemplate()" style="background:none;border:none;cursor:pointer;font-size:20px;color:var(--text-muted);padding:0;width:28px;height:28px;display:flex;align-items:center;justify-content:center;border-radius:6px;transition:all 0.2s" onmouseover="this.style.background='var(--bg-glass)';this.style.color='var(--text-primary)'" onmouseout="this.style.background='none';this.style.color='var(--text-muted)'">âœ•</button>
            </div>
            <div class="p-5">
                <div class="mb-4">
                    <p class="text-xs font-bold mb-3" style="color:var(--text-secondary)">ã‚«ãƒ†ã‚´ãƒªï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</p>
                    <div class="flex flex-wrap gap-3">
                        <label class="flex items-center gap-2 cursor-pointer rounded-lg px-3 py-2" style="background:var(--bg-glass);border:1px solid var(--border)">
                            <input type="checkbox" class="tpl-cat-checkbox" value="ç”³ç«‹æ›¸">
                            <span class="text-[12px] font-medium" style="color:var(--text-primary)">ç”³ç«‹æ›¸</span>
                        </label>
                        <label class="flex items-center gap-2 cursor-pointer rounded-lg px-3 py-2" style="background:var(--bg-glass);border:1px solid var(--border)">
                            <input type="checkbox" class="tpl-cat-checkbox" value="å¼è­·å£«">
                            <span class="text-[12px] font-medium" style="color:var(--text-primary)">å¼è­·å£«</span>
                        </label>
                        <label class="flex items-center gap-2 cursor-pointer rounded-lg px-3 py-2" style="background:var(--bg-glass);border:1px solid var(--border)">
                            <input type="checkbox" class="tpl-cat-checkbox" value="æ¨©åˆ©è€…åˆ¥">
                            <span class="text-[12px] font-medium" style="color:var(--text-primary)">æ¨©åˆ©è€…åˆ¥</span>
                        </label>
                        <label class="flex items-center gap-2 cursor-pointer rounded-lg px-3 py-2" style="background:var(--bg-glass);border:1px solid var(--border)">
                            <input type="checkbox" class="tpl-cat-checkbox" value="è¨¼æ‹ ">
                            <span class="text-[12px] font-medium" style="color:var(--text-primary)">è¨¼æ‹ </span>
                        </label>
                        <label class="flex items-center gap-2 cursor-pointer rounded-lg px-3 py-2" style="background:var(--bg-glass);border:1px solid var(--border)">
                            <input type="checkbox" class="tpl-cat-checkbox" value="ãã®ä»–">
                            <span class="text-[12px] font-medium" style="color:var(--text-primary)">ãã®ä»–</span>
                        </label>
                    </div>
                </div>
                <div class="mb-3">
                    <p class="text-xs font-bold mb-1.5" style="color:var(--text-secondary)">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå</p>
                    <input id="tplName" type="text" placeholder="ä¾‹: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è‘—ä½œè¡¨è¨˜ï¼ˆæ–°ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰" style="width:100%;padding:8px 12px;border:1px solid var(--border);border-radius:8px;font-size:12px;background:var(--bg-card);color:var(--text-primary)">
                </div>
                <div class="mb-4">
                    <p class="text-xs font-bold mb-1.5" style="color:var(--text-secondary)">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæœ¬æ–‡</p>
                    <textarea id="tplBody" rows="5" placeholder="ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æœ¬æ–‡ã‚’å…¥åŠ›..." style="width:100%;padding:8px 12px;border:1px solid var(--border);border-radius:8px;font-size:11px;background:var(--bg-card);color:var(--text-primary);resize:vertical;line-height:1.6"></textarea>
                </div>
                <div class="flex gap-2 justify-end">
                    <button onclick="closeAddTemplate()" class="btn btn-ghost text-[11px]">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                    <button onclick="submitAddTemplate()" class="btn btn-primary text-[11px]">è¿½åŠ ã™ã‚‹</button>
                </div>
            </div>
        </div>

        <!-- æ¨©åˆ©è€…ã®å•é¡Œ -->
        <section class="glass-card overflow-hidden mb-4">
            <div class="section-head">
                <h3>æ¨©åˆ©è€…ã®å•é¡Œ</h3>
                <div class="sub">è‘—ä½œæ¨©è€…ã§ã‚ã‚‹ã“ã¨ã‚’è¨¼æ˜ã™ã‚‹ãŸã‚ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</div>
            </div>
            <div class="p-5">
                <div class="tpl-grid">
                    <div class="tpl-card" data-tpl-id="pkg1" data-tpl-category="copyright">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-start gap-3" style="flex:1">
                                <input type="checkbox" class="tpl-checkbox" id="tpl-pkg1" 
                                    onchange="toggleTemplateSelect(this, 'pkg1', 'â‘  ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«è‘—ä½œè¡¨è¨˜')" 
                                    data-template-key="pkg1">
                                <div style="flex:1">
                                    <span class="badge badge-green">ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¡¨è¨˜</span>
                                    <h4 class="text-[13px] font-bold mt-2" style="color:var(--text-primary)">â‘  ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«è‘—ä½œè¡¨è¨˜</h4>
                                </div>
                            </div>
                            <button onclick="copyTemplate(this)" class="copy-btn">ã‚³ãƒ”ãƒ¼</button>
                        </div>
                        <div class="tpl-text">æœ¬ä»¶è‘—ä½œç‰©ã‚’åéŒ²ã—ãŸï¼¤ï¼¶ï¼¤ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å·¦ä¸‹ã«ã€ã€Œè£½ä½œãƒ»è‘—ä½œãƒ»å—å¯©ï¼ï¼»ç”³ç«‹äººåï¼½ã€ã¨ç”³ç«‹äººã®åç§°ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€‚
ã—ãŸãŒã£ã¦ã€è‘—ä½œç‰©ã®å…¬è¡†ã¸ã®æä¾›ã®éš›ã«ç”³ç«‹äººã®å®ŸåãŒè‘—ä½œè€…åã¨ã—ã¦é€šå¸¸ã®æ–¹æ³•ã«ã‚ˆã‚Šè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã®ã§ã‚ã‚Šã€ç”³ç«‹äººã¯è‘—ä½œè€…ã¨ã—ã¦æ¨å®šã•ã‚Œã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼”æ¡ï¼‰ã€‚
ã“ã‚Œã‚’è¦†ã™äº‹å®Ÿã¯å­˜åœ¨ã—ãªã„ã€‚
ä»¥ä¸Šã‚ˆã‚Šã€ç”³ç«‹äººã¯è‘—ä½œæ¨©ã‚’æœ‰ã™ã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼—æ¡ï¼‘é …ï¼‰ã€‚</div>
                        <p class="text-[10px] mt-2" style="color:var(--text-muted)">åŒºåˆ†: ç”³ç«‹æ›¸ã€€è¨¼æ‹ : ç”²â—</p>
                    </div>

                    <div class="tpl-card" data-tpl-id="confirm2" data-tpl-category="copyright">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-start gap-3" style="flex:1">
                                <input type="checkbox" class="tpl-checkbox" id="tpl-confirm2" 
                                    onchange="toggleTemplateSelect(this, 'confirm2', 'â‘¡ è²©å£²ã‚µã‚¤ãƒˆç”»åƒ/ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼‹ç¢ºèªæ›¸')" 
                                    data-template-key="confirm2">
                                <div style="flex:1">
                                    <span class="badge badge-green">æ˜ ç”»è£½ä½œè€… + ç›£ç£</span>
                                    <h4 class="text-[13px] font-bold mt-2" style="color:var(--text-primary)">â‘¡ è²©å£²ã‚µã‚¤ãƒˆç”»åƒ/ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼‹ç¢ºèªæ›¸</h4>
                                </div>
                            </div>
                            <button onclick="copyTemplate(this)" class="copy-btn">ã‚³ãƒ”ãƒ¼</button>
                        </div>
                        <div class="tpl-text">ç”³ç«‹äººã¯ã€æœ¬ä»¶è‘—ä½œç‰©ï¼ˆï¼»ç”²â—ï¼½ï¼‰ã‚’æœ€åˆã«ç™ºæ„ã—ã¦ä¼ç”»ã—ã€æœ¬ä»¶è‘—ä½œç‰©ã®åˆ¶ä½œè²»ç”¨å…¨ã¦ã‚’è² æ‹…ã™ã‚‹ç­‰ã®è²¬ä»»ã‚’è² ã†ä¸»ä½“ã§ã‚ã£ãŸã€‚
ã‚ˆã£ã¦ã€ç”³ç«‹äººã¯æœ¬ä»¶è‘—ä½œç‰©ã®ã€Œæ˜ ç”»è£½ä½œè€…ã€ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’æ¡ç¬¬ï¼‘ï¼å·ï¼‰ã«ã‚ãŸã‚‹ã€‚
ç”³ç«‹äººã¯ã€ã€Œï¼»ç›£ç£åï¼½ã€ã“ã¨ç”³ç«‹å¤–ï¼»æ°åï¼½ï¼ˆè‘—ä½œç‰©ç›®éŒ²ï¼»ç•ªå·ï¼½ï¼‰ã«å¯¾ã—ã¦æœ¬ä»¶è‘—ä½œç‰©ã®è£½ä½œã‚’ä¾é ¼ã—ã€åŒäººãŒç›£ç£ã‚’æ‹…å½“ã—ãŸã€‚
ç”³ç«‹å¤–ï¼»æ°åï¼½ã¯ã€è„šæœ¬ã®å‰µä½œã‚„æ˜ åƒã®ç·¨é›†ç­‰ã®ç·æŒ‡æ®ã‚’è¡Œã£ã¦ã€æœ¬ä»¶è‘—ä½œç‰©ã®è„šæœ¬ã‚„æ˜ åƒå†…å®¹ã«é–¢ã™ã‚‹æœ€çµ‚æ±ºå®šæ¨©é™ã‚’æœ‰ã—ã¦ãŠã‚Šã€æœ¬ä»¶è‘—ä½œç‰©ã«ã€Œå…¨ä½“çš„å½¢æˆã«å‰µä½œçš„ã«å¯„ä¸ã—ã€ã¦ãŠã‚Šã€è‘—ä½œè€…ã«ã‚ãŸã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼–æ¡ï¼‰ã€‚
ã“ã®ç‚¹ã€æœ¬ä»¶è‘—ä½œç‰©ã®åˆ¶ä½œã«ã‚ãŸã‚Šã€ç”³ç«‹å¤–ï¼»æ°åï¼½ã¯ã€æ˜ ç”»è£½ä½œè€…ã§ã‚ã‚‹ç”³ç«‹äººã«å¯¾ã—ã€æœ¬ä»¶è‘—ä½œç‰©ã®åˆ¶ä½œã«å‚åŠ ã™ã‚‹ã“ã¨ã‚’ç´„æŸã—ã¦ã„ãŸã“ã¨ã‹ã‚‰ï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€æœ¬ä»¶è‘—ä½œç‰©ã®è‘—ä½œæ¨©ã¯ç”³ç«‹äººã«å¸°å±ã—ãŸï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’ï¼™æ¡ç¬¬ï¼‘é …ï¼‰ã€‚</div>
                        <p class="text-[10px] mt-2" style="color:var(--text-muted)">åŒºåˆ†: ç”³ç«‹æ›¸ã€€è¨¼æ‹ : ç”²â—ï¼ˆè¤‡æ•°ï¼‰</p>
                    </div>

                    <div class="tpl-card" data-tpl-id="hmp1" data-tpl-category="copyright">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-start gap-3" style="flex:1">
                                <input type="checkbox" class="tpl-checkbox" id="tpl-hmp1" 
                                    onchange="toggleTemplateSelect(this, 'hmp1', 'â‘¢ ï½ˆï½ï½ï¼ˆç°¡æ˜“ç‰ˆï¼‰')" 
                                    data-template-key="hmp1">
                                <div style="flex:1">
                                    <span class="badge badge-green">ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¡¨è¨˜</span>
                                    <h4 class="text-[13px] font-bold mt-2" style="color:var(--text-primary)">â‘¢ ï½ˆï½ï½ï¼ˆç°¡æ˜“ç‰ˆï¼‰</h4>
                                </div>
                            </div>
                            <button onclick="copyTemplate(this)" class="copy-btn">ã‚³ãƒ”ãƒ¼</button>
                        </div>
                        <div class="tpl-text">æœ¬ä»¶è‘—ä½œç‰©ã‚’åéŒ²ã—ãŸï¼¤ï¼¶ï¼¤ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å·¦ä¸‹ã«ã€ã€Œè£½ä½œãƒ»å—å¯©ãƒ»ç™ºå£²ãƒ»è²©å£²ï¼ï¼»å•†å·ï¼½ã€ã¨ã®è¨˜è¼‰ãŒã‚ã‚‹ï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€‚ã€Œè£½ä½œã€ã®è¡¨è¨˜ã¯ç”³ç«‹äººãŒã€Œæ˜ ç”»ã®è‘—ä½œç‰©ã«ãŠã„ã¦â€¦åˆ¶ä½œâ€¦ç­‰ã‚’æ‹…å½“ã—ã¦ãã®æ˜ ç”»ã®è‘—ä½œç‰©ã®å…¨ä½“çš„å½¢æˆã«å‰µä½œçš„ã«å¯„ä¸ã—ãŸè€…ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼–æ¡ï¼‰ã€ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ãŠã‚Šã€ã€Œç™ºå£²ãƒ»è²©å£²ã€ã®è¡¨è¨˜ã¯ç”³ç«‹äººãŒé ’å¸ƒæ¨©ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’ï¼–æ¡ï¼‰ã‚’æœ‰ã™ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã‚‹ã€‚
æ˜ ç”»ã®è£½ä½œã‚’æ‹…å½“ã—ã€ç™ºå£²ãƒ»è²©å£²ã™ã‚‹æ¨©åˆ©ï¼ˆé ’å¸ƒæ¨©ï¼‰ã‚’æœ‰ã—ã¦ã„ã‚‹è€…ãŒè‘—ä½œæ¨©è€…ã§ã‚ã‚‹ã¨é€šå¸¸äººã§ã‚ã‚Œã°è€ƒãˆã‚‹ã¯ãšã§ã‚ã‚‹ã‹ã‚‰ã€ç”³ç«‹äººãŒè‘—ä½œè€…ã¨ã—ã¦é€šå¸¸ã®æ–¹æ³•ã«ã‚ˆã‚Šè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã¨ã„ãˆã‚‹ã€‚ã—ãŸãŒã£ã¦ã€ç”³ç«‹äººã¯è‘—ä½œè€…ã¨æ¨å®šã•ã‚Œã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼”æ¡ï¼‰ã€‚
ä»¥ä¸Šã‚ˆã‚Šã€ç”³ç«‹äººã¯è‘—ä½œæ¨©ã‚’æœ‰ã™ã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼—æ¡ï¼‘é …ï¼‰ã€‚</div>
                        <p class="text-[10px] mt-2" style="color:var(--text-muted)">åŒºåˆ†: ç”³ç«‹æ›¸ã€€è¨¼æ‹ : ç”²â—</p>
                    </div>

                    <div class="tpl-card" data-tpl-id="benhur-kawata" data-tpl-category="copyright">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-start gap-3" style="flex:1">
                                <input type="checkbox" class="tpl-checkbox" id="tpl-benhur" 
                                    onchange="toggleTemplateSelect(this, 'benhur-kawata', 'â‘£ ãƒ™ãƒ³ãƒãƒ¼ï¼ˆå…¬å¼ã‚µã‚¤ãƒˆè‘—ä½œè¡¨ç¤ºï¼‰')" 
                                    data-template-key="benhur-kawata">
                                <div style="flex:1">
                                    <span class="badge badge-cyan">å…¬å¼ã‚µã‚¤ãƒˆ</span>
                                    <h4 class="text-[13px] font-bold mt-2" style="color:var(--text-primary)">â‘£ ãƒ™ãƒ³ãƒãƒ¼ï¼ˆå…¬å¼ã‚µã‚¤ãƒˆè‘—ä½œè¡¨ç¤ºï¼‰</h4>
                                </div>
                            </div>
                            <button onclick="copyTemplate(this)" class="copy-btn">ã‚³ãƒ”ãƒ¼</button>
                        </div>
                        <div class="tpl-text">åˆ¥ç´™è‘—ä½œç‰©ç›®éŒ²è¨˜è¼‰ã®å‹•ç”»ï¼ˆä»¥ä¸‹ã€Œæœ¬ä»¶è‘—ä½œç‰©ã€ã¨ã„ã†ã€‚ï¼‰ã®å…¬å¼è²©å£²ã‚µã‚¤ãƒˆï¼ˆï¼»URLï¼½ï¼‰ã«ã€Œè‘—ä½œæ¨©ã€€ï¼»ç”³ç«‹äººåï¼½ã€ã¨è¡¨ç¤ºãŒã‚ã‚‹ï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€‚
ã—ãŸãŒã£ã¦ã€æœ¬ä»¶è‘—ä½œç‰©ã®å…¬è¡†ã¸ã®æä¾›ã®éš›ã«ã€ç”³ç«‹äººã®åç§°ãŒè‘—ä½œè€…ã¨ã—ã¦é€šå¸¸ã®æ–¹æ³•ã«ã‚ˆã‚Šã€è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã®ã§ã‚ã‚‹ã‹ã‚‰ã€ç”³ç«‹äººã¯è‘—ä½œè€…ã¨æ¨å®šã•ã‚Œã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼”æ¡ï¼‰ã€‚
ä»¥ä¸Šã‚ˆã‚Šã€ç”³ç«‹äººã¯è‘—ä½œæ¨©ã‚’æœ‰ã™ã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼—æ¡ï¼‘é …ï¼‰ã€‚</div>
                        <p class="text-[10px] mt-2" style="color:var(--text-muted)">åŒºåˆ†: ç”³ç«‹æ›¸ã€€è¨¼æ‹ : ç”²â—</p>
                    </div>

                    <div class="tpl-card" data-tpl-id="prestige2" data-tpl-category="copyright">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-start gap-3" style="flex:1">
                                <input type="checkbox" class="tpl-checkbox" id="tpl-prestige" 
                                    onchange="toggleTemplateSelect(this, 'prestige2', 'â‘¤ ãƒ—ãƒ¬ã‚¹ãƒ†ãƒ¼ã‚¸ï¼ˆå•†å·ãƒ»å•†æ¨™è¡¨ç¤ºï¼‰')" 
                                    data-template-key="prestige2">
                                <div style="flex:1">
                                    <span class="badge badge-amber">å•†å·ãƒ»å•†æ¨™</span>
                                    <h4 class="text-[13px] font-bold mt-2" style="color:var(--text-primary)">â‘¤ ãƒ—ãƒ¬ã‚¹ãƒ†ãƒ¼ã‚¸ï¼ˆå•†å·ãƒ»å•†æ¨™è¡¨ç¤ºï¼‰</h4>
                                </div>
                            </div>
                            <button onclick="copyTemplate(this)" class="copy-btn">ã‚³ãƒ”ãƒ¼</button>
                        </div>
                        <div class="tpl-text">æœ¬ä»¶è‘—ä½œç‰©ã‚’åéŒ²ã—ãŸï¼¤ï¼¶ï¼¤ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å·¦ä¸‹ã«ã€ç”³ç«‹äººã®å•†å·ã§ã‚ã‚‹ã€Œï¼»å•†å·ï¼½ã€ã¨ã®è¨˜è¼‰ãŒã‚ã‚‹ï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€‚ã“ã‚Œã¯è‘—ä½œè€…ãŒç”³ç«‹äººã§ã‚ã‚‹ã“ã¨ã‚’è¡¨ã™ã‚‚ã®ã§ã‚ã‚‹ã€‚
ã•ã‚‰ã«ã€å•†å·ã®è¨˜è¼‰ã®ä¸‹ã«ã¯ã€ç”³ç«‹äººã®ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã®ï¼µï¼²ï¼¬ã€Œï¼»URLï¼½ã€ã®è¨˜è¼‰ãŒã‚ã‚Šã€ç„¡æ–­è¤‡è£½ã‚„æ”¹ç·¨ã‚’ç¦ã˜ã‚‹æ—¨ã®è­¦å‘Šæ–‡ã®è¨˜è¼‰ã‚‚ã‚ã‚‹ã€‚ã“ã‚Œã‚‰ã®è¨˜è¼‰ã¯è‘—ä½œè€…ã§ã‚ã‚‹ç”³ç«‹äººã®è¨±è«¾ãªãè¤‡è£½ã‚„ç¿»æ¡ˆã‚’ç¦ã˜ã‚‹è¶£æ—¨ã®ã‚‚ã®ã§ã‚ã‚‹ã€‚
ã¾ãŸã€ã“ã‚Œã‚‰ã®è¨˜è¼‰ã®æ›´ã«å·¦ã«ã¯ï¼Œç”³ç«‹äººã®ç™»éŒ²å•†æ¨™ã§ã‚ã‚‹ã€Œï¼»å•†æ¨™è¡¨ç¤ºï¼½ã€ï¼ˆå•†æ¨™ç™»éŒ²ï¼»ç™»éŒ²ç•ªå·ï¼½ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ãŒï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€ã“ã‚Œã‚‚æœ¬ä»¶è‘—ä½œç‰©ã«ç”³ç«‹äººã®ç™»éŒ²å•†æ¨™ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ã§ã€æœ¬ä»¶è‘—ä½œç‰©ã®è‘—ä½œè€…ãŒç”³ç«‹äººã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã™ã‚‚ã®ã§ã‚ã‚‹ã€‚
ã“ã‚Œã‚‰æœ¬ä»¶è‘—ä½œç‰©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«è¡¨ç¤ºã•ã‚ŒãŸå†…å®¹ã‹ã‚‰ã™ã‚Œã°ã€ç”³ç«‹äººãŒè‘—ä½œè€…ã§ã‚ã‚‹ã“ã¨ãŒå®¢è¦³çš„ã«æ˜ã‚‰ã‹ã§ã‚ã‚‹ã€‚
ä»¥ä¸Šã®äº‹å®Ÿã‹ã‚‰æœ¬ä»¶è‘—ä½œç‰©ã®æä¾›ã®éš›ã«ç”³ç«‹äººã®åç§°ãŒè‘—ä½œè€…åã¨ã—ã¦é€šå¸¸ã®æ–¹æ³•ã«ã‚ˆã‚Šã€è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã¨ã„ãˆã‚‹ã®ã§ã‚ã‚‹ã‹ã‚‰ã€ç”³ç«‹äººã¯è‘—ä½œè€…ã¨æ¨å®šã•ã‚Œã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼”æ¡ï¼‰ã€‚
ã—ãŸãŒã£ã¦ã€è‘—ä½œè€…ã§ã‚ã‚‹ç”³ç«‹äººã¯è‘—ä½œæ¨©ã‚’æœ‰ã™ã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼—æ¡ï¼‘é …ï¼‰ã€‚</div>
                        <p class="text-[10px] mt-2" style="color:var(--text-muted)">åŒºåˆ†: ç”³ç«‹æ›¸ã€€è¨¼æ‹ : ç”²â—ï¼ˆè¤‡æ•°ï¼‰</p>
                    </div>

                    <div class="tpl-card" data-tpl-id="hot-ent" data-tpl-category="copyright">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-start gap-3" style="flex:1">
                                <input type="checkbox" class="tpl-checkbox" id="tpl-hot" 
                                    onchange="toggleTemplateSelect(this, 'hot-ent', 'â‘¥ ãƒ›ãƒƒãƒˆã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆ')" 
                                    data-template-key="hot-ent">
                                <div style="flex:1">
                                    <span class="badge badge-purple">å¯©æŸ»æ©Ÿæ§‹</span>
                                    <h4 class="text-[13px] font-bold mt-2" style="color:var(--text-primary)">â‘¥ ãƒ›ãƒƒãƒˆã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆ</h4>
                                </div>
                            </div>
                            <button onclick="copyTemplate(this)" class="copy-btn">ã‚³ãƒ”ãƒ¼</button>
                        </div>
                        <div class="tpl-text">ã„ã‚ã‚†ã‚‹ã‚¢ãƒ€ãƒ«ãƒˆãƒ“ãƒ‡ã‚ªã¯æ€§çš„ãªå†…å®¹ã‚’å«ã‚€ã“ã¨ã‹ã‚‰ã€ç¬¬ä¸‰è€…æ©Ÿé–¢ã«ã‚ˆã‚‹å¯©æŸ»ã‚’å—ã‘ã€å½“è©²æ©Ÿé–¢ã®å¯©æŸ»åŸºæº–ã‚’ã‚¯ãƒªã‚¢ã—ã¦ã„ã‚‹ã“ã¨ãŒãã‚Œã‚’è²©å£²ã™ã‚‹ä¸Šã§ã¯é‡è¦ã¨ãªã‚‹ã€‚
æœ¬ä»¶è‘—ä½œç‰©ã«é–¢ã—ã¦ã‚‚ã€æ—¥æœ¬æ˜ åƒåˆ¶ä½œãƒ»è²©å£²å€«ç†æ©Ÿæ§‹ã®å¯©æŸ»ã‚’çµŒã¦ãŠã‚Šï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€ã“ã‚Œã‚’æœ¬ä»¶è‘—ä½œç‰©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸Šã«ã‚‚ç¤ºã—ã¦ã„ã‚‹ï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€‚
ä¸Šè¨˜ã®ã‚ˆã†ã«ã€ç¬¬ä¸‰è€…æ©Ÿé–¢ã«ã‚ˆã‚‹å¯©æŸ»ã‚’å—ã‘ã‚‹ã“ã¨ãŒæœ¬ä»¶è‘—ä½œç‰©ã‚’è²©å£²ã™ã‚‹ã“ã¨ã€ã™ãªã‚ã¡é ’å¸ƒæ¨©ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’ï¼–æ¡ï¼‰ã‚’è¡Œä½¿ã™ã‚‹ä¸Šã§é‡è¦ãªã®ã§ã‚ã‚Šã€ãã®ã‚ˆã†ãªé‡è¦ãªè¡Œç‚ºã‚’ç”³ç«‹äººåç¾©ã§è¡Œã£ã¦ã„ã‚‹ã®ã§ã‚ã‚‹ã‹ã‚‰ï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€å½“è©²äº‹å®Ÿã‹ã‚‰ã€ç”³ç«‹äººãŒè‘—ä½œæ¨©ã‚’æœ‰ã™ã‚‹ã“ã¨ãŒåˆç†çš„ã«æ¨èªã§ãã‚‹ã€‚</div>
                        <p class="text-[10px] mt-2" style="color:var(--text-muted)">åŒºåˆ†: ç”³ç«‹æ›¸ã€€è¨¼æ‹ : ç”²â—ï¼ˆè¤‡æ•°ï¼‰</p>
                    </div>

                    <div class="tpl-card" data-tpl-id="cont" data-tpl-category="copyright">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-start gap-3" style="flex:1">
                                <input type="checkbox" class="tpl-checkbox" id="tpl-cont" 
                                    onchange="toggleTemplateSelect(this, 'cont', 'â‘¦ Contï¼ˆè¤‡æ•°ç›£ç£ï¼‰')" 
                                    data-template-key="cont">
                                <div style="flex:1">
                                    <span class="badge badge-red">å…±åŒè‘—ä½œç‰©</span>
                                    <h4 class="text-[13px] font-bold mt-2" style="color:var(--text-primary)">â‘¦ Contï¼ˆè¤‡æ•°ç›£ç£ï¼‰</h4>
                                </div>
                            </div>
                            <button onclick="copyTemplate(this)" class="copy-btn">ã‚³ãƒ”ãƒ¼</button>
                        </div>
                        <div class="tpl-text">æœ¬ä»¶è‘—ä½œç‰©ã¯ã€ç”³ç«‹å¤–ï¼»æ°åï¼¡ï¼½ï¼ˆä»¥ä¸‹ã€Œï¼»å‘¼ç§°ï¼¡ï¼½ã€ã¨ã„ã†ã€‚ï¼‰ã€ç”³ç«‹å¤–ï¼»æ°åï¼¢ï¼½ï¼ˆä»¥ä¸‹ã€Œï¼»å‘¼ç§°ï¼¢ï¼½ã€ã¨ã„ã†ã€‚ï¼‰åŠã³ç”³ç«‹å¤–ï¼»æ°åï¼£ï¼½ï¼ˆä»¥ä¸‹ã€Œï¼»å‘¼ç§°ï¼£ï¼½ã€ã¨ã„ã†ã€‚ï¼‰ã®ä¸‰è€…ãŒç›£ç£ã‚’å‹™ã‚ã€è£½ä½œã•ã‚ŒãŸã‚‚ã®ã§ã‚ã‚Šã€å…±åŒè‘—ä½œç‰©ã§ã‚ã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’æ¡ï¼‘é …ï¼‘ï¼’å·ï¼‰ã€‚
ã—ãŸãŒã£ã¦ã€æœ¬ä»¶è‘—ä½œç‰©ã®è‘—ä½œè€…ã¯ã€ï¼»å‘¼ç§°ï¼¡ï¼½ã€ï¼»å‘¼ç§°ï¼¢ï¼½åŠã³ï¼»å‘¼ç§°ï¼£ï¼½ã®ä¸‰è€…ã§ã‚ã‚‹ã¨ã„ã†ã“ã¨ã«ãªã‚‹ï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€‚
ã¾ãŸã€æœ¬ä»¶è‘—ä½œç‰©ã®è£½ä½œã«ãŠã„ã¦ã€è£½ä½œã™ã‚‹æ„æ€ã‚’æœ‰ã—ã€æ³•å¾‹ä¸Šã®æ¨©åˆ©ç¾©å‹™ãŒå¸°å±ã™ã‚‹ä¸»ä½“ã¨ã—ã¦ã€çµŒæ¸ˆçš„ãªè²»ç”¨ã®è² æ‹…ã‚’ã—ãŸã®ã¯ç”³ç«‹äººã§ã‚ã‚‹ï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€‚ã—ãŸãŒã£ã¦ã€ç”³ç«‹äººã¯æœ¬ä»¶è‘—ä½œç‰©ã®æ˜ ç”»è£½ä½œè€…ã«ã‚ãŸã‚‹ã€‚
ï¼»å‘¼ç§°ï¼¡ï¼½ã€ï¼»å‘¼ç§°ï¼¢ï¼½åŠã³ï¼»å‘¼ç§°ï¼£ï¼½ã¯ã€ç”³ç«‹äººã«å¯¾ã—ã¦ã€æœ¬ä»¶è‘—ä½œç‰©ã®è£½ä½œã«å‚åŠ ç´„æŸã‚’ã—ã¦ã„ãŸï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€‚
ä»¥ä¸Šã‚ˆã‚Šã€ç”³ç«‹äººã¯æ˜ ç”»è£½ä½œè€…ã¨ã—ã¦ã€æœ¬ä»¶è‘—ä½œç‰©ã®è‘—ä½œæ¨©ã‚’æœ‰ã™ã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’ï¼™æ¡ï¼‘é …ï¼‰ã€‚</div>
                        <p class="text-[10px] mt-2" style="color:var(--text-muted)">åŒºåˆ†: ç”³ç«‹æ›¸ã€€è¨¼æ‹ : ç”²â—ï¼ˆè¤‡æ•°ï¼‰</p>
                    </div>

                    <div class="tpl-card" data-tpl-id="mkh" data-tpl-category="copyright">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-start gap-3" style="flex:1">
                                <input type="checkbox" class="tpl-checkbox" id="tpl-mkh" 
                                    onchange="toggleTemplateSelect(this, 'mkh', 'â‘§ ã‚¨ãƒ ã‚±ã‚¤ã‚¨ã‚¤ãƒï¼ˆãƒ¬ãƒ¼ãƒ™ãƒ«èª¬æ˜ï¼‰')" 
                                    data-template-key="mkh">
                                <div style="flex:1">
                                    <span class="badge badge-cyan">ãƒ¡ãƒ¼ã‚«ãƒ¼æ¬„</span>
                                    <h4 class="text-[13px] font-bold mt-2" style="color:var(--text-primary)">â‘§ ã‚¨ãƒ ã‚±ã‚¤ã‚¨ã‚¤ãƒï¼ˆãƒ¬ãƒ¼ãƒ™ãƒ«èª¬æ˜ï¼‰</h4>
                                </div>
                            </div>
                            <button onclick="copyTemplate(this)" class="copy-btn">ã‚³ãƒ”ãƒ¼</button>
                        </div>
                        <div class="tpl-text">æœ¬ä»¶è‘—ä½œç‰©ã«ãŠã‘ã‚‹è‘—ä½œæ¨©ã¯æ˜ ç”»è£½ä½œè€…ã§ã‚ã‚‹ç”³ç«‹äººãŒæœ‰ã™ã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’ï¼™æ¡ï¼‘é …ï¼‰ã€‚ã“ã®ã“ã¨ã¯ä»¥ä¸‹ã®äº‹å®Ÿã‚ˆã‚Šæ˜ã‚‰ã‹ã§ã‚ã‚‹ã€‚
ã¾ãšã€æœ¬ä»¶è‘—ä½œç‰©ã®è²©å£²ã‚µã‚¤ãƒˆã®ãƒ¡ãƒ¼ã‚«ãƒ¼æ¬„ã«ã€Œï¼»ãƒ¡ãƒ¼ã‚«ãƒ¼åï¼½ã€ã¨è¨˜ã•ã‚Œã¦ã„ã‚‹ï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€‚ã“ã“ã«ã„ã†ã€Œãƒ¡ãƒ¼ã‚«ãƒ¼ã€ã¨ã¯ã€æœ¬ä»¶è‘—ä½œç‰©ã®è£½ä½œã«ãŠã„ã¦ç™ºæ„ã¨è²¬ä»»ã‚’æœ‰ã™ã‚‹è€…ã€ã™ãªã‚ã¡ã€æ˜ ç”»è£½ä½œè€…ã‚’æ„å‘³ã™ã‚‹ã€‚
æ¬¡ã«ã€Œï¼»ãƒ¡ãƒ¼ã‚«ãƒ¼åï¼½ã€ã¨ã„ã†ã®ã¯ã€ç”³ç«‹äººãŒå•†å“ã‚’è²©å£²ã™ã‚‹éš›ã«ç”¨ã„ã‚‹ãƒ¬ãƒ¼ãƒ™ãƒ«åã§ã‚ã‚‹ã€‚ãã—ã¦ã€å½“è©²ãƒ¬ãƒ¼ãƒ™ãƒ«ã®ä½œå“ã®è‘—ä½œæ¨©ã¯ç”³ç«‹äººã«å¸°å±ã™ã‚‹æ—¨ãŒè²©å£²ã‚µã‚¤ãƒˆä¸Šã«å…¬è¡¨ã•ã‚Œã¦ã„ã‚‹ï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€‚
å…¬è¡†ãŒåˆ©ç”¨ã™ã‚‹æœ¬ä»¶è‘—ä½œç‰©ã®è²©å£²ã‚µã‚¤ãƒˆã«ãŠã„ã¦ã€è™šå½ã®äº‹å®Ÿã‚’è¨˜è¼‰ã™ã‚‹ã“ã¨ã¯è€ƒãˆã«ãã„ãŸã‚ã€è¨˜è¼‰å†…å®¹ãŒçœŸå®Ÿã§ã‚ã‚‹ã‚‚ã®ã¨åˆç†çš„ã«æ¨èªã§ãã‚‹ã€‚
ä»¥ä¸Šã‚ˆã‚Šã€æœ¬ä»¶è‘—ä½œç‰©ã®è‘—ä½œæ¨©ã¯æ˜ ç”»è£½ä½œè€…ã§ã‚ã‚‹ç”³ç«‹äººã«å¸°å±ã™ã‚‹ã€‚</div>
                        <p class="text-[10px] mt-2" style="color:var(--text-muted)">åŒºåˆ†: ç”³ç«‹æ›¸ã€€è¨¼æ‹ : ç”²â—ï¼ˆè¤‡æ•°ï¼‰</p>
                    </div>

                    <div class="tpl-card" data-tpl-id="blue-corner" data-tpl-category="copyright">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-start gap-3" style="flex:1">
                                <input type="checkbox" class="tpl-checkbox" id="tpl-blue" 
                                    onchange="toggleTemplateSelect(this, 'blue-corner', 'â‘¨ ãƒ–ãƒ«ãƒ¼ã‚³ãƒ¼ãƒŠãƒ¼ï¼ˆè­²æ¸¡ã‚ã‚Šï¼‰')" 
                                    data-template-key="blue-corner">
                                <div style="flex:1">
                                    <span class="badge badge-red">è­²æ¸¡å¥‘ç´„</span>
                                    <h4 class="text-[13px] font-bold mt-2" style="color:var(--text-primary)">â‘¨ ãƒ–ãƒ«ãƒ¼ã‚³ãƒ¼ãƒŠãƒ¼ï¼ˆè­²æ¸¡ã‚ã‚Šï¼‰</h4>
                                </div>
                            </div>
                            <button onclick="copyTemplate(this)" class="copy-btn">ã‚³ãƒ”ãƒ¼</button>
                        </div>
                        <div class="tpl-text">ç”³ç«‹å¤–ï¼»ä¼šç¤¾åï¼½ã¯ã€æ˜ ç”»è£½ä½œè€…ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’æ¡ç¬¬ï¼‘ï¼å·ï¼‰ã¨ã—ã¦ã€æœ¬ä»¶è‘—ä½œç‰©ï¼ˆï¼»ç”²â—ï¼½ï¼‰ã®è£½ä½œã‚’ç™ºæ„ã—ã¦ä¼ç”»ã—ã€è£½ä½œè²»ç”¨ã‚’å…¨ã¦è² æ‹…ã™ã‚‹ãªã©ã—ãŸã€‚
ç”³ç«‹å¤–ï¼»æ°åï¼½ã¯ã€æœ¬ä»¶è‘—ä½œç‰©ã®è„šæœ¬ã‚„æ˜ åƒå†…å®¹ã«é–¢ã™ã‚‹æœ€çµ‚æ±ºå®šæ¨©é™ã‚’æœ‰ã—ã€æœ¬ä»¶è‘—ä½œç‰©ã®å…¨ä½“çš„å½¢æˆã«å‰µä½œçš„ã«å¯„ä¸ã—ãŸè‘—ä½œè€…ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼–æ¡ï¼‰ã§ã‚ã‚‹ãŒã€åŒäººã¯ç”³ç«‹å¤–ï¼»ä¼šç¤¾åï¼½ã«å¯¾ã—ã€æœ¬ä»¶è‘—ä½œç‰©ã®è£½ä½œã«å‚åŠ ã™ã‚‹ã“ã¨ã‚’ç´„æŸã—ã¦ã„ãŸã“ã¨ã‹ã‚‰ã€æœ¬ä»¶è‘—ä½œç‰©ã®è‘—ä½œæ¨©ã¯åŒç¤¾ã«å¸°å±ã—ãŸï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’ï¼™æ¡ç¬¬ï¼‘é …ï¼‰ï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€‚
ãã®å¾Œã€ç”³ç«‹å¤–ï¼»ä¼šç¤¾åï¼½ã¯ã€ç”³ç«‹äººã«å¯¾ã—ã€æœ¬ä»¶è‘—ä½œç‰©ã®è‘—ä½œæ¨©ã‚’è­²æ¸¡ã—ãŸï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€‚
ã—ãŸãŒã£ã¦ã€æœ¬ä»¶è‘—ä½œç‰©ã®è‘—ä½œæ¨©ã¯ç”³ç«‹äººã«å¸°å±ã—ã¦ã„ã‚‹ã€‚</div>
                        <p class="text-[10px] mt-2" style="color:var(--text-muted)">åŒºåˆ†: ç”³ç«‹æ›¸ã€€è¨¼æ‹ : ç”²â—ï¼ˆè¤‡æ•°ï¼‰</p>
                    </div>

                    <div class="tpl-card" data-tpl-id="kspro" data-tpl-category="copyright">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-start gap-3" style="flex:1">
                                <input type="checkbox" class="tpl-checkbox" id="tpl-kspro" 
                                    onchange="toggleTemplateSelect(this, 'kspro', 'â‘© KSãƒ—ãƒ­ï¼ˆå§”è¨—è²©å£²ï¼‰')" 
                                    data-template-key="kspro">
                                <div style="flex:1">
                                    <span class="badge badge-amber">å§”è¨—è²©å£²</span>
                                    <h4 class="text-[13px] font-bold mt-2" style="color:var(--text-primary)">â‘© KSãƒ—ãƒ­ï¼ˆå§”è¨—è²©å£²ï¼‰</h4>
                                </div>
                            </div>
                            <button onclick="copyTemplate(this)" class="copy-btn">ã‚³ãƒ”ãƒ¼</button>
                        </div>
                        <div class="tpl-text">ç”³ç«‹äººã¯æœ¬ä»¶è‘—ä½œç‰©ã®è£½ä½œã«ç™ºæ„ã¨è²¬ä»»ã‚’æœ‰ã™ã‚‹è€…ã§ã‚ã‚Šã€æ˜ ç”»è£½ä½œè€…ã«ã‚ãŸã‚‹ã€‚ã—ãŸãŒã£ã¦ã€ç”³ç«‹äººã¯æ˜ ç”»è£½ä½œè€…ã¨ã—ã¦è‘—ä½œæ¨©ã‚’æœ‰ã™ã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’ï¼™æ¡ï¼‘é …ï¼‰ã€‚
ã“ã®ã“ã¨ã¯ç”³ç«‹äººãŒç”³ç«‹å¤–ï¼»ä¼šç¤¾åï¼½ã«å¯¾ã—ã¦è²©å£²ã‚’å§”è¨—ã—ã¦ã„ã‚‹ã“ã¨ã‹ã‚‰æ˜ã‚‰ã‹ã§ã‚ã‚‹ï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€‚
é ’å¸ƒæ¨©ã¯æ˜ ç”»è£½ä½œè€…ãŒå æœ‰ã™ã‚‹ã®ã§ã‚ã‚Šï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’ï¼–æ¡ï¼‰ã€å½“è©²æ¨©åˆ©ã®åˆ©ç”¨è¨±è«¾ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼–ï¼“æ¡ï¼‰ã‚’ç”³ç«‹äººãŒç”³ç«‹å¤–ï¼»ä¼šç¤¾åï¼½ã«å¯¾ã—ã¦ä¸ãˆã¦ã„ã‚‹ã®ã§ã‚ã‚‹ã‹ã‚‰ã€ç”³ç«‹äººãŒè‘—ä½œæ¨©è€…ã§ã‚ã‚‹ã“ã¨ãŒåˆç†çš„ã«æ¨èªã§ãã‚‹ã€‚</div>
                        <p class="text-[10px] mt-2" style="color:var(--text-muted)">åŒºåˆ†: ç”³ç«‹æ›¸ã€€è¨¼æ‹ : ç”²â—ï¼ˆè¤‡æ•°ï¼‰</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- å¼è­·å£«ã®å•é¡Œ -->
        <section class="glass-card overflow-hidden mb-4">
            <div class="section-head">
                <h3>å¼è­·å£«ã®å•é¡Œ</h3>
                <div class="sub">ç¢ºèªæ›¸ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚„è·å‹™è‘—ä½œã«é–¢ã™ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</div>
            </div>
            <div class="p-5">
                <div class="tpl-grid">
                    <div class="tpl-card" data-tpl-id="kakuchiyama" data-tpl-category="lawyer">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-start gap-3" style="flex:1">
                                <input type="checkbox" class="tpl-checkbox" id="tpl-kakuchiyama" 
                                    onchange="toggleTemplateSelect(this, 'kakuchiyama', 'è§’åœ°å±±å…ˆç”Ÿã®ç¢ºèªæ›¸ãƒ‘ã‚¿ãƒ¼ãƒ³')" 
                                    data-template-key="kakuchiyama">
                                <div style="flex:1">
                                    <span class="badge badge-red">ç¢ºèªæ›¸ï¼ˆè¤‡æ•°ï¼‰</span>
                                    <h4 class="text-[13px] font-bold mt-2" style="color:var(--text-primary)">è§’åœ°å±±å…ˆç”Ÿã®ç¢ºèªæ›¸ãƒ‘ã‚¿ãƒ¼ãƒ³</h4>
                                </div>
                            </div>
                            <button onclick="copyTemplate(this)" class="copy-btn">ã‚³ãƒ”ãƒ¼</button>
                        </div>
                        <div class="tpl-text">ç”³ç«‹äººã¯ã€æœ¬ä»¶è‘—ä½œç‰©ï¼ˆï¼»ç”²â—ï¼½ï¼‰ã‚’æœ€åˆã«ç™ºæ„ã—ã¦ä¼ç”»ã—ãŸè€…ã§ã‚ã‚Šã€æœ¬ä»¶è‘—ä½œç‰©ã‚’è£½ä½œã™ã‚‹æ„æ€ã‚’æœ‰ã—ã¦çµŒæ¸ˆçš„ãªè²»ç”¨ã®è² æ‹…ã‚’ã—ãŸã®ã¯ç”³ç«‹äººã§ã‚ã‚Šã€è£½ä½œã«é–¢ã™ã‚‹æ³•å¾‹ä¸Šã®æ¨©åˆ©ãƒ»ç¾©å‹™ãŒå¸°å±ã™ã‚‹ä¸»ä½“ã§ã‚ã£ãŸã‹ã‚‰ã€ã€Œæ˜ ç”»è£½ä½œè€…ã€ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’æ¡ç¬¬ï¼‘ï¼å·ï¼‰ã«å½“ãŸã‚‹ã€‚
ç”³ç«‹äººã¯ã€ç”³ç«‹å¤–ï¼»æ°åï¼¡ï¼½ã«å¯¾ã—åˆ¥ç´™è‘—ä½œç‰©ç›®éŒ²ï¼»ç•ªå·ï¼¡ï¼½è¨˜è¼‰ã®æ˜ ç”»ã®è£½ä½œã‚’ã€ç”³ç«‹å¤–ï¼»æ°åï¼¢ï¼½ã«å¯¾ã—åˆ¥ç´™è‘—ä½œç‰©ç›®éŒ²ï¼»ç•ªå·ï¼¢ï¼½è¨˜è¼‰ã®æ˜ ç”»ã®è£½ä½œã‚’ã€ç”³ç«‹å¤–ï¼»æ°åï¼£ï¼½ã«å¯¾ã—åˆ¥ç´™è‘—ä½œç‰©ç›®éŒ²ï¼»ç•ªå·ï¼£ï¼½è¨˜è¼‰ã®æ˜ ç”»ã®è£½ä½œã‚’ãã‚Œãã‚Œä¾é ¼ã—ï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€åŒäººã‚‰ã¯ç›£ç£ã¨ã—ã¦è„šæœ¬ã®å‰µä½œã‚„æ˜ åƒã®ç·¨é›†ç­‰ã®ç·æŒ‡æ®ã‚’è¡Œã£ã¦ã€æœ¬ä»¶è‘—ä½œç‰©ã®è„šæœ¬ã‚„æ˜ åƒå†…å®¹ã«é–¢ã™ã‚‹æœ€çµ‚æ±ºå®šæ¨©é™ã‚’æœ‰ã—ã€æœ¬ä»¶è‘—ä½œç‰©ã«ã€Œå…¨ä½“çš„å½¢æˆã«å‰µä½œçš„ã«å¯„ä¸ã€ã—ãŸè‘—ä½œè€…ã«å½“ãŸã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼–æ¡ï¼‰ã€‚
ãã—ã¦ã€æœ¬ä»¶è‘—ä½œç‰©ã®è£½ä½œã«ã‚ãŸã‚Šã€ä¸Šè¨˜ç›£ç£ã‚‰ã¯æ˜ ç”»è£½ä½œè€…ã§ã‚ã‚‹ç”³ç«‹äººã«å¯¾ã—ã€è£½ä½œã«å‚åŠ ã™ã‚‹ã“ã¨ã‚’ç´„æŸã—ã¦ã„ãŸã“ã¨ã‹ã‚‰ã€æœ¬ä»¶è‘—ä½œç‰©ã®è‘—ä½œæ¨©ã¯ç”³ç«‹äººã«å¸°å±ã—ãŸï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’ï¼™æ¡ç¬¬ï¼‘é …ï¼‰ã€‚</div>
                        <p class="text-[10px] mt-2" style="color:var(--text-muted)">åŒºåˆ†: ç”³ç«‹æ›¸ã€€è¨¼æ‹ : ç”²â—</p>
                    </div>

                    <div class="tpl-card" data-tpl-id="mbm-kawata" data-tpl-category="lawyer">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-start gap-3" style="flex:1">
                                <input type="checkbox" class="tpl-checkbox" id="tpl-mbm" 
                                    onchange="toggleTemplateSelect(this, 'mbm-kawata', 'ï¼­ï¼¢ï¼­ï¼ˆæ²³ç”°å…ˆç”Ÿä¿®æ­£ç‰ˆï¼‰')" 
                                    data-template-key="mbm-kawata">
                                <div style="flex:1">
                                    <span class="badge badge-green">è·å‹™è‘—ä½œ</span>
                                    <h4 class="text-[13px] font-bold mt-2" style="color:var(--text-primary)">ï¼­ï¼¢ï¼­ï¼ˆæ²³ç”°å…ˆç”Ÿä¿®æ­£ç‰ˆï¼‰</h4>
                                </div>
                            </div>
                            <button onclick="copyTemplate(this)" class="copy-btn">ã‚³ãƒ”ãƒ¼</button>
                        </div>
                        <div class="tpl-text">åˆ¥ç´™è‘—ä½œç‰©ç›®éŒ²è¨˜è¼‰ã®å„å‹•ç”»ï¼ˆä»¥ä¸‹ã€Œæœ¬ä»¶è‘—ä½œç‰©ã€ã¨ã„ã†ã€‚ï¼‰ã¯ã€ç”³ç«‹äººã®ä»£è¡¨å–ç· å½¹åŠã³ç”³ç«‹äººã®å¾“æ¥­å“¡ã®ä¼ç”»ã«åŸºã¥ã„ã¦ã€ã“ã‚Œã‚‰ã®è€…ã«ã‚ˆã‚Šè·å‹™ä¸Šåˆ¶ä½œã•ã‚ŒãŸã‚‚ã®ã§ã‚ã‚‹ï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€‚
ã—ãŸãŒã£ã¦ã€æœ¬ä»¶è‘—ä½œç‰©ã¯ç”³ç«‹äººç­‰ã®ç™ºæ„ã«åŸºã¥ã„ã¦ã€ãã®æ¥­å‹™å¾“äº‹è€…ãŒè·å‹™ä¸Šä½œæˆã—ãŸè‘—ä½œç‰©ã§ã‚ã‚‹ã¨ã„ãˆã‚‹ã€‚
ã¾ãŸã€æœ¬ä»¶è‘—ä½œç‰©ã‚’åéŒ²ã—ãŸï¼¤ï¼¶ï¼¤ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã€Œï¼»å•†å·ï¼½ã€ã¨ç”³ç«‹äººã®å•†å·ãŒè¡¨ç¤ºã•ã‚Œã¦ãŠã‚Šï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€æœ¬ä»¶è‘—ä½œç‰©ã®è²©å£²ã‚µã‚¤ãƒˆã§ã¯ã€ã€Œãƒ¡ãƒ¼ã‚«ãƒ¼ã€ã®æ¬„ã«ã€Œï¼»å•†å·ï¼½ã€ã¨ç”³ç«‹äººã®å•†å·ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ï¼ˆï¼»ç”²â—ï¼½ï¼‰ã€‚ã—ãŸãŒã£ã¦ã€ç”³ç«‹äººãŒè‡ªå·±ã®è‘—ä½œã®åç¾©ã®ä¸‹ã«å…¬è¡¨ã•ã‚Œã¦ã„ã‚‹ã€‚
ãªãŠã€è·å‹™è‘—ä½œã«é–¢ã—ã¦ã€ä»£è¡¨è€…åŠã³å¾“æ¥­å“¡ã®å¥‘ç´„ä¸Šã®åˆ¥æ®µã®å®šã‚ã¯å­˜åœ¨ã—ãªã„ã€‚
ä»¥ä¸Šã‚ˆã‚Šã€ç”³ç«‹äººã¯ã€è·å‹™è‘—ä½œã®è¦ä»¶ã‚’ã™ã¹ã¦æº€ãŸã™ãŸã‚è‘—ä½œæ¨©ã‚’æœ‰ã™ã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼•æ¡ï¼‘é …ï¼‰ã€‚</div>
                        <p class="text-[10px] mt-2" style="color:var(--text-muted)">åŒºåˆ†: ç”³ç«‹æ›¸ã€€è¨¼æ‹ : ç”²â—ï¼ˆè¤‡æ•°ï¼‰</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- è¨¼æ‹ è¨˜è¼‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ -->
        <section class="glass-card overflow-hidden">
            <div class="section-head">
                <h3>è¨¼æ‹ è¨˜è¼‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</h3>
                <div class="sub">ç”²13ãƒ»ç”²14 ç­‰ã®è¨˜è¼‰ç”¨</div>
            </div>
            <div class="p-5">
                <div class="tpl-grid">
                    <div class="tpl-card" data-tpl-id="ev-dvd" data-tpl-category="evidence">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-start gap-3" style="flex:1">
                                <input type="checkbox" class="tpl-checkbox" id="tpl-ev-dvd" 
                                    onchange="toggleTemplateSelect(this, 'ev-dvd', 'ç”²13 DVDãƒ‘ãƒƒã‚±ãƒ¼ã‚¸')" 
                                    data-template-key="ev-dvd">
                                <div style="flex:1">
                                    <span class="badge badge-green">æ±ç”¨</span>
                                    <h4 class="text-[13px] font-bold mt-2" style="color:var(--text-primary)">ç”²13 DVDãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</h4>
                                </div>
                            </div>
                            <button onclick="copyTemplate(this)" class="copy-btn">ã‚³ãƒ”ãƒ¼</button>
                        </div>
                        <div class="tpl-text">ç”²ï¼‘ï¼“
æœ¬ä»¶è‘—ä½œç‰©ã®ï¼¤ï¼¶ï¼¤ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å°åˆ·ã—ãŸæ›¸é¢
å†™ã—
ï¼»æ—¥ä»˜ï¼½
ç”³ç«‹äºº
ç”³ç«‹äººãŒè‘—ä½œç‰©ç›®éŒ²ï¼»ç•ªå·ï¼½ã®è‘—ä½œæ¨©è€…ã§ã‚ã‚‹ã“ã¨ã€‚</div>
                        <p class="text-[10px] mt-2" style="color:var(--text-muted)">åŒºåˆ†: è¨¼æ‹ ã€€è¨¼æ‹ : ç”²ï¼‘ï¼“</p>
                    </div>

                    <div class="tpl-card" data-tpl-id="ev-confirm" data-tpl-category="evidence">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-start gap-3" style="flex:1">
                                <input type="checkbox" class="tpl-checkbox" id="tpl-ev-confirm" 
                                    onchange="toggleTemplateSelect(this, 'ev-confirm', 'ç”²14 ç¢ºèªæ›¸')" 
                                    data-template-key="ev-confirm">
                                <div style="flex:1">
                                    <span class="badge badge-red">ç¢ºèªæ›¸</span>
                                    <h4 class="text-[13px] font-bold mt-2" style="color:var(--text-primary)">ç”²14 ç¢ºèªæ›¸</h4>
                                </div>
                            </div>
                            <button onclick="copyTemplate(this)" class="copy-btn">ã‚³ãƒ”ãƒ¼</button>
                        </div>
                        <div class="tpl-text">ç”²ï¼‘ï¼”
è‘—ä½œæ¨©ã®å¸°å±ã«é–¢ã™ã‚‹ç¢ºèªæ›¸
å†™ã—
ï¼»æ—¥ä»˜ï¼½
ç”³ç«‹å¤–ï¼»æ°åï¼½
ç”³ç«‹äººãŒæœ¬ä»¶è‘—ä½œç‰©ã«ãŠã‘ã‚‹æ˜ ç”»è£½ä½œè€…ã§ã‚ã‚‹ã“ã¨ã€ç”³ç«‹å¤–ï¼»æ°åï¼½ãŒæœ¬ä»¶è‘—ä½œç‰©ã«ãŠã‘ã‚‹è‘—ä½œè€…ã§ã‚ã‚‹ã“ã¨åŠã³åŒäººãŒæœ¬ä»¶è‘—ä½œç‰©ã®è£½ä½œã«éš›ã—å‚åŠ ç´„æŸã‚’ã—ã¦ã„ãŸã“ã¨ç­‰ã€‚</div>
                        <p class="text-[10px] mt-2" style="color:var(--text-muted)">åŒºåˆ†: è¨¼æ‹ ã€€è¨¼æ‹ : ç”²ï¼‘ï¼”</p>
                    </div>

                    <div class="tpl-card" data-tpl-id="ev-transfer" data-tpl-category="evidence">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-start gap-3" style="flex:1">
                                <input type="checkbox" class="tpl-checkbox" id="tpl-ev-transfer" 
                                    onchange="toggleTemplateSelect(this, 'ev-transfer', 'ç”²14ã®1 è‘—ä½œæ¨©è­²æ¸¡å¥‘ç´„æ›¸')" 
                                    data-template-key="ev-transfer">
                                <div style="flex:1">
                                    <span class="badge badge-amber">è­²æ¸¡å¥‘ç´„</span>
                                    <h4 class="text-[13px] font-bold mt-2" style="color:var(--text-primary)">ç”²14ã®1 è‘—ä½œæ¨©è­²æ¸¡å¥‘ç´„æ›¸</h4>
                                </div>
                            </div>
                            <button onclick="copyTemplate(this)" class="copy-btn">ã‚³ãƒ”ãƒ¼</button>
                        </div>
                        <div class="tpl-text">ç”²ï¼‘ï¼”ã®ï¼‘
è‘—ä½œæ¨©è­²æ¸¡å¥‘ç´„æ›¸
å†™ã—
ï¼»æ—¥ä»˜ï¼½
ç”³ç«‹å¤–ï¼»ä¼šç¤¾åï¼½åŠã³ç”³ç«‹äºº
æœ¬ä»¶è‘—ä½œç‰©ï¼ˆè‘—ä½œç‰©ç›®éŒ²ï¼»ç•ªå·ï¼½ï¼‰ã®è‘—ä½œæ¨©ãŒç”³ç«‹äººã«å¸°å±ã—ã¦ã„ã‚‹ã“ã¨ã€‚</div>
                        <p class="text-[10px] mt-2" style="color:var(--text-muted)">åŒºåˆ†: è¨¼æ‹ ã€€è¨¼æ‹ : ç”²ï¼‘ï¼”ã®ï¼‘</p>
                    </div>

                    <div class="tpl-card" data-tpl-id="ev-patent" data-tpl-category="evidence">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-start gap-3" style="flex:1">
                                <input type="checkbox" class="tpl-checkbox" id="tpl-ev-patent" 
                                    onchange="toggleTemplateSelect(this, 'ev-patent', 'ç”²14 J-PlatPatç”»é¢')" 
                                    data-template-key="ev-patent">
                                <div style="flex:1">
                                    <span class="badge badge-purple">å•†æ¨™</span>
                                    <h4 class="text-[13px] font-bold mt-2" style="color:var(--text-primary)">ç”²14 J-PlatPatç”»é¢</h4>
                                </div>
                            </div>
                            <button onclick="copyTemplate(this)" class="copy-btn">ã‚³ãƒ”ãƒ¼</button>
                        </div>
                        <div class="tpl-text">ç”²ï¼‘ï¼”
ç‰¹è¨±æƒ…å ±ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€€ï¼ªâ€•ï¼°ï½Œï½ï½”ï¼°ï½ï½”ã®æ–‡çŒ®è¡¨ç¤ºç”»é¢ã‚’å°åˆ·ã—ãŸæ›¸é¢
å†™ã—
ï¼»æ—¥ä»˜ï¼½
ç‹¬ç«‹è¡Œæ”¿æ³•äººå·¥æ¥­æ‰€æœ‰æ¨©æƒ…å ±ãƒ»ç ”ä¿®é¤¨
æœ¬ä»¶è‘—ä½œç‰©ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ç™»éŒ²å•†æ¨™ã®æ¨©åˆ©è€…ãŒç”³ç«‹äººã§ã‚ã‚‹ã“ã¨ã€‚</div>
                        <p class="text-[10px] mt-2" style="color:var(--text-muted)">åŒºåˆ†: è¨¼æ‹ ã€€è¨¼æ‹ : ç”²ï¼‘ï¼”</p>
                    </div>
                </div>
            </div>

            <!-- ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ -->
            <div class="px-5 py-4 flex flex-wrap gap-2" style="border-top:1px solid var(--border);background:var(--bg-glass)">
                <span class="text-[11px] font-semibold mr-2" style="color:var(--text-muted)">ğŸ“ ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€:</span>
                <span class="placeholder-pill">ï¼»ç”³ç«‹äººåï¼½</span>
                <span class="placeholder-pill">ï¼»ç”²â—ï¼½</span>
                <span class="placeholder-pill">ï¼»ç›£ç£åï¼½</span>
                <span class="placeholder-pill">ï¼»æ°åï¼½</span>
                <span class="placeholder-pill">ï¼»å•†å·ï¼½</span>
                <span class="placeholder-pill">ï¼»URLï¼½</span>
                <span class="placeholder-pill">ï¼»ç™»éŒ²ç•ªå·ï¼½</span>
                <span class="placeholder-pill">ï¼»æ—¥ä»˜ï¼½</span>
                <span class="placeholder-pill">ï¼»ä¼šç¤¾åï¼½</span>
            </div>
        </section>
    </div>

    </div><!-- /tabContent-create -->

    <!-- â•â•â•â•â•â•â•â•â•â•â• TAB: è¨¼æ‹ ã‚’é›†ã‚ã‚‹ â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="tabContent-manage" style="display:none;padding-top:20px">

        <!-- â•â• A: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚µãƒãƒªãƒ¼ â•â• -->
        <div class="ev-dashboard">
            <div class="ev-dashboard-head">
                <div>
                    <div class="ev-dashboard-title">è¨¼æ‹ åé›† <small>Evidence Collection</small></div>
                </div>
                <div class="ev-progress-ring">
                    <svg width="56" height="56" viewBox="0 0 56 56">
                        <circle class="ring-bg" cx="28" cy="28" r="24"/>
                        <circle class="ring-fill" cx="28" cy="28" r="24"
                            stroke-dasharray="150.8"
                            stroke-dashoffset="45.2"/>
                    </svg>
                    <div class="ring-text">70%</div>
                </div>
            </div>
            <div class="ev-dashboard-cards">
                <div class="ev-dash-card">
                    <div class="ev-dash-card-label">ç”²10 (KK)</div>
                    <div class="ev-dash-card-row">
                        <span class="ev-dash-card-num">47</span>
                        <span class="ev-dash-card-denom">/ 51ä»¶</span>
                    </div>
                    <div class="ev-dash-bar"><div class="ev-dash-bar-fill" style="width:92%;background:#f59e0b"></div></div>
                </div>
                <div class="ev-dash-card">
                    <div class="ev-dash-card-label">ç”²11 (PL)</div>
                    <div class="ev-dash-card-row">
                        <span class="ev-dash-card-num">38</span>
                        <span class="ev-dash-card-denom">/ 51ä»¶</span>
                    </div>
                    <div class="ev-dash-bar"><div class="ev-dash-bar-fill" style="width:75%;background:#3b82f6"></div></div>
                </div>
                <div class="ev-dash-card">
                    <div class="ev-dash-card-label">æ‰‹å‹•ãƒã‚§ãƒƒã‚¯</div>
                    <div class="ev-dash-card-row">
                        <span class="ev-dash-card-num">3</span>
                        <span class="ev-dash-card-denom">/ 5ä»¶</span>
                    </div>
                    <div class="ev-dash-bar"><div class="ev-dash-bar-fill" style="width:60%;background:#8b5cf6"></div></div>
                </div>
            </div>
        </div>

        <!-- â•â• B: ã‚„ã‚‹ã“ã¨ãƒªã‚¹ãƒˆ â•â• -->
        <div class="ev-action-section">
            <div class="ev-action-head" style="color:#b91c1c;background:#fef2f2">
                <span>è¦å¯¾å¿œ</span>
                <span class="ev-action-count" style="background:#fecaca;color:#b91c1c">5ä»¶</span>
            </div>

            <div class="ev-action-item" data-task-id="task-1">
                <div class="ev-action-left">
                    <input type="checkbox" class="ev-action-check ev-action-check--todo" id="task-inin" 
                        onchange="toggleTaskComplete(this, 'å§”ä»»çŠ¶', 'ç”³ç«‹äººã‹ã‚‰å¼è­·å£«ã¸ã®ä»£ç†æ¨©å§”ä»»')" 
                        style="appearance:none;-webkit-appearance:none">
                    <div style="flex:1">
                        <div class="ev-action-name">å§”ä»»çŠ¶ <a href="lnmanual.html#inin" class="ev-how-to-link" target="_blank" onclick="logAction('button_clicked', {label: 'é›†ã‚æ–¹: å§”ä»»çŠ¶'})">é›†ã‚æ–¹</a><span class="element-id" title="è¦ç´ ID: M-20">M-20</span></div>
                        <div class="ev-action-desc">ç”³ç«‹äººã‹ã‚‰å¼è­·å£«ã¸ã®ä»£ç†æ¨©å§”ä»»</div>
                    </div>
                </div>
                <span class="ev-action-badge ev-badge-manual">æ‰‹å‹•</span>
            </div>

            <div class="ev-action-item" data-task-id="task-2">
                <div class="ev-action-left">
                    <input type="checkbox" class="ev-action-check ev-action-check--todo" id="task-cert" 
                        onchange="toggleTaskComplete(this, 'ä»£è¡¨è€…äº‹é …è¨¼æ˜æ›¸', 'å–å¾—ã‹ã‚‰3ãƒ¶æœˆä»¥å†…ã®ã‚‚ã®')" 
                        style="appearance:none;-webkit-appearance:none">
                    <div style="flex:1">
                        <div class="ev-action-name">ä»£è¡¨è€…äº‹é …è¨¼æ˜æ›¸ <a href="lnmanual.html#daihyou" class="ev-how-to-link" target="_blank" onclick="logAction('button_clicked', {label: 'é›†ã‚æ–¹: ä»£è¡¨è€…äº‹é …è¨¼æ˜æ›¸'})">é›†ã‚æ–¹</a><span class="element-id" title="è¦ç´ ID: M-21">M-21</span></div>
                        <div class="ev-action-desc">å–å¾—ã‹ã‚‰3ãƒ¶æœˆä»¥å†…ã®ã‚‚ã®</div>
                    </div>
                </div>
                <span class="ev-action-badge ev-badge-manual">æ‰‹å‹•</span>
            </div>

            <div class="ev-action-item" data-task-id="task-3">
                <div class="ev-action-left">
                    <input type="checkbox" class="ev-action-check ev-action-check--todo" id="task-box" 
                        onchange="toggleTaskComplete(this, 'æ›¸é¡ãƒœãƒƒã‚¯ã‚¹è©°ã‚', 'USBãƒ»å°åˆ·æ›¸é¢ã‚’ãƒœãƒƒã‚¯ã‚¹ã«æ¢±åŒ…')" 
                        style="appearance:none;-webkit-appearance:none">
                    <div style="flex:1">
                        <div class="ev-action-name">æ›¸é¡ãƒœãƒƒã‚¯ã‚¹è©°ã‚ <a href="lnmanual.html#box-tsume" class="ev-how-to-link" target="_blank" onclick="logAction('button_clicked', {label: 'é›†ã‚æ–¹: æ›¸é¡ãƒœãƒƒã‚¯ã‚¹è©°ã‚'})">é›†ã‚æ–¹</a><span class="element-id" title="è¦ç´ ID: M-22">M-22</span></div>
                        <div class="ev-action-desc">USBãƒ»å°åˆ·æ›¸é¢ã‚’ãƒœãƒƒã‚¯ã‚¹ã«æ¢±åŒ…</div>
                    </div>
                </div>
                <span class="ev-action-badge ev-badge-manual">æ‰‹å‹•</span>
            </div>

            <div class="ev-action-item" data-task-id="task-4">
                <div class="ev-action-left">
                    <input type="checkbox" class="ev-action-check ev-action-check--todo" id="task-usb" 
                        onchange="toggleTaskComplete(this, 'ç”²1: USB è‘—ä½œç‰©', 'ç”³ç«‹äººã‹ã‚‰å—é ˜')" 
                        style="appearance:none;-webkit-appearance:none">
                    <div style="flex:1">
                        <div class="ev-action-name">ç”²1: USB è‘—ä½œç‰© <a href="lnmanual.html#usb-shouko" class="ev-how-to-link" target="_blank" onclick="logAction('button_clicked', {label: 'é›†ã‚æ–¹: ç”²1 USBè‘—ä½œç‰©'})">é›†ã‚æ–¹</a></div>
                        <div class="ev-action-desc">ç”³ç«‹äººã‹ã‚‰å—é ˜</div>
                    </div>
                </div>
                <span class="ev-action-badge ev-badge-manual">æ‰‹å‹•</span>
            </div>

            <div class="ev-action-item" data-task-id="task-5">
                <div class="ev-action-left">
                    <input type="checkbox" class="ev-action-check ev-action-check--todo" id="task-appendix" 
                        onchange="toggleTaskComplete(this, 'åˆ¥ç´™ã®ç¨®é¡', 'ç”³ç«‹æ›¸ç¨®é¡ã«å¿œã˜ã¦ãƒ†ãƒ³ãƒ—ãƒ¬ã‹ã‚‰åˆ¤å®š')" 
                        style="appearance:none;-webkit-appearance:none">
                    <div style="flex:1">
                        <div class="ev-action-name">åˆ¥ç´™ã®ç¨®é¡ <a href="lnmanual.html#beppyou" class="ev-how-to-link" target="_blank" onclick="logAction('button_clicked', {label: 'é›†ã‚æ–¹: åˆ¥ç´™ã®ç¨®é¡'})">é›†ã‚æ–¹</a></div>
                        <div class="ev-action-desc">ç”³ç«‹æ›¸ç¨®é¡ã«å¿œã˜ã¦ãƒ†ãƒ³ãƒ—ãƒ¬ã‹ã‚‰åˆ¤å®šã€‚è¦ç¢ºèª</div>
                    </div>
                </div>
                <span class="ev-action-badge ev-badge-semi">åŠè‡ªå‹•</span>
            </div>

            <!-- å®Œäº†æ¸ˆã¿ãƒˆã‚°ãƒ« -->
            <div class="ev-done-toggle" onclick="this.nextElementSibling.classList.toggle('open'); this.querySelector('.ev-arrow').textContent = this.nextElementSibling.classList.contains('open') ? 'â–²' : 'â–¼';">
                <span class="ev-arrow">â–¼</span> å®Œäº†æ¸ˆã¿ï¼ˆ5ä»¶ï¼‰
            </div>
            <div class="ev-done-list">
                <div class="ev-action-item">
                    <div class="ev-action-left">
                        <div class="ev-action-check ev-action-check--done">âœ“</div>
                        <div>
                            <div class="ev-action-name" style="color:var(--text-muted)">ç”²å·è¨¼PDF (pl)</div>
                            <div class="ev-action-desc">loã‹ã‚‰è‡ªå‹•ç”Ÿæˆãƒ»Driveé€£æºæ¸ˆã¿</div>
                        </div>
                    </div>
                    <span class="ev-action-badge ev-badge-auto">è‡ªå‹•</span>
                </div>
                <div class="ev-action-item">
                    <div class="ev-action-left">
                        <div class="ev-action-check ev-action-check--done">âœ“</div>
                        <div>
                            <div class="ev-action-name" style="color:var(--text-muted)">IPNä¸€è¦§ï¼ˆåˆ¥ç´™2ç”¨ï¼‰</div>
                            <div class="ev-action-desc">LNSæ¡ç•ªæ¸ˆã¿ãƒ»CSVå‡ºåŠ›è‡ªå‹•</div>
                        </div>
                    </div>
                    <span class="ev-action-badge ev-badge-auto">è‡ªå‹•</span>
                </div>
                <div class="ev-action-item">
                    <div class="ev-action-left">
                        <div class="ev-action-check ev-action-check--done">âœ“</div>
                        <div>
                            <div class="ev-action-name" style="color:var(--text-muted)">åŒä¸€ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆç”²3ã€œ9, ç”²12ï¼‰</div>
                            <div class="ev-action-desc">æŠ€è¡“èª¬æ˜æ›¸ãƒ»é™³è¿°æ›¸ãƒ»å ±å‘Šæ›¸ã€‚å…¨æ¡ˆä»¶å…±é€š</div>
                        </div>
                    </div>
                    <span class="ev-action-badge ev-badge-auto">è‡ªå‹•</span>
                </div>
                <div class="ev-action-item">
                    <div class="ev-action-left">
                        <div class="ev-action-check ev-action-check--done">âœ“</div>
                        <div>
                            <div class="ev-action-name" style="color:var(--text-muted)">KKï¼ˆç”²10ãƒ‡ãƒ¼ã‚¿ï¼‰</div>
                            <div class="ev-action-desc">DBè¨˜éŒ²å°åˆ·æ›¸é¢ã€‚å–å¾—æ¸ˆã¿</div>
                        </div>
                    </div>
                    <span class="ev-action-badge ev-badge-manual">æ‰‹å‹•</span>
                </div>
                <div class="ev-action-item">
                    <div class="ev-action-left">
                        <div class="ev-action-check ev-action-check--done">âœ“</div>
                        <div>
                            <div class="ev-action-name" style="color:var(--text-muted)">Google Drive</div>
                            <div class="ev-action-desc">loãƒ»plãƒ»CSVè‡ªå‹•é€£æºæ¸ˆã¿</div>
                        </div>
                    </div>
                    <span class="ev-action-badge ev-badge-auto">è‡ªå‹•</span>
                </div>
            </div>
        </div>

        <!-- â•â• C: IPNè¨¼æ‹ ä¸€è¦§ï¼ˆCWã‚°ãƒ«ãƒ¼ãƒ—ãƒ»æŠ˜ã‚ŠãŸãŸã¿ï¼‰ â•â• -->
        <div style="margin-bottom:12px">
            <div style="display:flex;align-items:center;justify-content:space-between;padding:0 4px;margin-bottom:10px">
                <div style="font-size:14px;font-weight:700;color:var(--text-primary)">LNSå€‹åˆ¥è¨¼æ‹ </div>
                <div style="display:flex;gap:12px;font-size:10px;font-weight:600">
                    <span style="color:#7e22ce">ç”²10: 47/51 (92%)</span>
                    <span style="color:#1d4ed8">ç”²11: 38/51 (75%)</span>
                    <span style="color:#b91c1c">ä¸è¶³: 8, 22, 35, 41</span>
                </div>
            </div>

            <!-- CW Group 1 -->
            <div class="ev-cw-section">
                <div class="ev-cw-head" onclick="toggleEvCw(this)">
                    <div class="ev-cw-left">
                        <span class="ev-cw-name" style="color:#1d4ed8">CW6042 AARM208</span>
                        <span class="ev-cw-count-badge" style="background:#eff6ff;color:#1d4ed8">4ä»¶</span>
                    </div>
                    <div style="display:flex;align-items:center">
                        <div class="ev-cw-stats">
                            <span style="color:#7e22ce">KK 4/4 âœ“</span>
                            <span style="color:#1d4ed8">PL 3/4</span>
                        </div>
                        <span class="ev-cw-arrow">â–¼</span>
                    </div>
                </div>
                <div class="ev-cw-body">
                    <table>
                        <thead><tr>
                            <th style="width:36px">æç•ª</th>
                            <th style="width:65px">IPN</th>
                            <th>IP:PORT</th>
                            <th style="width:120px">ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—</th>
                            <th style="width:50px;color:#7e22ce">ç”²10</th>
                            <th style="width:50px;color:#1d4ed8">ç”²11</th>
                        </tr></thead>
                        <tbody>
                            <tr>
                                <td style="color:var(--text-muted)">1</td>
                                <td><a href="#" onclick="openIPN('07307Q');return false" class="ipn-link">07307Q</a></td>
                                <td style="font-family:monospace;font-size:10px;color:var(--text-muted)">126.85.167.172:22409</td>
                                <td style="color:var(--text-muted)">2023/12/22 08:13</td>
                                <td><span class="badge badge-green">ã‚ã‚Š</span></td>
                                <td><span class="badge badge-green">ã‚ã‚Š</span></td>
                            </tr>
                            <tr class="ev-missing-row">
                                <td style="color:var(--text-muted)">2</td>
                                <td><a href="#" onclick="openIPN('07307T');return false" class="ipn-link">07307T</a></td>
                                <td style="font-family:monospace;font-size:10px;color:var(--text-muted)">60.113.41.20:64870</td>
                                <td style="color:var(--text-muted)">2023/12/22 09:21</td>
                                <td><span class="badge badge-green">ã‚ã‚Š</span></td>
                                <td><span class="badge" style="background:#fef2f2;color:#b91c1c;border-color:#fecaca">ãªã—</span></td>
                            </tr>
                            <tr>
                                <td style="color:var(--text-muted)">3</td>
                                <td><a href="#" onclick="openIPN('07307U');return false" class="ipn-link">07307U</a></td>
                                <td style="font-family:monospace;font-size:10px;color:var(--text-muted)">60.111.183.177:15000</td>
                                <td style="color:var(--text-muted)">2023/12/22 09:56</td>
                                <td><span class="badge badge-green">ã‚ã‚Š</span></td>
                                <td><span class="badge badge-green">ã‚ã‚Š</span></td>
                            </tr>
                            <tr>
                                <td style="color:var(--text-muted)">4</td>
                                <td><a href="#" onclick="openIPN('07307V');return false" class="ipn-link">07307V</a></td>
                                <td style="font-family:monospace;font-size:10px;color:var(--text-muted)">60.113.41.20:52341</td>
                                <td style="color:var(--text-muted)">2023/12/22 10:02</td>
                                <td><span class="badge badge-green">ã‚ã‚Š</span></td>
                                <td><span class="badge badge-green">ã‚ã‚Š</span></td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="ev-cw-footer">
                        <span style="color:#7e22ce;font-weight:700">ç”²10: 4/4 å®Œäº†</span>
                        <span style="color:#1d4ed8;font-weight:700">ç”²11: 3/4</span>
                        <span style="color:#b91c1c">PLãªã—: æç•ª2</span>
                    </div>
                </div>
            </div>

            <!-- CW Group 2 -->
            <div class="ev-cw-section">
                <div class="ev-cw-head" onclick="toggleEvCw(this)">
                    <div class="ev-cw-left">
                        <span class="ev-cw-name" style="color:#7e22ce">CW5198 AARM115</span>
                        <span class="ev-cw-count-badge" style="background:#faf5ff;color:#7e22ce">3ä»¶</span>
                    </div>
                    <div style="display:flex;align-items:center">
                        <div class="ev-cw-stats">
                            <span style="color:#7e22ce">KK 2/3</span>
                            <span style="color:#1d4ed8">PL 2/3</span>
                        </div>
                        <span class="ev-cw-arrow">â–¼</span>
                    </div>
                </div>
                <div class="ev-cw-body">
                    <table>
                        <thead><tr>
                            <th style="width:36px">æç•ª</th>
                            <th style="width:65px">IPN</th>
                            <th>IP:PORT</th>
                            <th style="width:120px">ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—</th>
                            <th style="width:50px;color:#7e22ce">ç”²10</th>
                            <th style="width:50px;color:#1d4ed8">ç”²11</th>
                        </tr></thead>
                        <tbody>
                            <tr>
                                <td style="color:var(--text-muted)">5</td>
                                <td><a href="#" onclick="openIPN('07308A');return false" class="ipn-link">07308A</a></td>
                                <td style="font-family:monospace;font-size:10px;color:var(--text-muted)">203.140.81.30:44120</td>
                                <td style="color:var(--text-muted)">2023/12/22 11:05</td>
                                <td><span class="badge badge-green">ã‚ã‚Š</span></td>
                                <td><span class="badge badge-green">ã‚ã‚Š</span></td>
                            </tr>
                            <tr class="ev-missing-row">
                                <td style="color:var(--text-muted)">6</td>
                                <td><a href="#" onclick="openIPN('07308B');return false" class="ipn-link">07308B</a></td>
                                <td style="font-family:monospace;font-size:10px;color:var(--text-muted)">118.241.68.95:19832</td>
                                <td style="color:var(--text-muted)">2023/12/22 12:30</td>
                                <td><span class="badge" style="background:#fef2f2;color:#b91c1c;border-color:#fecaca">ãªã—</span></td>
                                <td><span class="badge" style="background:#fef2f2;color:#b91c1c;border-color:#fecaca">ãªã—</span></td>
                            </tr>
                            <tr>
                                <td style="color:var(--text-muted)">7</td>
                                <td><a href="#" onclick="openIPN('07308C');return false" class="ipn-link">07308C</a></td>
                                <td style="font-family:monospace;font-size:10px;color:var(--text-muted)">153.195.220.43:8801</td>
                                <td style="color:var(--text-muted)">2023/12/22 14:18</td>
                                <td><span class="badge badge-green">ã‚ã‚Š</span></td>
                                <td><span class="badge badge-green">ã‚ã‚Š</span></td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="ev-cw-footer">
                        <span style="color:#7e22ce;font-weight:700">ç”²10: 2/3</span>
                        <span style="color:#1d4ed8;font-weight:700">ç”²11: 2/3</span>
                        <span style="color:#b91c1c">ãªã—: æç•ª6</span>
                    </div>
                </div>
            </div>

            <!-- CW Group 3 -->
            <div class="ev-cw-section">
                <div class="ev-cw-head" onclick="toggleEvCw(this)">
                    <div class="ev-cw-left">
                        <span class="ev-cw-name" style="color:#b45309">CW7821 AARM330</span>
                        <span class="ev-cw-count-badge" style="background:#fffbeb;color:#b45309">2ä»¶</span>
                    </div>
                    <div style="display:flex;align-items:center">
                        <div class="ev-cw-stats">
                            <span style="color:#7e22ce">KK 1/2</span>
                            <span style="color:#1d4ed8">PL 2/2 âœ“</span>
                        </div>
                        <span class="ev-cw-arrow">â–¼</span>
                    </div>
                </div>
                <div class="ev-cw-body">
                    <table>
                        <thead><tr>
                            <th style="width:36px">æç•ª</th>
                            <th style="width:65px">IPN</th>
                            <th>IP:PORT</th>
                            <th style="width:120px">ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—</th>
                            <th style="width:50px;color:#7e22ce">ç”²10</th>
                            <th style="width:50px;color:#1d4ed8">ç”²11</th>
                        </tr></thead>
                        <tbody>
                            <tr>
                                <td style="color:var(--text-muted)">8</td>
                                <td><a href="#" onclick="openIPN('07309X');return false" class="ipn-link">07309X</a></td>
                                <td style="font-family:monospace;font-size:10px;color:var(--text-muted)">210.139.42.17:55210</td>
                                <td style="color:var(--text-muted)">2023/12/23 09:41</td>
                                <td><span class="badge badge-green">ã‚ã‚Š</span></td>
                                <td><span class="badge badge-green">ã‚ã‚Š</span></td>
                            </tr>
                            <tr class="ev-missing-row">
                                <td style="color:var(--text-muted)">9</td>
                                <td><a href="#" onclick="openIPN('07309Y');return false" class="ipn-link">07309Y</a></td>
                                <td style="font-family:monospace;font-size:10px;color:var(--text-muted)">180.47.113.88:37450</td>
                                <td style="color:var(--text-muted)">2023/12/23 10:15</td>
                                <td><span class="badge" style="background:#fef2f2;color:#b91c1c;border-color:#fecaca">ãªã—</span></td>
                                <td><span class="badge badge-green">ã‚ã‚Š</span></td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="ev-cw-footer">
                        <span style="color:#7e22ce;font-weight:700">ç”²10: 1/2</span>
                        <span style="color:#1d4ed8;font-weight:700">ç”²11: 2/2 å®Œäº†</span>
                        <span style="color:#b91c1c">KKãªã—: æç•ª9</span>
                    </div>
                </div>
            </div>

            <p style="font-size:10px;text-align:center;color:var(--text-muted);padding:4px 0">ä»– 154ä»¶ã®IPNã¯çœç•¥è¡¨ç¤º</p>
        </div>

    </div><!-- /tabContent-manage -->


</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• ç”³ç«‹æ›¸è¡¨ç¤ºãƒšãƒ¼ã‚¸ â•â•â•â•â•â•â•â•â•â•â• -->
<div id="applicationViewContainer" style="display: none;" class="max-w-[1400px] mx-auto px-4 py-6">
    <div class="glass-card p-6">
        <div class="flex gap-3 mb-6 flex-wrap items-center">
            <button onclick="goBack()" class="btn btn-primary">â† æˆ»ã‚‹<span class="element-id" title="è¦ç´ ID: M-11">M-11</span></button>
            <button id="toggleEditBtn" onclick="toggleEditMode()" class="btn" style="background:#10b981;color:white;border:1px solid #059669">
                <span id="editBtnIcon">âœï¸</span>
                <span id="editBtnText">ç·¨é›†ãƒ¢ãƒ¼ãƒ‰</span><span class="element-id" style="background:#fff;color:#10b981" title="è¦ç´ ID: M-12">M-12</span>
            </button>
            <button id="saveContentBtn" onclick="saveEditedContent()" class="btn" style="background:#3b82f6;color:white;border:1px solid#2563eb;display:none">
                ğŸ’¾ ä¿å­˜<span class="element-id" style="background:#fff;color:#3b82f6" title="è¦ç´ ID: M-13">M-13</span>
            </button>
            <button onclick="window.print()" class="btn btn-ghost">ğŸ“„ PDFå‡ºåŠ›<span class="element-id" title="è¦ç´ ID: M-14">M-14</span></button>
            <button onclick="downloadDocument()" class="btn btn-ghost">ğŸ’¾ ãƒ†ã‚­ã‚¹ãƒˆ<span class="element-id" title="è¦ç´ ID: M-15">M-15</span></button>
            <button onclick="exportWord()" class="btn btn-ghost">ğŸ“˜ Wordå‡ºåŠ›<span class="element-id" title="è¦ç´ ID: M-16">M-16</span></button>
            <span id="editModeIndicator" style="display:none;padding:6px 12px;background:#fef3c7;color:#92400e;font-size:12px;font-weight:600;border-radius:6px;border:1px solid #fcd34d">ç·¨é›†ä¸­</span>
        </div>
        
        <!-- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º -->
        <div id="applicationViewContent" style="background: #faf8f5; padding: 24px; border-radius: 14px; overflow-auto; max-height: 80vh; border: 1px solid rgba(0,0,0,0.08); font-family: 'Hiragino Mincho ProN', 'Yu Mincho', serif; color: #1e293b;"></div>
        
        <!-- ç·¨é›†ç”¨ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ -->
        <textarea id="applicationEditArea" 
            style="display:none;width:100%;min-height:80vh;background:#ffffff;padding:24px;border-radius:14px;border:2px solid #3b82f6;font-family:'Hiragino Mincho ProN','Yu Mincho',serif;color:#1e293b;font-size:14px;line-height:1.8;resize:vertical"
            placeholder="ã“ã“ã«ç”³ç«‹æ›¸ã®å†…å®¹ã‚’å…¥åŠ›ã¾ãŸã¯ç·¨é›†ã—ã¦ãã ã•ã„..."></textarea>
    </div>
</div>

<script>
    let currentApplicationTitle = '';
    let currentApplicationContent = '';
    let currentAppealType = '';
    let currentCopyrightPattern = '';
    
    // ===== é¸æŠã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç† =====
    let selectedTemplates = {
        copyright: null,  // è‘—ä½œæ¨©è¨¼æ˜ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
        lawyer: null,     // å¼è­·å£«ãƒ‘ã‚¿ãƒ¼ãƒ³
        evidence: []      // è¨¼æ‹ è¨˜è¼‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰
    };
    
    // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠãƒˆã‚°ãƒ«é–¢æ•°
    function toggleTemplateSelect(checkbox, templateKey, templateName) {
        const card = checkbox.closest('.tpl-card');
        const textEl = card.querySelector('.tpl-text');
        const templateText = textEl ? textEl.textContent : '';
        const category = card.closest('section').querySelector('.section-head h3').textContent;
        
        if (checkbox.checked) {
            // é¸æŠæ™‚
            card.classList.add('selected');
            
            // ã‚«ãƒ†ã‚´ãƒªã«å¿œã˜ã¦ä¿å­˜
            if (category.includes('æ¨©åˆ©è€…ã®å•é¡Œ')) {
                // æ¨©åˆ©è€…ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯å˜ä¸€é¸æŠ
                // ä»–ã®ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã™
                document.querySelectorAll('.tpl-card[data-tpl-category="copyright"] .tpl-checkbox').forEach(cb => {
                    if (cb !== checkbox && cb.checked) {
                        cb.checked = false;
                        cb.closest('.tpl-card').classList.remove('selected');
                    }
                });
                selectedTemplates.copyright = {
                    key: templateKey,
                    name: templateName,
                    text: templateText
                };
            } else if (category.includes('å¼è­·å£«ã®å•é¡Œ')) {
                // å¼è­·å£«ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯å˜ä¸€é¸æŠ
                document.querySelectorAll('.tpl-card[data-tpl-category="lawyer"] .tpl-checkbox').forEach(cb => {
                    if (cb !== checkbox && cb.checked) {
                        cb.checked = false;
                        cb.closest('.tpl-card').classList.remove('selected');
                    }
                });
                selectedTemplates.lawyer = {
                    key: templateKey,
                    name: templateName,
                    text: templateText
                };
            } else if (category.includes('è¨¼æ‹ è¨˜è¼‰')) {
                // è¨¼æ‹ è¨˜è¼‰ã¯è¤‡æ•°é¸æŠå¯
                selectedTemplates.evidence.push({
                    key: templateKey,
                    name: templateName,
                    text: templateText
                });
            }
            
            // ãƒ­ã‚°è¨˜éŒ²
            logAction('template_selected', {
                label: templateName,
                templateKey: templateKey,
                category: category
            });
        } else {
            // é¸æŠè§£é™¤æ™‚
            card.classList.remove('selected');
            
            if (category.includes('æ¨©åˆ©è€…ã®å•é¡Œ')) {
                selectedTemplates.copyright = null;
            } else if (category.includes('å¼è­·å£«ã®å•é¡Œ')) {
                selectedTemplates.lawyer = null;
            } else if (category.includes('è¨¼æ‹ è¨˜è¼‰')) {
                selectedTemplates.evidence = selectedTemplates.evidence.filter(t => t.key !== templateKey);
            }
            
            // ãƒ­ã‚°è¨˜éŒ²
            logAction('template_deselected', {
                label: templateName,
                templateKey: templateKey,
                category: category
            });
        }
        
        // é¸æŠçŠ¶æ…‹ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
        saveTemplateSelections();
        
        console.log('é¸æŠä¸­ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ:', selectedTemplates);
    }
    
    // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠçŠ¶æ…‹ã‚’ä¿å­˜
    function saveTemplateSelections() {
        try {
            localStorage.setItem('lnmake_selected_templates', JSON.stringify(selectedTemplates));
        } catch (e) {
            console.error('ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠçŠ¶æ…‹ã®ä¿å­˜ã«å¤±æ•—:', e);
        }
    }
    
    // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠçŠ¶æ…‹ã‚’èª­ã¿è¾¼ã¿
    function loadTemplateSelections() {
        try {
            const saved = localStorage.getItem('lnmake_selected_templates');
            if (saved) {
                selectedTemplates = JSON.parse(saved);
                
                // UIã«åæ˜ 
                document.querySelectorAll('.tpl-checkbox').forEach(checkbox => {
                    const key = checkbox.dataset.templateKey;
                    const card = checkbox.closest('.tpl-card');
                    const category = card.dataset.tplCategory;
                    
                    if (category === 'copyright' && selectedTemplates.copyright && selectedTemplates.copyright.key === key) {
                        checkbox.checked = true;
                        card.classList.add('selected');
                    } else if (category === 'lawyer' && selectedTemplates.lawyer && selectedTemplates.lawyer.key === key) {
                        checkbox.checked = true;
                        card.classList.add('selected');
                    } else if (category === 'evidence' && selectedTemplates.evidence.some(t => t.key === key)) {
                        checkbox.checked = true;
                        card.classList.add('selected');
                    }
                });
                
                console.log('âœ“ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠçŠ¶æ…‹ã‚’å¾©å…ƒã—ã¾ã—ãŸ');
            }
        } catch (e) {
            console.error('ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠçŠ¶æ…‹ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—:', e);
        }
    }
    
    // ===== ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ­ã‚°æ©Ÿèƒ½ =====
    // ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ï¼ˆå®Ÿéš›ã¯ãƒ­ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰å–å¾—ï¼‰
    const currentUser = {
        id: 'toda_izumi',
        name: 'æˆ¸ç”° æ³‰',
        role: 'lawyer',
        loginTime: new Date().toISOString()
    };
    
    // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ­ã‚°ã‚’ä¿å­˜ã™ã‚‹é…åˆ—
    let actionLogs = [];
    
    // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ­ã‚°ã‚’è¨˜éŒ²ã™ã‚‹é–¢æ•°
    function logAction(actionType, actionData) {
        const logEntry = {
            timestamp: new Date().toISOString(),
            userId: currentUser.id,
            userName: currentUser.name,
            userRole: currentUser.role,
            actionType: actionType,
            actionData: actionData,
            pageUrl: window.location.href,
            caseId: '7K14488' // ç¾åœ¨ã®ã‚±ãƒ¼ã‚¹IDï¼ˆå®Ÿéš›ã¯ãƒšãƒ¼ã‚¸ã‹ã‚‰å–å¾—ï¼‰
        };
        
        actionLogs.push(logEntry);
        
        // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›
        console.log('âœ“ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¨˜éŒ²:', logEntry);
        
        // é€šçŸ¥ã‚’è¡¨ç¤º
        showActionNotification(actionType, actionData);
        
        // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ã‚‚ä¿å­˜ï¼ˆå¾Œã§DBé€ä¿¡ç”¨ï¼‰
        saveLogsToLocalStorage();
        
        // ãƒ­ã‚°ã‚«ã‚¦ãƒ³ãƒˆãƒãƒƒã‚¸ã‚’æ›´æ–°
        updateLogCountBadge();
        
        return logEntry;
    }
    
    // ãƒ­ã‚°ã‚«ã‚¦ãƒ³ãƒˆãƒãƒƒã‚¸ã‚’æ›´æ–°
    function updateLogCountBadge() {
        const badge = document.getElementById('logCountBadge');
        if (badge) {
            badge.textContent = actionLogs.length;
            // 100ä»¶ã‚’è¶…ãˆãŸã‚‰èµ¤è‰²ã«
            if (actionLogs.length > 100) {
                badge.style.background = '#ef4444';
            } else if (actionLogs.length > 50) {
                badge.style.background = '#f59e0b';
            } else {
                badge.style.background = '#3b82f6';
            }
        }
    }
    
    // ã‚¿ã‚¹ã‚¯å®Œäº†ãƒˆã‚°ãƒ«é–¢æ•°
    function toggleTaskComplete(checkbox, taskName, taskDesc) {
        const isChecked = checkbox.checked;
        const taskItem = checkbox.closest('.ev-action-item');
        
        // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’æ›´æ–°
        if (isChecked) {
            checkbox.classList.remove('ev-action-check--todo');
            checkbox.classList.add('ev-action-check--done');
            checkbox.style.color = '#16a34a';
            checkbox.innerHTML = 'âœ“';
            
            // ã‚¿ã‚¹ã‚¯åã‚’ã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆ
            const nameEl = taskItem.querySelector('.ev-action-name');
            if (nameEl) {
                nameEl.style.color = 'var(--text-muted)';
            }
        } else {
            checkbox.classList.remove('ev-action-check--done');
            checkbox.classList.add('ev-action-check--todo');
            checkbox.style.color = 'transparent';
            checkbox.innerHTML = '';
            
            // ã‚¿ã‚¹ã‚¯åã®è‰²ã‚’æˆ»ã™
            const nameEl = taskItem.querySelector('.ev-action-name');
            if (nameEl) {
                nameEl.style.color = '';
            }
        }
        
        // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ­ã‚°ã«è¨˜éŒ²
        logAction(
            isChecked ? 'task_completed' : 'task_uncompleted',
            {
                label: taskName,
                taskName: taskName,
                taskDesc: taskDesc,
                taskId: checkbox.id,
                completed: isChecked
            }
        );
        
        // ã‚¿ã‚¹ã‚¯çŠ¶æ…‹ã‚’ä¿å­˜ï¼ˆæ›¸é¡æŠŠæ¡ã¨åŒæœŸï¼‰
        saveTaskStates();
        
        // ã‚«ã‚¦ãƒ³ãƒˆã‚’æ›´æ–°
        updateTaskCount();
    }
    
    // ç¾åœ¨ã®LNç•ªå·ã‚’å–å¾—
    function getCurrentLNNumber() {
        const lnEl = document.getElementById('current-ln-number');
        return lnEl ? lnEl.textContent.trim() : '7K14488';
    }
    
    // ã‚¿ã‚¹ã‚¯çŠ¶æ…‹ã‚’ä¿å­˜ï¼ˆLNç•ªå·ã”ã¨ï¼‰
    function saveTaskStates() {
        const currentLN = getCurrentLNNumber();
        const taskStates = {};
        document.querySelectorAll('.ev-action-section .ev-action-check').forEach(checkbox => {
            if (checkbox.id) {
                taskStates[checkbox.id] = checkbox.checked;
            }
        });
        try {
            // LNç•ªå·ã”ã¨ã«ä¿å­˜
            const storageKey = `ln_checklist_${currentLN}`;
            localStorage.setItem(storageKey, JSON.stringify(taskStates));
            
            // å…¨LNã®ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã‚’çµ±åˆã—ã¦ä¿å­˜ï¼ˆlnportalç”¨ï¼‰
            const allLNData = JSON.parse(localStorage.getItem('all_ln_checklists') || '{}');
            allLNData[currentLN] = {
                inin: taskStates['task-inin'] || false,
                cert: taskStates['task-cert'] || false,
                box: taskStates['task-box'] || false,
                usb: taskStates['task-usb'] || false,
                appendix: taskStates['task-appendix'] || false,
                lastUpdated: new Date().toISOString()
            };
            localStorage.setItem('all_ln_checklists', JSON.stringify(allLNData));
            
            // æ›¸é¡æŠŠæ¡ç”»é¢ç”¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚‚æ›´æ–°ï¼ˆlnportalã¨ã®å®Œå…¨åŒæœŸï¼‰
            const docStatuses = JSON.parse(localStorage.getItem('ln_doc_statuses') || '{}');
            if (!docStatuses[currentLN]) {
                docStatuses[currentLN] = {};
            }
            docStatuses[currentLN].p = taskStates['task-inin'] || false;      // å§”ä»»çŠ¶
            docStatuses[currentLN].cert = taskStates['task-cert'] || false;   // ä»£è¡¨è€…äº‹é …è¨¼æ˜æ›¸
            docStatuses[currentLN].usb = taskStates['task-usb'] || false;     // è¨¼æ‹ ç”¨USB
            docStatuses[currentLN].box = taskStates['task-box'] || false;     // æ›¸é¡ãƒœãƒƒã‚¯ã‚¹
            localStorage.setItem('ln_doc_statuses', JSON.stringify(docStatuses));
            
            console.log(`âœ“ LN ${currentLN} ã®ã‚¿ã‚¹ã‚¯çŠ¶æ…‹ã‚’ä¿å­˜ã—ã¾ã—ãŸï¼ˆæ›¸é¡æŠŠæ¡ã¨åŒæœŸï¼‰`);
        } catch (e) {
            console.error('ã‚¿ã‚¹ã‚¯çŠ¶æ…‹ã®ä¿å­˜ã«å¤±æ•—:', e);
        }
    }
    
    // ã‚¿ã‚¹ã‚¯çŠ¶æ…‹ã‚’èª­ã¿è¾¼ã¿ï¼ˆLNç•ªå·ã”ã¨ï¼‰
    function loadTaskStates() {
        try {
            const currentLN = getCurrentLNNumber();
            const storageKey = `ln_checklist_${currentLN}`;
            let taskStates = {};
            
            // ã¾ãšå€‹åˆ¥ä¿å­˜ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
            const saved = localStorage.getItem(storageKey);
            if (saved) {
                taskStates = JSON.parse(saved);
            }
            
            // æ›¸é¡æŠŠæ¡ã§å¤‰æ›´ã•ã‚ŒãŸå€¤ã‚’ä¸Šæ›¸ãï¼ˆæœ€æ–°ã®çŠ¶æ…‹ã‚’åæ˜ ï¼‰
            const docStatuses = JSON.parse(localStorage.getItem('ln_doc_statuses') || '{}');
            if (docStatuses[currentLN]) {
                if (docStatuses[currentLN].p !== undefined) {
                    taskStates['task-inin'] = docStatuses[currentLN].p;
                }
                if (docStatuses[currentLN].cert !== undefined) {
                    taskStates['task-cert'] = docStatuses[currentLN].cert;
                }
                if (docStatuses[currentLN].usb !== undefined) {
                    taskStates['task-usb'] = docStatuses[currentLN].usb;
                }
                if (docStatuses[currentLN].box !== undefined) {
                    taskStates['task-box'] = docStatuses[currentLN].box;
                }
            }
            
            // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã«åæ˜ 
            Object.keys(taskStates).forEach(taskId => {
                const checkbox = document.getElementById(taskId);
                if (checkbox) {
                    checkbox.checked = taskStates[taskId];
                    // ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã«å¿œã˜ã¦ã‚¹ã‚¿ã‚¤ãƒ«ã‚’æ›´æ–°
                    if (checkbox.checked) {
                        checkbox.classList.remove('ev-action-check--todo');
                        checkbox.classList.add('ev-action-check--done');
                        checkbox.style.color = '#16a34a';
                        checkbox.innerHTML = 'âœ“';
                        
                        const taskItem = checkbox.closest('.ev-action-item');
                        const nameEl = taskItem ? taskItem.querySelector('.ev-action-name') : null;
                        if (nameEl) {
                            nameEl.style.color = 'var(--text-muted)';
                        }
                    }
                }
            });
            
            console.log(`âœ“ LN ${currentLN} ã®ã‚¿ã‚¹ã‚¯çŠ¶æ…‹ã‚’å¾©å…ƒã—ã¾ã—ãŸï¼ˆæ›¸é¡æŠŠæ¡ã¨åŒæœŸï¼‰`);
        } catch (e) {
            console.error('ã‚¿ã‚¹ã‚¯çŠ¶æ…‹ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—:', e);
        }
    }
    
    // ã‚¿ã‚¹ã‚¯ã‚«ã‚¦ãƒ³ãƒˆã‚’æ›´æ–°
    function updateTaskCount() {
        const todoCheckboxes = document.querySelectorAll('.ev-action-section .ev-action-check');
        const completedCount = Array.from(todoCheckboxes).filter(cb => cb.checked).length;
        const totalCount = todoCheckboxes.length;
        const remainingCount = totalCount - completedCount;
        
        // è¦å¯¾å¿œã‚«ã‚¦ãƒ³ãƒˆãƒãƒƒã‚¸ã‚’æ›´æ–°
        const countBadge = document.querySelector('.ev-action-head .ev-action-count');
        if (countBadge && remainingCount >= 0) {
            countBadge.textContent = `${remainingCount}ä»¶`;
            
            // å…¨ã¦å®Œäº†ã—ãŸã‚‰è‰²ã‚’å¤‰æ›´
            if (remainingCount === 0) {
                const header = document.querySelector('.ev-action-head');
                if (header) {
                    header.style.color = '#16a34a';
                    header.style.background = '#f0fdf4';
                    countBadge.style.background = '#bbf7d0';
                    countBadge.style.color = '#16a34a';
                }
            } else {
                const header = document.querySelector('.ev-action-head');
                if (header) {
                    header.style.color = '#b91c1c';
                    header.style.background = '#fef2f2';
                    countBadge.style.background = '#fecaca';
                    countBadge.style.color = '#b91c1c';
                }
            }
        }
        
        // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒªãƒ³ã‚°ã‚’æ›´æ–°
        updateProgressRing();
        
        // ã‚¿ã‚¹ã‚¯çŠ¶æ…‹ã‚’ä¿å­˜
        saveTaskStates();
    }
    
    // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒªãƒ³ã‚°ã‚’æ›´æ–°
    function updateProgressRing() {
        const allCheckboxes = document.querySelectorAll('.ev-action-section .ev-action-check');
        const completedCount = Array.from(allCheckboxes).filter(cb => cb.checked).length;
        const totalCount = allCheckboxes.length;
        const percentage = totalCount > 0 ? Math.round((completedCount / totalCount) * 100) : 0;
        
        // ãƒªãƒ³ã‚°ãƒ†ã‚­ã‚¹ãƒˆã‚’æ›´æ–°
        const ringText = document.querySelector('.ring-text');
        if (ringText) {
            ringText.textContent = `${percentage}%`;
        }
        
        // ãƒªãƒ³ã‚°ã®é€²æ—ã‚’æ›´æ–°ï¼ˆå††å‘¨ç‡ = 2Ï€r = 2 * 3.14159 * 24 â‰ˆ 150.8ï¼‰
        const ringFill = document.querySelector('.ring-fill');
        if (ringFill) {
            const circumference = 150.8;
            const offset = circumference - (circumference * percentage / 100);
            ringFill.setAttribute('stroke-dashoffset', offset);
        }
    }
    
    // é€šçŸ¥ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
    function showActionNotification(actionType, actionData) {
        const messages = {
            'checkbox_checked': `âœ“ ãƒã‚§ãƒƒã‚¯: ${actionData.label}`,
            'checkbox_unchecked': `â–¡ ãƒã‚§ãƒƒã‚¯è§£é™¤: ${actionData.label}`,
            'radio_selected': `â¦¿ é¸æŠ: ${actionData.label}`,
            'select_changed': `â–¼ å¤‰æ›´: ${actionData.label}`,
            'textarea_updated': `âœ å…¥åŠ›: ${actionData.label}`,
            'button_clicked': `â–¶ ã‚¯ãƒªãƒƒã‚¯: ${actionData.label}`,
            'application_created': `ğŸ“„ ç”³ç«‹æ›¸ä½œæˆå®Œäº†`,
            'evidence_generated': `ğŸ“‹ è¨¼æ‹ èª¬æ˜æ›¸ç”Ÿæˆå®Œäº†`,
            'template_copied': `ğŸ“‹ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚³ãƒ”ãƒ¼: ${actionData.templateName}`,
            'document_downloaded': `ğŸ’¾ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰: ${actionData.fileName}`,
            'tab_switched': `ğŸ”„ ã‚¿ãƒ–åˆ‡æ›¿: ${actionData.tabName}`,
            'task_completed': `âœ… å®Œäº†: ${actionData.taskName}`,
            'task_uncompleted': `â¬œ æœªå®Œäº†ã«å¤‰æ›´: ${actionData.taskName}`,
            'session_started': `ğŸš€ ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹`
        };
        
        const message = messages[actionType] || `æ“ä½œè¨˜éŒ²: ${actionType}`;
        
        // ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ã‚’ä½œæˆ
        const toast = document.createElement('div');
        toast.style.cssText = `
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: linear-gradient(135deg, #111827 0%, #1f2937 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 600;
            box-shadow: 0 8px 24px rgba(0,0,0,0.25);
            z-index: 10000;
            animation: slideInRight 0.3s ease-out;
            display: flex;
            align-items: center;
            gap: 10px;
            border: 1px solid rgba(255,255,255,0.1);
        `;
        toast.innerHTML = `
            <span style="font-size: 16px;">ğŸ“</span>
            <span>${message}</span>
        `;
        
        document.body.appendChild(toast);
        
        // 3ç§’å¾Œã«å‰Šé™¤
        setTimeout(() => {
            toast.style.animation = 'slideOutRight 0.3s ease-out';
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 300);
        }, 3000);
    }
    
    // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
    function saveLogsToLocalStorage() {
        try {
            localStorage.setItem('lnmake_action_logs', JSON.stringify(actionLogs));
            localStorage.setItem('lnmake_logs_last_updated', new Date().toISOString());
        } catch (e) {
            console.error('ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¸ã®ä¿å­˜ã«å¤±æ•—:', e);
        }
    }
    
    // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰èª­ã¿è¾¼ã¿
    function loadLogsFromLocalStorage() {
        try {
            const saved = localStorage.getItem('lnmake_action_logs');
            if (saved) {
                actionLogs = JSON.parse(saved);
                console.log(`âœ“ ${actionLogs.length}ä»¶ã®ãƒ­ã‚°ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ`);
                
                // æœ€çµ‚æ›´æ–°æ—¥æ™‚ã‚’è¡¨ç¤º
                const lastUpdated = localStorage.getItem('lnmake_logs_last_updated');
                if (lastUpdated) {
                    const date = new Date(lastUpdated);
                    console.log(`  æœ€çµ‚æ›´æ–°: ${date.toLocaleString('ja-JP')}`);
                }
            } else {
                console.log('âœ“ æ–°è¦ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹');
            }
        } catch (e) {
            console.error('ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—:', e);
            actionLogs = [];
        }
    }
    
    // ãƒ­ã‚°ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ˆCSVå½¢å¼ï¼‰
    function exportLogsAsCSV() {
        if (actionLogs.length === 0) {
            alert('ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ãƒ­ã‚°ãŒã‚ã‚Šã¾ã›ã‚“');
            return;
        }
        
        const headers = ['ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—', 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ID', 'ãƒ¦ãƒ¼ã‚¶ãƒ¼å', 'å½¹å‰²', 'ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç¨®åˆ¥', 'ã‚¢ã‚¯ã‚·ãƒ§ãƒ³è©³ç´°', 'ã‚±ãƒ¼ã‚¹ID'];
        const rows = actionLogs.map(log => [
            log.timestamp,
            log.userId,
            log.userName,
            log.userRole,
            log.actionType,
            JSON.stringify(log.actionData),
            log.caseId
        ]);
        
        const csvContent = [headers, ...rows]
            .map(row => row.map(cell => `"${cell}"`).join(','))
            .join('\n');
        
        const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
        const link = document.createElement('a');
        const url = URL.createObjectURL(blob);
        const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, -5);
        
        link.setAttribute('href', url);
        link.setAttribute('download', `action_logs_${timestamp}.csv`);
        link.style.display = 'none';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        
        console.log(`${actionLogs.length}ä»¶ã®ãƒ­ã‚°ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ`);
    }
    
    // ãƒ­ã‚°ã‚’JSONå½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ˆDBæŠ•å…¥ç”¨ï¼‰
    function exportLogsAsJSON() {
        if (actionLogs.length === 0) {
            alert('ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ãƒ­ã‚°ãŒã‚ã‚Šã¾ã›ã‚“');
            return;
        }
        
        const jsonContent = JSON.stringify({
            exportDate: new Date().toISOString(),
            user: currentUser,
            totalLogs: actionLogs.length,
            logs: actionLogs
        }, null, 2);
        
        const blob = new Blob([jsonContent], { type: 'application/json;charset=utf-8;' });
        const link = document.createElement('a');
        const url = URL.createObjectURL(blob);
        const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, -5);
        
        link.setAttribute('href', url);
        link.setAttribute('download', `action_logs_${timestamp}.json`);
        link.style.display = 'none';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        
        console.log(`${actionLogs.length}ä»¶ã®ãƒ­ã‚°ã‚’JSONå½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ`);
    }
    
    // ãƒ­ã‚°ãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼ã‚’è¡¨ç¤º
    function showLogViewer() {
        const modal = document.createElement('div');
        modal.style.cssText = 'position:fixed;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:9999;backdrop-filter:blur(8px);padding:20px';
        
        const logCount = actionLogs.length;
        const recentLogs = actionLogs.slice(-20).reverse(); // æœ€æ–°20ä»¶ã‚’è¡¨ç¤º
        
        modal.innerHTML = `
            <div style="background:#ffffff;border-radius:20px;max-width:900px;width:100%;max-height:90vh;overflow:hidden;box-shadow:0 24px 64px rgba(0,0,0,0.2);display:flex;flex-direction:column">
                <div style="padding:24px 28px;border-bottom:1px solid #e5e7eb;display:flex;justify-content:space-between;align-items:center">
                    <div>
                        <h3 style="font-size:18px;font-weight:800;margin:0 0 4px 0;color:#111827">ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ­ã‚°</h3>
                        <p style="font-size:12px;color:#6b7280;margin:0">ãƒ¦ãƒ¼ã‚¶ãƒ¼: ${currentUser.name} (${currentUser.id}) | ç·ä»¶æ•°: ${logCount}ä»¶</p>
                    </div>
                    <button onclick="this.closest('div').parentElement.remove()" 
                        style="background:none;border:none;cursor:pointer;font-size:24px;color:#9ca3af;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:8px;transition:all 0.2s"
                        onmouseover="this.style.background='#f3f4f6';this.style.color='#111827'" 
                        onmouseout="this.style.background='none';this.style.color='#9ca3af'">Ã—</button>
                </div>
                <div style="flex:1;overflow-y:auto;padding:20px 28px">
                    ${recentLogs.length === 0 ? 
                        '<p style="text-align:center;color:#9ca3af;padding:40px 0">è¨˜éŒ²ã•ã‚ŒãŸãƒ­ã‚°ãŒã‚ã‚Šã¾ã›ã‚“</p>' :
                        recentLogs.map((log, i) => {
                            const date = new Date(log.timestamp);
                            const timeStr = date.toLocaleString('ja-JP', { 
                                month: '2-digit', 
                                day: '2-digit', 
                                hour: '2-digit', 
                                minute: '2-digit',
                                second: '2-digit'
                            });
                            
                            const actionLabels = {
                                'checkbox_checked': 'âœ“ ãƒã‚§ãƒƒã‚¯',
                                'checkbox_unchecked': 'â–¡ è§£é™¤',
                                'radio_selected': 'â¦¿ é¸æŠ',
                                'select_changed': 'â–¼ å¤‰æ›´',
                                'textarea_updated': 'âœ å…¥åŠ›',
                                'button_clicked': 'â–¶ ã‚¯ãƒªãƒƒã‚¯',
                                'application_created': 'ğŸ“„ ç”³ç«‹æ›¸ä½œæˆ',
                                'evidence_generated': 'ğŸ“‹ è¨¼æ‹ èª¬æ˜æ›¸',
                                'template_copied': 'ğŸ“‹ ã‚³ãƒ”ãƒ¼',
                                'document_downloaded': 'ğŸ’¾ DL',
                                'tab_switched': 'ğŸ”„ ã‚¿ãƒ–'
                            };
                            
                            return `
                                <div style="padding:12px 16px;border-left:3px solid #3b82f6;background:#f8f9fb;border-radius:0 10px 10px 0;margin-bottom:10px;transition:all 0.2s;cursor:pointer"
                                    onmouseover="this.style.background='#eff6ff';this.style.borderColor='#2563eb'" 
                                    onmouseout="this.style.background='#f8f9fb';this.style.borderColor='#3b82f6'"
                                    onclick="alert('è©³ç´°:\\n' + JSON.stringify(${JSON.stringify(log)}, null, 2))">
                                    <div style="display:flex;justify-content:space-between;align-items:start;margin-bottom:4px">
                                        <span style="font-size:11px;font-weight:700;color:#3b82f6;font-family:monospace">${actionLabels[log.actionType] || log.actionType}</span>
                                        <span style="font-size:10px;color:#9ca3af;font-family:monospace">${timeStr}</span>
                                    </div>
                                    <div style="font-size:12px;color:#374151;font-weight:500">
                                        ${log.actionData.label || JSON.stringify(log.actionData).substring(0, 60)}
                                    </div>
                                    <div style="font-size:10px;color:#6b7280;margin-top:4px">
                                        Case: ${log.caseId} | User: ${log.userName}
                                    </div>
                                </div>
                            `;
                        }).join('')
                    }
                </div>
                <div style="padding:16px 28px;border-top:1px solid #e5e7eb;background:#f9fafb;display:flex;gap:10px;justify-content:space-between">
                    <div style="display:flex;gap:10px">
                        <button onclick="exportLogsAsJSON();showActionNotification('button_clicked', {label: 'JSONå‡ºåŠ›'})" 
                            style="background:#111827;color:#fff;border:none;padding:8px 16px;border-radius:8px;font-size:12px;font-weight:600;cursor:pointer;transition:all 0.2s"
                            onmouseover="this.style.background='#374151'" 
                            onmouseout="this.style.background='#111827'">
                            ğŸ“¦ JSONå‡ºåŠ›
                        </button>
                        <button onclick="exportLogsAsCSV();showActionNotification('button_clicked', {label: 'CSVå‡ºåŠ›'})" 
                            style="background:#fff;color:#374151;border:1px solid #e5e7eb;padding:8px 16px;border-radius:8px;font-size:12px;font-weight:600;cursor:pointer;transition:all 0.2s"
                            onmouseover="this.style.background='#f3f4f6';this.style.borderColor='#d1d5db'" 
                            onmouseout="this.style.background='#fff';this.style.borderColor='#e5e7eb'">
                            ğŸ“Š CSVå‡ºåŠ›
                        </button>
                    </div>
                    <button onclick="if(confirm('ã™ã¹ã¦ã®ãƒ­ã‚°ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')){actionLogs=[];saveLogsToLocalStorage();this.closest('div').parentElement.remove();alert('ãƒ­ã‚°ã‚’å‰Šé™¤ã—ã¾ã—ãŸ')}"
                        style="background:#ef4444;color:#fff;border:none;padding:8px 16px;border-radius:8px;font-size:12px;font-weight:600;cursor:pointer;transition:all 0.2s"
                        onmouseover="this.style.background='#dc2626'" 
                        onmouseout="this.style.background='#ef4444'">
                        ğŸ—‘ï¸ ãƒ­ã‚°ã‚¯ãƒªã‚¢
                    </button>
                </div>
            </div>
        `;
        
        document.body.appendChild(modal);
        modal.addEventListener('click', e => {
            if(e.target === modal) modal.remove();
        });
    }

    // Tab switching
    function switchTab(tab) {
        const contentCreate = document.getElementById('tabContent-create');
        const contentManage = document.getElementById('tabContent-manage');
        const tabCreate = document.getElementById('tab-create');
        const tabManage = document.getElementById('tab-manage');
        
        if (!contentCreate || !contentManage || !tabCreate || !tabManage) {
            console.error('Tab elements not found');
            return;
        }
        
        contentCreate.style.display = tab === 'create' ? 'block' : 'none';
        contentManage.style.display = tab === 'manage' ? 'block' : 'none';
        tabCreate.classList.toggle('main-tab--active', tab === 'create');
        tabManage.classList.toggle('main-tab--active', tab === 'manage');
        
        // ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
        window.scrollTo({ top: 0, behavior: 'smooth' });
        
        // ãƒ­ã‚°è¨˜éŒ²
        const tabNames = {
            'create': 'æ›¸é¡ä½œæˆ',
            'manage': 'è¨¼æ‹ ã‚’é›†ã‚ã‚‹'
        };
        logAction('tab_switched', {
            label: 'ã‚¿ãƒ–åˆ‡æ›¿',
            tabName: tabNames[tab] || tab
        });
    }

    // Evidence CW group toggle
    function toggleEvCw(headEl) {
        if (!headEl) {
            console.error('toggleEvCw: headEl is null');
            return;
        }
        
        const body = headEl.nextElementSibling;
        const arrow = headEl.querySelector('.ev-cw-arrow');
        
        if (!body) {
            console.error('toggleEvCw: body element not found');
            return;
        }
        
        const isOpen = body.classList.contains('open');
        
        // ãƒˆã‚°ãƒ«å®Ÿè¡Œ
        body.classList.toggle('open');
        
        // ã‚¢ãƒ­ãƒ¼ã®å‘ãã‚’å¤‰æ›´
        if (arrow) {
            arrow.style.transition = 'transform 0.2s ease';
            arrow.textContent = body.classList.contains('open') ? 'â–²' : 'â–¼';
            arrow.style.transform = body.classList.contains('open') ? 'rotate(180deg)' : 'rotate(0deg)';
        }
        
        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœ
        if (!isOpen) {
            body.style.maxHeight = body.scrollHeight + 'px';
            setTimeout(() => {
                body.style.maxHeight = 'none';
            }, 300);
        } else {
            body.style.maxHeight = body.scrollHeight + 'px';
            setTimeout(() => {
                body.style.maxHeight = '0';
            }, 10);
        }
    }

    // IPN click â†’ IPNDB mock
    function openIPN(ipnId) {
        if (!ipnId) {
            console.error('IPN IDãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“');
            return;
        }
        
        const modal = document.createElement('div');
        modal.style.cssText = 'position:fixed;inset:0;background:rgba(0,0,0,.3);display:flex;align-items:center;justify-content:center;z-index:9999;backdrop-filter:blur(8px);animation:fadeIn 0.2s ease-out';
        modal.innerHTML = `
            <div style="background:#ffffff;border:1px solid #e5e7eb;border-radius:20px;padding:36px 40px;max-width:480px;width:92%;box-shadow:0 24px 64px rgba(0,0,0,.15),0 0 0 1px rgba(0,0,0,.05);text-align:center;animation:slideUp 0.3s ease-out">
                <div style="width:64px;height:64px;border-radius:16px;background:linear-gradient(135deg,#eff6ff 0%,#dbeafe 100%);display:flex;align-items:center;justify-content:center;margin:0 auto 20px;font-size:28px;box-shadow:0 4px 12px rgba(59,130,246,0.15)">ğŸ”—</div>
                <h3 style="font-size:18px;font-weight:800;margin-bottom:10px;color:#111827;letter-spacing:-0.01em">IPNDB ã¸é·ç§»ã—ã¾ã™</h3>
                <p style="font-size:14px;color:#6b7280;line-height:1.6;margin-bottom:10px">
                    IPN <span style="display:inline-block;padding:4px 12px;background:#eff6ff;border-radius:8px;font-weight:700;color:#1d4ed8;font-family:'SF Mono',Menlo,Consolas,monospace;border:1px solid #bfdbfe;margin:0 4px">${ipnId}</span> ã®è©³ç´°ãƒšãƒ¼ã‚¸ã‚’é–‹ãã¾ã™ã€‚
                </p>
                <p style="font-size:11px;color:#9ca3af;margin-bottom:28px;line-height:1.7">
                    â€» ã“ã‚Œã¯ãƒ¢ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã§ã™ã€‚æœ¬ç•ªç’°å¢ƒã§ã¯è‡ªå‹•çš„ã«<br>
                    <code style="background:#f0f4ff;padding:4px 10px;border-radius:6px;font-size:10px;color:#1d4ed8;font-family:'SF Mono',Menlo,Consolas,monospace;border:1px solid #dbeafe;display:inline-block;margin-top:6px">ipndb.example.com/ipn/${ipnId}</code><br>
                    ã«é·ç§»ã—ã¾ã™ã€‚
                </p>
                <div style="display:flex;gap:10px;justify-content:center">
                    <button onclick="this.closest('div').parentElement.remove()"
                        style="background:#f3f4f6;color:#374151;border:1px solid #e5e7eb;padding:10px 24px;border-radius:10px;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s"
                        onmouseover="this.style.background='#e5e7eb';this.style.borderColor='#d1d5db'" 
                        onmouseout="this.style.background='#f3f4f6';this.style.borderColor='#e5e7eb'">
                        ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                    </button>
                    <button onclick="alert('IPNDBã¸ã®é·ç§»æ©Ÿèƒ½ã¯é–‹ç™ºä¸­ã§ã™');this.closest('div').parentElement.remove()"
                        style="background:#111827;color:#fff;border:none;padding:10px 32px;border-radius:10px;font-size:13px;font-weight:700;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,.15);transition:all .2s"
                        onmouseover="this.style.background='#374151';this.style.transform='translateY(-1px)';this.style.boxShadow='0 4px 12px rgba(0,0,0,.2)'" 
                        onmouseout="this.style.background='#111827';this.style.transform='translateY(0)';this.style.boxShadow='0 2px 8px rgba(0,0,0,.15)'">
                        IPNDBã‚’é–‹ã
                    </button>
                </div>
            </div>
            <style>
                @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
                @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
            </style>`;
        document.body.appendChild(modal);
        modal.addEventListener('click', e => { 
            if(e.target === modal) {
                modal.style.animation = 'fadeOut 0.2s ease-out';
                setTimeout(() => modal.remove(), 200);
            }
        });
    }

    function openAddTemplate() {
        const modal = document.getElementById('addTemplateModal');
        if (modal) {
            modal.style.display = 'block';
            // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåå…¥åŠ›æ¬„ã«ç§»å‹•
            setTimeout(() => {
                const nameInput = document.getElementById('tplName');
                if (nameInput) nameInput.focus();
            }, 100);
        }
    }
    
    function closeAddTemplate() {
        const modal = document.getElementById('addTemplateModal');
        if (modal) {
            modal.style.display = 'none';
        }
    }
    
    function submitAddTemplate() {
        const cats = [...document.querySelectorAll('.tpl-cat-checkbox:checked')].map(c => c.value);
        const nameInput = document.getElementById('tplName');
        const bodyInput = document.getElementById('tplBody');
        
        if (!nameInput || !bodyInput) {
            alert('ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            return;
        }
        
        const name = nameInput.value.trim();
        const body = bodyInput.value.trim();
        
        // æ¤œè¨¼
        const errors = [];
        if (!name) errors.push('ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        if (name && name.length < 3) errors.push('ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåã¯3æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„');
        if (!body) errors.push('ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæœ¬æ–‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        if (body && body.length < 10) errors.push('ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæœ¬æ–‡ã¯10æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„');
        if (cats.length === 0) errors.push('ã‚«ãƒ†ã‚´ãƒªã‚’1ã¤ä»¥ä¸Šé¸æŠã—ã¦ãã ã•ã„');
        
        if (errors.length > 0) {
            alert('å…¥åŠ›å†…å®¹ã«å•é¡ŒãŒã‚ã‚Šã¾ã™:\n\n' + errors.map((e, i) => `${i + 1}. ${e}`).join('\n'));
            return;
        }
        
        // ç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        const confirmed = confirm(
            `ä»¥ä¸‹ã®å†…å®¹ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’è¿½åŠ ã—ã¾ã™:\n\n` +
            `ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå: ${name}\n` +
            `ã‚«ãƒ†ã‚´ãƒª: ${cats.join(', ')}\n` +
            `æœ¬æ–‡: ${body.substring(0, 50)}${body.length > 50 ? '...' : ''}\n\n` +
            `â€» ã“ã‚Œã¯ãƒ¢ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®ãŸã‚ã€å®Ÿéš›ã®ä¿å­˜ã¯è¡Œã‚ã‚Œã¾ã›ã‚“ã€‚\n\n` +
            `è¿½åŠ ã—ã¾ã™ã‹?`
        );
        
        if (!confirmed) return;
        
        // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        alert(
            `âœ“ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’è¿½åŠ ã—ã¾ã—ãŸ\n\n` +
            `ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå: ${name}\n` +
            `ã‚«ãƒ†ã‚´ãƒª: ${cats.join(', ')}\n\n` +
            `â€» ãƒ¢ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®ãŸã‚å®Ÿéš›ã®ä¿å­˜ã¯è¡Œã‚ã‚Œã¦ã„ã¾ã›ã‚“ã€‚\næœ¬ç•ªç’°å¢ƒã§ã¯è‡ªå‹•çš„ã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚`
        );
        
        // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚¯ãƒªã‚¢
        nameInput.value = '';
        bodyInput.value = '';
        document.querySelectorAll('.tpl-cat-checkbox').forEach(c => c.checked = false);
        closeAddTemplate();
    }

    function copyTemplate(btn) {
        const card = btn.closest('.tpl-card');
        if (!card) {
            alert('ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            return;
        }
        
        const textEl = card.querySelector('.tpl-text');
        if (!textEl) {
            alert('ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæœ¬æ–‡ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            return;
        }
        
        const text = textEl.textContent;
        
        if (!navigator.clipboard) {
            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: å¤ã„ãƒ–ãƒ©ã‚¦ã‚¶ç”¨
            const textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.style.position = 'fixed';
            textarea.style.opacity = '0';
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand('copy');
                showCopySuccess(btn);
            } catch (err) {
                console.error('ã‚³ãƒ”ãƒ¼ã‚¨ãƒ©ãƒ¼:', err);
                alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚');
            }
            document.body.removeChild(textarea);
            return;
        }
        
        navigator.clipboard.writeText(text).then(() => {
            showCopySuccess(btn);
        }).catch(err => {
            console.error('ã‚³ãƒ”ãƒ¼ã‚¨ãƒ©ãƒ¼:', err);
            alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
        });
    }
    
    function showCopySuccess(btn) {
        const orig = btn.textContent;
        btn.textContent = 'âœ“ ã‚³ãƒ”ãƒ¼æ¸ˆ';
        btn.style.color = '#16a34a';
        btn.style.borderColor = 'rgba(22,163,74,0.3)';
        btn.style.background = 'rgba(22,163,74,0.08)';
        btn.style.fontWeight = '700';
        
        // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåã‚’å–å¾—ã—ã¦ãƒ­ã‚°è¨˜éŒ²
        const card = btn.closest('.tpl-card');
        if (card) {
            const titleEl = card.querySelector('h4');
            const templateName = titleEl ? titleEl.textContent : 'ä¸æ˜ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ';
            logAction('template_copied', {
                label: 'ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚³ãƒ”ãƒ¼',
                templateName: templateName
            });
        }
        
        setTimeout(() => {
            btn.textContent = orig;
            btn.style.color = '';
            btn.style.borderColor = '';
            btn.style.background = '';
            btn.style.fontWeight = '';
        }, 2000);
    }

    // ç”³ç«‹ã¦ã®ç¨®é¡ãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã®å‡¦ç†
    function updateAppendixSelection() {
        const appealTypeEl = document.querySelector('input[name="appeal_type"]:checked');
        if (!appealTypeEl) return;
        
        const appealType = appealTypeEl.value;
        const appendix1 = document.getElementById('appendix1');
        const appendix2 = document.getElementById('appendix2');
        const appendix3 = document.getElementById('appendix3');
        
        if (!appendix1 || !appendix2 || !appendix3) return;
        
        // åŸºæœ¬çš„ã«ã™ã¹ã¦é¸æŠ
        appendix1.checked = true;
        appendix2.checked = true;
        appendix3.checked = true;
        
        // ç”³ç«‹ã¦ã®ç¨®é¡ã«å¿œã˜ãŸèª¿æ•´
        if (appealType === 'disclosure_only') {
            // é–‹ç¤ºã®ã¿ã®å ´åˆã¯æ¨™æº–ã‚»ãƒƒãƒˆ
            console.log('é–‹ç¤ºã®ã¿: æ¨™æº–åˆ¥ç´™ã‚»ãƒƒãƒˆ');
        } else if (appealType === 'disclosure_deletion') {
            // æ¶ˆå»ç¦æ­¢ã‚‚å«ã‚€å ´åˆ
            console.log('é–‹ç¤ºï¼‹æ¶ˆå»ç¦æ­¢: ã™ã¹ã¦ã®åˆ¥ç´™ãŒå¿…è¦');
        } else if (appealType === 'disclosure_provision') {
            // æä¾›å‘½ä»¤ã‚‚å«ã‚€å ´åˆ
            console.log('é–‹ç¤ºï¼‹æä¾›å‘½ä»¤: ã™ã¹ã¦ã®åˆ¥ç´™ãŒå¿…è¦');
        }
    }
    
    // ã™ã¹ã¦ã®ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ã«ãƒ­ã‚°æ©Ÿèƒ½ã‚’è¿½åŠ 
    function initializeActionLogging() {
        // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰ãƒ­ã‚°ã‚’èª­ã¿è¾¼ã¿
        loadLogsFromLocalStorage();
        
        // ãƒ­ã‚°ã‚«ã‚¦ãƒ³ãƒˆãƒãƒƒã‚¸ã‚’æ›´æ–°
        updateLogCountBadge();
        
        // ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹ã‚’ãƒ­ã‚°
        logAction('session_started', {
            label: 'ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿',
            caseId: '7K14488',
            pageTitle: document.title
        });
        
        // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', function(e) {
                const label = this.closest('label') ? 
                    this.closest('label').textContent.trim() : 
                    (this.id || 'ä¸æ˜ãªãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹');
                
                logAction(
                    this.checked ? 'checkbox_checked' : 'checkbox_unchecked',
                    {
                        label: label,
                        checkboxId: this.id,
                        checked: this.checked
                    }
                );
            });
        });
        
        // ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', function(e) {
                const label = this.closest('label') ? 
                    this.closest('label').textContent.trim() : 
                    this.value;
                
                logAction('radio_selected', {
                    label: label,
                    name: this.name,
                    value: this.value
                });
            });
        });
        
        // ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        document.querySelectorAll('select').forEach(select => {
            select.addEventListener('change', function(e) {
                const selectedOption = this.options[this.selectedIndex];
                
                logAction('select_changed', {
                    label: selectedOption.text,
                    selectId: this.id,
                    value: this.value
                });
            });
        });
        
        // ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ï¼ˆå…¥åŠ›çµ‚äº†å¾Œï¼‰
        document.querySelectorAll('textarea').forEach(textarea => {
            let typingTimer;
            const doneTypingInterval = 2000; // 2ç§’å¾Œã«è¨˜éŒ²
            
            textarea.addEventListener('keyup', function() {
                clearTimeout(typingTimer);
                typingTimer = setTimeout(() => {
                    if (this.value.trim().length > 0) {
                        logAction('textarea_updated', {
                            label: this.placeholder || this.id || 'ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢',
                            textareaId: this.id,
                            length: this.value.length
                        });
                    }
                }, doneTypingInterval);
            });
            
            textarea.addEventListener('keydown', function() {
                clearTimeout(typingTimer);
            });
        });
        
        console.log('âœ“ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ­ã‚°æ©Ÿèƒ½ã‚’åˆæœŸåŒ–ã—ã¾ã—ãŸ');
    }
    
    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®š
    document.addEventListener('DOMContentLoaded', function() {
        // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰LNç•ªå·ã‚’å–å¾—ã—ã¦è¡¨ç¤º
        const urlParams = new URLSearchParams(window.location.search);
        const lnParam = urlParams.get('ln');
        if (lnParam) {
            const lnEl = document.getElementById('current-ln-number');
            if (lnEl) {
                lnEl.textContent = lnParam;
                console.log(`âœ“ LNç•ªå·ã‚’è¨­å®š: ${lnParam}`);
            }
        }
        
        // ã‚¿ã‚¹ã‚¯çŠ¶æ…‹ã‚’èª­ã¿è¾¼ã¿
        loadTaskStates();
        
        // ç”³ç«‹ã¦ã®ç¨®é¡ã®ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³
        const appealTypeRadios = document.querySelectorAll('input[name="appeal_type"]');
        appealTypeRadios.forEach(radio => {
            radio.addEventListener('change', updateAppendixSelection);
        });
        // åˆæœŸçŠ¶æ…‹ã‚’è¨­å®š
        updateAppendixSelection();
        
        // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ­ã‚°æ©Ÿèƒ½ã‚’åˆæœŸåŒ–
        initializeActionLogging();
        
        // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠçŠ¶æ…‹ã‚’å¾©å…ƒ
        loadTemplateSelections();
        
        // ã‚¿ã‚¹ã‚¯ã‚«ã‚¦ãƒ³ãƒˆã‚’åˆæœŸåŒ–
        setTimeout(() => {
            updateTaskCount();
        }, 100);
    });
    
    // lnportal.htmlã‹ã‚‰æˆ»ã£ã¦ããŸæ™‚ã«ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã‚’æ›´æ–°
    window.addEventListener('focus', function() {
        loadTaskStates();
        updateTaskCount();
        console.log('âœ“ ãƒšãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ã‚«ã‚¹: ã‚¿ã‚¹ã‚¯çŠ¶æ…‹ã‚’æ›´æ–°ã—ã¾ã—ãŸ');
    });
    
    // localStorageã®å¤‰æ›´ã‚’æ¤œçŸ¥ã—ã¦æ›´æ–°ï¼ˆåŒä¸€ãƒ–ãƒ©ã‚¦ã‚¶ã®åˆ¥ã‚¿ãƒ–ï¼‰
    window.addEventListener('storage', function(e) {
        if (e.key === 'ln_doc_statuses' || e.key === 'all_ln_checklists') {
            loadTaskStates();
            updateTaskCount();
            console.log('âœ“ æ›¸é¡æŠŠæ¡æ›´æ–°ã‚’æ¤œçŸ¥: ã‚¿ã‚¹ã‚¯çŠ¶æ…‹ã‚’æ›´æ–°ã—ã¾ã—ãŸ');
        }
    });
    
    function createApplication() {
        const appealTypeEl = document.querySelector('input[name="appeal_type"]:checked');
        if (!appealTypeEl) { 
            alert('ç”³ç«‹ã®ç¨®é¡ã‚’é¸æŠã—ã¦ãã ã•ã„'); 
            return; 
        }
        currentAppealType = appealTypeEl.value;
        
        // é¸æŠã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ç¢ºèª
        const hasSelectedTemplate = selectedTemplates.copyright || selectedTemplates.lawyer;
        const copyrightPatternSelect = document.getElementById('copyrightPattern').value;
        
        // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠã¨ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³é¸æŠã®ä¸¡æ–¹ãŒãªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼
        if (!hasSelectedTemplate && !copyrightPatternSelect) { 
            alert('è‘—ä½œæ¨©è¨¼æ˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é¸æŠã™ã‚‹ã‹ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„'); 
            return; 
        }
        
        currentCopyrightPattern = copyrightPatternSelect;
        const mainArgument = document.getElementById('mainArgument').value;
        
        const titles = {
            'disclosure_only': 'ç™ºä¿¡è€…æƒ…å ±é–‹ç¤ºå‘½ä»¤æ›¸',
            'disclosure_deletion': 'ç™ºä¿¡è€…æƒ…å ±é–‹ç¤ºå‘½ä»¤æ›¸å…¼æ¶ˆå»ç¦æ­¢å‘½ä»¤ç”³ç«‹æ›¸',
            'disclosure_provision': 'ç™ºä¿¡è€…æƒ…å ±é–‹ç¤ºå‘½ä»¤æ›¸å…¼æä¾›å‘½ä»¤ç”³ç«‹æ›¸'
        };
        currentApplicationTitle = titles[currentAppealType];
        currentApplicationContent = generateApplicationContent(currentAppealType, currentCopyrightPattern, mainArgument);
        document.getElementById('mainContent').style.display = 'none';
        document.getElementById('applicationViewContainer').style.display = 'block';
        document.getElementById('applicationViewContent').innerHTML = `<div style="line-height: 1.8; color: #333;">${currentApplicationContent}</div>`;
        window.scrollTo(0, 0);
        
        // ãƒ­ã‚°è¨˜éŒ²
        logAction('application_created', {
            label: currentApplicationTitle,
            appealType: currentAppealType,
            copyrightPattern: currentCopyrightPattern,
            hasMainArgument: mainArgument.length > 0,
            usedTemplates: {
                copyright: selectedTemplates.copyright ? selectedTemplates.copyright.name : null,
                lawyer: selectedTemplates.lawyer ? selectedTemplates.lawyer.name : null,
                evidenceCount: selectedTemplates.evidence.length
            }
        });
    }

    // é¸æŠã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç”Ÿæˆ
    function generateSelectedTemplatesSection() {
        let html = '';
        
        // æ¨©åˆ©è€…ã®è¨¼æ˜ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
        if (selectedTemplates.copyright) {
            html += `<div style="margin-bottom: 20px; padding: 15px; background: #eff6ff; border-left: 4px solid #3b82f6;">
                <p style="margin: 0 0 10px 0; font-weight: bold; color: #1e40af;">âœ“ é¸æŠã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ: ${selectedTemplates.copyright.name}</p>
                <div style="margin-left: 50px; line-height: 1.8; color: #333;">${selectedTemplates.copyright.text}</div>
            </div>`;
        }
        
        // å¼è­·å£«ãƒ‘ã‚¿ãƒ¼ãƒ³
        if (selectedTemplates.lawyer) {
            html += `<div style="margin-bottom: 20px; padding: 15px; background: #f0fdf4; border-left: 4px solid #16a34a;">
                <p style="margin: 0 0 10px 0; font-weight: bold; color: #15803d;">âœ“ é¸æŠã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ: ${selectedTemplates.lawyer.name}</p>
                <div style="margin-left: 50px; line-height: 1.8; color: #333;">${selectedTemplates.lawyer.text}</div>
            </div>`;
        }
        
        // è¨¼æ‹ è¨˜è¼‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆè¤‡æ•°ï¼‰
        if (selectedTemplates.evidence.length > 0) {
            html += `<div style="margin-bottom: 20px; padding: 15px; background: #fefce8; border-left: 4px solid #eab308;">
                <p style="margin: 0 0 10px 0; font-weight: bold; color: #a16207;">âœ“ è¨¼æ‹ è¨˜è¼‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ (${selectedTemplates.evidence.length}ä»¶)</p>`;
            selectedTemplates.evidence.forEach((tpl, idx) => {
                html += `<div style="margin: 10px 0 10px 50px; padding: 10px; background: white; border-radius: 4px;">
                    <p style="margin: 0 0 5px 0; font-size: 12px; font-weight: 600; color: #92400e;">${idx + 1}. ${tpl.name}</p>
                    <div style="line-height: 1.6; color: #333; font-size: 13px;">${tpl.text}</div>
                </div>`;
            });
            html += `</div>`;
        }
        
        return html;
    }
    
    function generateApplicationContent(appealType, copyrightPattern, mainArgument) {
        return `
            <div style="max-width: 900px; margin: 0 auto;">
                <div style="text-align: center; margin-bottom: 40px;">
                    <h1 style="font-size: 24px; font-weight: bold; margin: 0;">${currentApplicationTitle}</h1>
                </div>
                <div style="margin-bottom: 30px; text-align: right;">
                    <p style="margin: 5px 0;">ä»¤å’Œã€€ã€€å¹´ã€€ã€€æœˆã€€ã€€ã€€æ—¥</p>
                    <p style="margin: 5px 0;">æ±äº¬åœ°æ–¹è£åˆ¤æ‰€æ°‘äº‹éƒ¨ã€€å¾¡ä¸­</p>
                </div>
                <div style="margin-bottom: 30px; text-align: center;">
                    <p style="margin: 5px 0;">å½“äº‹è€…ã®è¡¨ç¤ºã€€ã€€åˆ¥ç´™å½“äº‹è€…ç›®éŒ²è¨˜è¼‰ã®ã¨ãŠã‚Š</p>
                </div>
                <div style="margin-bottom: 40px;">
                    <h2 style="font-size: 18px; font-weight: bold; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px;">ç”³ç«‹ã¦ã®è¶£æ—¨</h2>
                    <p style="margin-bottom: 15px; margin-left: 20px;"><span style="display: inline-block; width: 30px;">ï¼‘</span><span>ç™ºä¿¡è€…æƒ…å ±é–‹ç¤ºå‘½ä»¤ã®ç”³ç«‹ã¦</span></p>
                    <p style="margin-bottom: 25px; margin-left: 50px;">ç›¸æ‰‹æ–¹ã¯ã€ç”³ç«‹äººã«å¯¾ã—ã€åˆ¥ç´™ç™ºä¿¡è€…æƒ…å ±ç›®éŒ²è¨˜è¼‰ã®æƒ…å ±ã‚’é–‹ç¤ºã›ã‚ˆã¨ã®è£åˆ¤ã‚’æ±‚ã‚ã‚‹ã€‚</p>
                    ${appealType === 'disclosure_deletion' ? `<p style="margin-bottom: 15px; margin-left: 20px;"><span style="display: inline-block; width: 30px;">ï¼’</span><span>æ¶ˆå»ç¦æ­¢å‘½ä»¤ã®ç”³ç«‹ã¦</span></p><p style="margin-bottom: 25px; margin-left: 50px;">ç›¸æ‰‹æ–¹ã¯ã€å‰é …ã®ç”³ç«‹ã¦ã«ä¿‚ã‚‹ç™ºä¿¡è€…æƒ…å ±é–‹ç¤ºå‘½ä»¤ç”³ç«‹äº‹ä»¶ãŒçµ‚äº†ã™ã‚‹ã¾ã§ã®é–“ã€åˆ¥ç´™ç™ºä¿¡è€…æƒ…å ±ç›®éŒ²è¨˜è¼‰ã®æƒ…å ±ã‚’æ¶ˆå»ã—ã¦ã¯ãªã‚‰ãªã„ã¨ã®è£åˆ¤ã‚’æ±‚ã‚ã‚‹ã€‚</p>` : ''}
                    ${appealType === 'disclosure_provision' ? `<p style="margin-bottom: 15px; margin-left: 20px;"><span style="display: inline-block; width: 30px;">ï¼’</span><span>æä¾›å‘½ä»¤ã®ç”³ç«‹ã¦</span></p><p style="margin-bottom: 25px; margin-left: 50px;">ç›¸æ‰‹æ–¹ã¯ã€ç”³ç«‹äººã«å¯¾ã—ã€åˆ¥ç´™ç™ºä¿¡è€…æƒ…å ±ç›®éŒ²ï¼ˆï¼’ï¼‰è¨˜è¼‰ã®æƒ…å ±ã®ã†ã¡ç›¸æ‰‹æ–¹ãŒä¿æœ‰ã™ã‚‹ã‚‚ã®ã«ã‚ˆã‚Šç‰¹å®šã§ãã‚‹ä»–ã®é–‹ç¤ºé–¢ä¿‚å½¹å‹™æä¾›è€…ã®æ°ååˆã¯åç§°åŠã³ä½æ‰€ã‚’æ›¸é¢åˆã¯é›»ç£çš„æ–¹æ³•ã«ã‚ˆã‚Šæä¾›ã›ã‚ˆã€‚</p>` : ''}
                </div>
                <div style="margin-bottom: 40px;">
                    <h2 style="font-size: 18px; font-weight: bold; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px;">ç†ç”±</h2>
                    <p style="margin-bottom: 15px; margin-left: 20px; font-weight: bold;">ï¼”ã€€ç™ºä¿¡è€…æƒ…å ±ã®ä¿æœ‰</p>
                    <p style="margin-bottom: 20px; margin-left: 50px;">ç›¸æ‰‹æ–¹ã¯ã€æœ¬ä»¶å„ç™ºä¿¡è€…ã«ã¤ã„ã¦ã®ã€åˆ¥ç´™ç™ºä¿¡è€…æƒ…å ±ç›®éŒ²è¨˜è¼‰ã®æƒ…å ±ã‚’ä¿æœ‰ã—ã¦ã„ã‚‹ã€‚</p>
                    <p style="margin-bottom: 15px; margin-left: 20px; font-weight: bold;">ï¼•ã€€ç”³ç«‹äººãŒè‘—ä½œæ¨©è€…ã§ã‚ã‚‹ã“ã¨</p>
                    ${generateCopyrightSection(copyrightPattern)}
                    ${generateSelectedTemplatesSection()}
                    ${mainArgument ? `<p style="margin-bottom: 15px; margin-left: 20px; font-weight: bold;">ï¼–ã€€è¿½åŠ ã®ä¸»å¼µ</p><p style="margin-bottom: 20px; margin-left: 50px; white-space: pre-wrap; background: #f5f5f5; padding: 10px; border-left: 3px solid #333;">${mainArgument}</p>` : ''}
                </div>
                <div style="margin-bottom: 40px;">
                    <h2 style="font-size: 18px; font-weight: bold; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px;">é™„å±æ›¸é¡</h2>
                    <p style="margin: 8px 0; margin-left: 50px;">ï¼‘ã€€è¨¼æ‹ èª¬æ˜æ›¸ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ï¼‘é€š</p>
                    <p style="margin: 8px 0; margin-left: 50px;">ï¼’ã€€ç”²å·å„è¨¼ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€å„ï¼‘é€š</p>
                    <p style="margin: 8px 0; margin-left: 50px;">ï¼“ã€€è³‡æ ¼è¨¼æ˜æ›¸ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ï¼’é€š</p>
                    <p style="margin: 8px 0; margin-left: 50px;">ï¼”ã€€æ‰‹ç¶šä»£ç†å§”ä»»çŠ¶ã€€ã€€ã€€ã€€ã€€ã€€ã€€ï¼‘é€š</p>
                    <p style="margin: 8px 0; margin-left: 50px;">ï¼•ã€€æ³•äººç™»è¨˜ç°¿è¬„æœ¬ã€€ã€€ã€€ã€€ã€€ã€€ã€€ï¼‘é€š</p>
                </div>
                <div style="margin-top: 60px; padding-top: 30px; border-top: 2px solid #333;">
                    <div style="text-align: center; margin-bottom: 30px;"><h3 style="font-size: 16px; font-weight: bold; margin-bottom: 5px;">ï¼ˆåˆ¥ç´™ï¼‰</h3><h2 style="font-size: 18px; font-weight: bold;">å½“ã€€äº‹ã€€è€…ã€€ç›®ã€€éŒ²</h2></div>
                    <p style="margin-bottom: 30px; margin-left: 50px;"><strong>ç”³ç«‹äºº</strong><br><br>æ ªå¼ä¼šç¤¾ãƒã‚¤ãƒ­ãƒ¼ãƒ«<br>ä»£è¡¨è€…ä»£è¡¨å–ç· å½¹ã€€ã€€å°å‡ºã€€è£•è²´<br>ã€’101ï¼0065ã€€æ±äº¬éƒ½åƒä»£ç”°åŒºè¥¿ç¥ç”°ä¸‰ä¸ç›®ï¼“ç•ªï¼™å·</p>
                    <p style="margin-bottom: 30px; margin-left: 50px;"><strong>ç”³ç«‹äººä»£ç†äºº</strong><br><br>å¼è­·å£«æ³•äººï¼©ï¼´ï¼ªæ³•å¾‹äº‹å‹™æ‰€<br>ã€’108ï¼0023ã€€æ±äº¬éƒ½æ¸¯åŒºèŠæµ¦ï¼”ï¼ï¼‘ï¼–ï¼ï¼’ï¼“ã€€ã‚¢ã‚¯ã‚¢ã‚·ãƒ†ã‚£èŠæµ¦ï¼™éš<br>é›»è©±ã€€ã€€ï¼ï¼•ï¼ï¼ˆï¼•ï¼˜ï¼”ï¼–ï¼‰ï¼—ï¼’ï¼•ï¼‘<br>ï¼¦ï¼¡ï¼¸ã€€ï¼ï¼“ï¼ˆï¼•ï¼—ï¼“ï¼ï¼‰ï¼ï¼’ï¼’ï¼–<br><br>ç”³ç«‹äººæ‰‹ç¶šä»£ç†äººå¼è­·å£«ã€€ã€€æˆ¸ç”°ã€€æ³‰<br>åŒã€€ã€€ã€€ã€€ã€€ã€€ã€€å¼è­·å£«ã€€ã€€ã€€è§’åœ°å±±ã€€å®—è¡Œ<br>åŒã€€ã€€ã€€ã€€ã€€ã€€ã€€å¼è­·å£«ã€€ã€€ã€€å¤§å¡šã€€ç›´<br>åŒã€€ã€€ã€€ã€€ã€€ã€€ã€€å¼è­·å£«ã€€ã€€ã€€æ²³ç”°ã€€éš†å…‹<br>åŒã€€ã€€ã€€ã€€ã€€ã€€ã€€å¼è­·å£«ã€€ã€€ã€€æ¸…æ°´ã€€è¡<br>åŒã€€ã€€ã€€ã€€ã€€ã€€ã€€å¼è­·å£«ã€€ã€€ã€€ç• å±±ã€€æ™ƒ</p>
                    <p style="margin-bottom: 20px; margin-left: 50px;"><strong>ç›¸æ‰‹æ–¹</strong><br><br>ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯æ ªå¼ä¼šç¤¾<br>ä»£è¡¨è€…ä»£è¡¨å–ç· å½¹ã€€ã€€å®®å·ã€€æ½¤ä¸€<br>ã€’105ï¼7529ã€€æ±äº¬éƒ½æ¸¯åŒºæµ·å²¸ä¸€ä¸ç›®ï¼—ç•ªï¼‘å·</p>
                </div>
            </div>`;
    }

    function generateCopyrightSection(pattern) {
        const sections = {
            'package': `<p style="margin-bottom: 20px; margin-left: 50px;">æœ¬ä»¶è‘—ä½œç‰©ã‚’åéŒ²ã—ãŸï¼¤ï¼¶ï¼¤ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å·¦ä¸‹ã«ã€ã€Œè£½ä½œãƒ»è‘—ä½œãƒ»å—å¯©ï¼ï¼»ç”³ç«‹äººåï¼½ã€ã¨ç”³ç«‹äººã®åç§°ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ï¼ˆç”²ï¼‘ï¼“ï¼‰ã€‚<br>ã—ãŸãŒã£ã¦ã€ç”³ç«‹äººã¯è‘—ä½œè€…ã¨ã—ã¦æ¨å®šã•ã‚Œã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼”æ¡ï¼‰ã€‚<br><br>ä»¥ä¸Šã‚ˆã‚Šã€ç”³ç«‹äººã¯è‘—ä½œæ¨©ã‚’æœ‰ã™ã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼—æ¡ï¼‘é …ï¼‰ã€‚<br><br>ã‚ˆã£ã¦ã€ç”³ç«‹äººã¯ã€ç›¸æ‰‹æ–¹ã«å¯¾ã—ã€æƒ…å ±æµé€šãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å‡¦æ³•ç¬¬ï¼˜æ¡ã€ç¬¬ï¼•æ¡ï¼‘é …ã«åŸºã¥ãã€åˆ¥ç´™ç™ºä¿¡è€…æƒ…å ±ç›®éŒ²è¨˜è¼‰ã®æƒ…å ±ã®é–‹ç¤ºã‚’æ±‚ã‚ã‚‹ã€‚</p>`,
            'film': `<p style="margin-bottom: 20px; margin-left: 50px;">ç”³ç«‹äººã¯ã€æœ¬ä»¶è‘—ä½œç‰©ï¼ˆç”²ï¼‘ï¼“ï¼‰ã‚’æœ€åˆã«ç™ºæ„ã—ã¦ä¼ç”»ã—ã€æœ¬ä»¶è‘—ä½œç‰©ã®åˆ¶ä½œè²»ç”¨å…¨ã¦ã‚’è² æ‹…ã™ã‚‹ç­‰ã®è²¬ä»»ã‚’è² ã†ä¸»ä½“ã§ã‚ã£ãŸã€‚ã‚ˆã£ã¦ã€ç”³ç«‹äººã¯æœ¬ä»¶è‘—ä½œç‰©ã®ã€Œæ˜ ç”»è£½ä½œè€…ã€ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’æ¡ç¬¬ï¼‘ï¼å·ï¼‰ã«å½“ãŸã‚‹ã€‚<br><br>ç”³ç«‹äººã¯ã€ã€Œï¼»ç›£ç£åï¼½ã€ã“ã¨ç”³ç«‹å¤–ï¼»æ°åï¼½ã«å¯¾ã—ã¦æœ¬ä»¶è‘—ä½œç‰©ã®è£½ä½œã‚’ä¾é ¼ã—ã€åŒäººãŒç›£ç£ã‚’æ‹…å½“ã—ãŸã€‚åŒäººã¯ã€è„šæœ¬ã®å‰µä½œã‚„æ˜ åƒã®ç·¨é›†ç­‰ã®ç·æŒ‡æ®ã‚’è¡Œã£ã¦ã€æœ¬ä»¶è‘—ä½œç‰©ã®è„šæœ¬ã‚„æ˜ åƒå†…å®¹ã«é–¢ã™ã‚‹æœ€çµ‚æ±ºå®šæ¨©é™ã‚’æœ‰ã—ã¦ãŠã‚Šã€æœ¬ä»¶è‘—ä½œç‰©ã«ã€Œå…¨ä½“çš„å½¢æˆã«å‰µä½œçš„ã«å¯„ä¸ã—ã€ã¦ãŠã‚Šã€è‘—ä½œè€…ã«ã‚ãŸã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼–æ¡ï¼‰ã€‚<br><br>ãã—ã¦ã€åŒäººã¯ã€æ˜ ç”»è£½ä½œè€…ã§ã‚ã‚‹ç”³ç«‹äººã«å¯¾ã—ã€æœ¬ä»¶è‘—ä½œç‰©ã®è£½ä½œã«å‚åŠ ã™ã‚‹ã“ã¨ã‚’ç´„æŸã—ã¦ã„ãŸï¼ˆç”²ï¼‘ï¼”ï¼‰ã€‚<br><br>ã‚ˆã£ã¦ã€ç”³ç«‹äººã¯ã€ç›¸æ‰‹æ–¹ã«å¯¾ã—ã€æƒ…å ±æµé€šãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å‡¦æ³•ç¬¬ï¼˜æ¡ã€ç¬¬ï¼•æ¡ï¼‘é …ã«åŸºã¥ãã€åˆ¥ç´™ç™ºä¿¡è€…æƒ…å ±ç›®éŒ²è¨˜è¼‰ã®æƒ…å ±ã®é–‹ç¤ºã‚’æ±‚ã‚ã‚‹ã€‚</p>`,
            'director_none': `<p style="margin-bottom: 20px; margin-left: 50px;">åˆ¥ç´™è‘—ä½œç‰©ç›®éŒ²è¨˜è¼‰ã®å‹•ç”»ã‚’åéŒ²ã—ãŸï¼¤ï¼¶ï¼¤ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆç”²ï¼‘ï¼“ï¼‰ã®å·¦ä¸‹ã«ã€ç”³ç«‹äººã®å•†å·ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‹ã‚‰ã€ç”³ç«‹äººã¯è‘—ä½œè€…ã¨æ¨å®šã•ã‚Œã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼”æ¡ï¼‰ã€‚<br><br>ã‚ˆã£ã¦ã€ç”³ç«‹äººã¯ã€ç›¸æ‰‹æ–¹ã«å¯¾ã—ã€æƒ…å ±æµé€šãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å‡¦æ³•ç¬¬ï¼˜æ¡ã€ç¬¬ï¼•æ¡ï¼‘é …ã«åŸºã¥ãã€åˆ¥ç´™ç™ºä¿¡è€…æƒ…å ±ç›®éŒ²è¨˜è¼‰ã®æƒ…å ±ã®é–‹ç¤ºã‚’æ±‚ã‚ã‚‹ã€‚</p>`,
            'employment': `<p style="margin-bottom: 20px; margin-left: 50px;">åˆ¥ç´™è‘—ä½œç‰©ç›®éŒ²è¨˜è¼‰ã®å„å‹•ç”»ï¼ˆä»¥ä¸‹ã€Œæœ¬ä»¶è‘—ä½œç‰©ã€ã¨ã„ã†ã€‚ï¼‰ã¯ã€ç”³ç«‹äººã®ä»£è¡¨å–ç· å½¹åŠã³ç”³ç«‹äººã®å¾“æ¥­å“¡ã®ä¼ç”»ã«åŸºã¥ã„ã¦ã€ã“ã‚Œã‚‰ã®è€…ã«ã‚ˆã‚Šè·å‹™ä¸Šåˆ¶ä½œã•ã‚ŒãŸã‚‚ã®ã§ã‚ã‚‹ï¼ˆç”²ï¼‘ï¼“ï¼‰ã€‚<br><br>ã—ãŸãŒã£ã¦ã€æœ¬ä»¶è‘—ä½œç‰©ã¯ç”³ç«‹äººç­‰ã®ç™ºæ„ã«åŸºã¥ã„ã¦ã€ãã®æ¥­å‹™å¾“äº‹è€…ãŒè·å‹™ä¸Šä½œæˆã—ãŸè‘—ä½œç‰©ã§ã‚ã‚‹ã¨ã„ãˆã‚‹ã€‚ã¾ãŸã€æœ¬ä»¶è‘—ä½œç‰©ã‚’åéŒ²ã—ãŸï¼¤ï¼¶ï¼¤ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ç”³ç«‹äººã®å•†å·ãŒè¡¨ç¤ºã•ã‚Œã¦ãŠã‚Šï¼ˆç”²ï¼‘ï¼”ï¼‰ã€æœ¬ä»¶è‘—ä½œç‰©ã®è²©å£²ã‚µã‚¤ãƒˆã§ã¯ã€ã€Œãƒ¡ãƒ¼ã‚«ãƒ¼ã€ã®æ¬„ã«ç”³ç«‹äººã®å•†å·ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ï¼ˆç”²ï¼‘ï¼•ï¼‰ã€‚<br><br>ã—ãŸãŒã£ã¦ã€ç”³ç«‹äººãŒè‡ªå·±ã®è‘—ä½œã®åç¾©ã®ä¸‹ã«å…¬è¡¨ã•ã‚Œã¦ã„ã‚‹ã€‚ãªãŠã€è·å‹™è‘—ä½œã«é–¢ã—ã¦ã€ä»£è¡¨è€…åŠã³å¾“æ¥­å“¡ã®å¥‘ç´„ä¸Šã®åˆ¥æ®µã®å®šã‚ã¯å­˜åœ¨ã—ãªã„ã€‚<br><br>ä»¥ä¸Šã‚ˆã‚Šã€ç”³ç«‹äººã¯ã€è·å‹™è‘—ä½œã®è¦ä»¶ã‚’ã™ã¹ã¦æº€ãŸã™ãŸã‚è‘—ä½œæ¨©ã‚’æœ‰ã™ã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼•æ¡ï¼‘é …ï¼‰ã€‚<br><br>ã‚ˆã£ã¦ã€ç”³ç«‹äººã¯ã€ç›¸æ‰‹æ–¹ã«å¯¾ã—ã€æƒ…å ±æµé€šãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å‡¦æ³•ç¬¬ï¼˜æ¡ã€ç¬¬ï¼•æ¡ï¼‘é …ã«åŸºã¥ãã€åˆ¥ç´™ç™ºä¿¡è€…æƒ…å ±ç›®éŒ²è¨˜è¼‰ã®æƒ…å ±ã®é–‹ç¤ºã‚’æ±‚ã‚ã‚‹ã€‚</p>`,
            'transfer': `<p style="margin-bottom: 20px; margin-left: 50px;">ç”³ç«‹å¤–ï¼»ä¼šç¤¾åï¼½ã¯ã€æ˜ ç”»è£½ä½œè€…ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’æ¡ç¬¬ï¼‘ï¼å·ï¼‰ã¨ã—ã¦ã€æœ¬ä»¶è‘—ä½œç‰©ï¼ˆç”²ï¼‘ï¼“ï¼‰ã®è£½ä½œã‚’ç™ºæ„ã—ã¦ä¼ç”»ã—ã€è£½ä½œè²»ç”¨ã‚’å…¨ã¦è² æ‹…ã™ã‚‹ãªã©ã—ãŸã€‚<br><br>ç”³ç«‹å¤–ï¼»æ°åï¼½ã¯ã€æœ¬ä»¶è‘—ä½œç‰©ã®è„šæœ¬ã‚„æ˜ åƒå†…å®¹ã«é–¢ã™ã‚‹æœ€çµ‚æ±ºå®šæ¨©é™ã‚’æœ‰ã—ã€æœ¬ä»¶è‘—ä½œç‰©ã®å…¨ä½“çš„å½¢æˆã«å‰µä½œçš„ã«å¯„ä¸ã—ãŸè‘—ä½œè€…ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼–æ¡ï¼‰ã§ã‚ã‚‹ãŒã€åŒäººã¯ç”³ç«‹å¤–ï¼»ä¼šç¤¾åï¼½ã«å¯¾ã—ã€æœ¬ä»¶è‘—ä½œç‰©ã®è£½ä½œã«å‚åŠ ã™ã‚‹ã“ã¨ã‚’ç´„æŸã—ã¦ã„ãŸã“ã¨ã‹ã‚‰ã€æœ¬ä»¶è‘—ä½œç‰©ã®è‘—ä½œæ¨©ã¯åŒç¤¾ã«å¸°å±ã—ãŸï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’ï¼™æ¡ç¬¬ï¼‘é …ï¼‰ï¼ˆç”²ï¼‘ï¼”ï¼‰ã€‚<br><br>ãã®å¾Œã€ç”³ç«‹å¤–ï¼»ä¼šç¤¾åï¼½ã¯ã€ç”³ç«‹äººã«å¯¾ã—ã€æœ¬ä»¶è‘—ä½œç‰©ã®è‘—ä½œæ¨©ã‚’è­²æ¸¡ã—ãŸï¼ˆç”²ï¼‘ï¼•ã€ç”²ï¼‘ï¼–ï¼‰ã€‚<br><br>ã—ãŸãŒã£ã¦ã€æœ¬ä»¶è‘—ä½œç‰©ã®è‘—ä½œæ¨©ã¯ç”³ç«‹äººã«å¸°å±ã—ã¦ã„ã‚‹ã€‚<br><br>ã‚ˆã£ã¦ã€ç”³ç«‹äººã¯ã€ç›¸æ‰‹æ–¹ã«å¯¾ã—ã€æƒ…å ±æµé€šãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å‡¦æ³•ç¬¬ï¼˜æ¡ã€ç¬¬ï¼•æ¡ï¼‘é …ã«åŸºã¥ãã€åˆ¥ç´™ç™ºä¿¡è€…æƒ…å ±ç›®éŒ²è¨˜è¼‰ã®æƒ…å ±ã®é–‹ç¤ºã‚’æ±‚ã‚ã‚‹ã€‚</p>`,
            'trademark': `<p style="margin-bottom: 20px; margin-left: 50px;">æœ¬ä»¶è‘—ä½œç‰©ã‚’åéŒ²ã—ãŸï¼¤ï¼¶ï¼¤ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å·¦ä¸‹ã«ã€ç”³ç«‹äººã®å•†å·ã§ã‚ã‚‹ã€Œï¼»å•†å·ï¼½ã€ã¨ã®è¨˜è¼‰ãŒã‚ã‚‹ï¼ˆç”²ï¼‘ï¼“ï¼‰ã€‚ã“ã‚Œã¯è‘—ä½œè€…ãŒç”³ç«‹äººã§ã‚ã‚‹ã“ã¨ã‚’è¡¨ã™ã‚‚ã®ã§ã‚ã‚‹ã€‚<br><br>ã•ã‚‰ã«ã€å•†å·ã®è¨˜è¼‰ã®ä¸‹ã«ã¯ã€ç”³ç«‹äººã®ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã®ï¼µï¼²ï¼¬ã®è¨˜è¼‰ãŒã‚ã‚Šã€ç„¡æ–­è¤‡è£½ã‚„æ”¹ç·¨ã‚’ç¦ã˜ã‚‹æ—¨ã®è­¦å‘Šæ–‡ã®è¨˜è¼‰ã‚‚ã‚ã‚‹ã€‚ã“ã‚Œã‚‰ã®è¨˜è¼‰ã¯è‘—ä½œè€…ã§ã‚ã‚‹ç”³ç«‹äººã®è¨±è«¾ãªãè¤‡è£½ã‚„ç¿»æ¡ˆã‚’ç¦ã˜ã‚‹è¶£æ—¨ã®ã‚‚ã®ã§ã‚ã‚‹ã€‚<br><br>ã¾ãŸã€ç”³ç«‹äººã®ç™»éŒ²å•†æ¨™ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ï¼ˆç”²ï¼‘ï¼”ï¼‰ã€‚ã“ã‚Œã‚‚æœ¬ä»¶è‘—ä½œç‰©ã«ç”³ç«‹äººã®ç™»éŒ²å•†æ¨™ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ã§ã€æœ¬ä»¶è‘—ä½œç‰©ã®è‘—ä½œè€…ãŒç”³ç«‹äººã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã™ã‚‚ã®ã§ã‚ã‚‹ã€‚<br><br>ä»¥ä¸Šã®äº‹å®Ÿã‹ã‚‰æœ¬ä»¶è‘—ä½œç‰©ã®æä¾›ã®éš›ã«ç”³ç«‹äººã®åç§°ãŒè‘—ä½œè€…åã¨ã—ã¦é€šå¸¸ã®æ–¹æ³•ã«ã‚ˆã‚Šã€è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã¨ã„ãˆã‚‹ã®ã§ã‚ã‚‹ã‹ã‚‰ã€ç”³ç«‹äººã¯è‘—ä½œè€…ã¨æ¨å®šã•ã‚Œã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼”æ¡ï¼‰ã€‚<br><br>ã—ãŸãŒã£ã¦ã€è‘—ä½œè€…ã§ã‚ã‚‹ç”³ç«‹äººã¯è‘—ä½œæ¨©ã‚’æœ‰ã™ã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼‘ï¼—æ¡ï¼‘é …ï¼‰ã€‚<br><br>ã‚ˆã£ã¦ã€ç”³ç«‹äººã¯ã€ç›¸æ‰‹æ–¹ã«å¯¾ã—ã€æƒ…å ±æµé€šãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å‡¦æ³•ç¬¬ï¼˜æ¡ã€ç¬¬ï¼•æ¡ï¼‘é …ã«åŸºã¥ãã€åˆ¥ç´™ç™ºä¿¡è€…æƒ…å ±ç›®éŒ²è¨˜è¼‰ã®æƒ…å ±ã®é–‹ç¤ºã‚’æ±‚ã‚ã‚‹ã€‚</p>`,
            'retailsite': `<p style="margin-bottom: 20px; margin-left: 50px;">æœ¬ä»¶è‘—ä½œç‰©ã®è²©å£²ã‚µã‚¤ãƒˆï¼ˆç”²ï¼‘ï¼“ï¼‰ã®ãƒ¡ãƒ¼ã‚«ãƒ¼æ¬„ã«ç”³ç«‹äººã®åç§°ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã€‚ã“ã“ã«ã„ã†ã€Œãƒ¡ãƒ¼ã‚«ãƒ¼ã€ã¨ã¯ã€æœ¬ä»¶è‘—ä½œç‰©ã®è£½ä½œã«ãŠã„ã¦ç™ºæ„ã¨è²¬ä»»ã‚’æœ‰ã™ã‚‹è€…ã€ã™ãªã‚ã¡ã€æ˜ ç”»è£½ä½œè€…ã‚’æ„å‘³ã™ã‚‹ã€‚<br><br>ãã—ã¦ã€å½“è©²ãƒ¬ãƒ¼ãƒ™ãƒ«ã®ä½œå“ã®è‘—ä½œæ¨©ã¯ç”³ç«‹äººã«å¸°å±ã™ã‚‹æ—¨ãŒè²©å£²ã‚µã‚¤ãƒˆä¸Šã«å…¬è¡¨ã•ã‚Œã¦ã„ã‚‹ï¼ˆç”²ï¼‘ï¼”ï¼‰ã€‚å…¬è¡†ãŒåˆ©ç”¨ã™ã‚‹æœ¬ä»¶è‘—ä½œç‰©ã®è²©å£²ã‚µã‚¤ãƒˆã«ãŠã„ã¦ã€è™šå½ã®äº‹å®Ÿã‚’è¨˜è¼‰ã™ã‚‹ã“ã¨ã¯è€ƒãˆã«ãã„ãŸã‚ã€è¨˜è¼‰å†…å®¹ãŒçœŸå®Ÿã§ã‚ã‚‹ã‚‚ã®ã¨åˆç†çš„ã«æ¨èªã§ãã‚‹ã€‚<br><br>ä»¥ä¸Šã‚ˆã‚Šã€æœ¬ä»¶è‘—ä½œç‰©ã®è‘—ä½œæ¨©ã¯æ˜ ç”»è£½ä½œè€…ã§ã‚ã‚‹ç”³ç«‹äººã«å¸°å±ã™ã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’ï¼™æ¡ï¼‘é …ï¼‰ã€‚<br><br>ã‚ˆã£ã¦ã€ç”³ç«‹äººã¯ã€ç›¸æ‰‹æ–¹ã«å¯¾ã—ã€æƒ…å ±æµé€šãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å‡¦æ³•ç¬¬ï¼˜æ¡ã€ç¬¬ï¼•æ¡ï¼‘é …ã«åŸºã¥ãã€åˆ¥ç´™ç™ºä¿¡è€…æƒ…å ±ç›®éŒ²è¨˜è¼‰ã®æƒ…å ±ã®é–‹ç¤ºã‚’æ±‚ã‚ã‚‹ã€‚</p>`,
            'ethics': `<p style="margin-bottom: 20px; margin-left: 50px;">ã„ã‚ã‚†ã‚‹ã‚¢ãƒ€ãƒ«ãƒˆãƒ“ãƒ‡ã‚ªã¯æ€§çš„ãªå†…å®¹ã‚’å«ã‚€ã“ã¨ã‹ã‚‰ã€ç¬¬ä¸‰è€…æ©Ÿé–¢ã«ã‚ˆã‚‹å¯©æŸ»ã‚’å—ã‘ã€å½“è©²æ©Ÿé–¢ã®å¯©æŸ»åŸºæº–ã‚’ã‚¯ãƒªã‚¢ã—ã¦ã„ã‚‹ã“ã¨ãŒãã‚Œã‚’è²©å£²ã™ã‚‹ä¸Šã§ã¯é‡è¦ã¨ãªã‚‹ã€‚<br><br>æœ¬ä»¶è‘—ä½œç‰©ã«é–¢ã—ã¦ã‚‚ã€æ—¥æœ¬æ˜ åƒåˆ¶ä½œãƒ»è²©å£²å€«ç†æ©Ÿæ§‹ã®å¯©æŸ»ã‚’çµŒã¦ãŠã‚Šï¼ˆç”²ï¼‘ï¼”ï¼‰ã€ã“ã‚Œã‚’æœ¬ä»¶è‘—ä½œç‰©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸Šã«ã‚‚ç¤ºã—ã¦ã„ã‚‹ï¼ˆç”²ï¼‘ï¼“ï¼‰ã€‚<br><br>ä¸Šè¨˜ã®ã‚ˆã†ã«ã€ç¬¬ä¸‰è€…æ©Ÿé–¢ã«ã‚ˆã‚‹å¯©æŸ»ã‚’å—ã‘ã‚‹ã“ã¨ãŒæœ¬ä»¶è‘—ä½œç‰©ã‚’è²©å£²ã™ã‚‹ã“ã¨ã€ã™ãªã‚ã¡é ’å¸ƒæ¨©ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’ï¼–æ¡ï¼‰ã‚’è¡Œä½¿ã™ã‚‹ä¸Šã§é‡è¦ãªã®ã§ã‚ã‚Šã€ãã®ã‚ˆã†ãªé‡è¦ãªè¡Œç‚ºã‚’ç”³ç«‹äººåç¾©ã§è¡Œã£ã¦ã„ã‚‹ã®ã§ã‚ã‚‹ã‹ã‚‰ï¼ˆç”²ï¼‘ï¼”ï¼‰ã€å½“è©²äº‹å®Ÿã‹ã‚‰ã€ç”³ç«‹äººãŒè‘—ä½œæ¨©ã‚’æœ‰ã™ã‚‹ã“ã¨ãŒåˆç†çš„ã«æ¨èªã§ãã‚‹ã€‚<br><br>ã‚ˆã£ã¦ã€ç”³ç«‹äººã¯ã€ç›¸æ‰‹æ–¹ã«å¯¾ã—ã€æƒ…å ±æµé€šãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å‡¦æ³•ç¬¬ï¼˜æ¡ã€ç¬¬ï¼•æ¡ï¼‘é …ã«åŸºã¥ãã€åˆ¥ç´™ç™ºä¿¡è€…æƒ…å ±ç›®éŒ²è¨˜è¼‰ã®æƒ…å ±ã®é–‹ç¤ºã‚’æ±‚ã‚ã‚‹ã€‚</p>`,
            'multiple': `<p style="margin-bottom: 20px; margin-left: 50px;">æœ¬ä»¶è‘—ä½œç‰©ã¯ã€ç”³ç«‹å¤–ï¼»æ°åï¼¡ï¼½ï¼ˆä»¥ä¸‹ã€Œï¼»å‘¼ç§°ï¼¡ï¼½ã€ã¨ã„ã†ã€‚ï¼‰ã€ç”³ç«‹å¤–ï¼»æ°åï¼¢ï¼½ï¼ˆä»¥ä¸‹ã€Œï¼»å‘¼ç§°ï¼¢ï¼½ã€ã¨ã„ã†ã€‚ï¼‰åŠã³ç”³ç«‹å¤–ï¼»æ°åï¼£ï¼½ï¼ˆä»¥ä¸‹ã€Œï¼»å‘¼ç§°ï¼£ï¼½ã€ã¨ã„ã†ã€‚ï¼‰ã®ä¸‰è€…ãŒç›£ç£ã‚’å‹™ã‚ã€è£½ä½œã•ã‚ŒãŸã‚‚ã®ã§ã‚ã‚Šã€å…±åŒè‘—ä½œç‰©ã§ã‚ã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’æ¡ï¼‘é …ï¼‘ï¼’å·ï¼‰ã€‚<br><br>ã—ãŸãŒã£ã¦ã€æœ¬ä»¶è‘—ä½œç‰©ã®è‘—ä½œè€…ã¯ã€ï¼»å‘¼ç§°ï¼¡ï¼½ã€ï¼»å‘¼ç§°ï¼¢ï¼½åŠã³ï¼»å‘¼ç§°ï¼£ï¼½ã®ä¸‰è€…ã§ã‚ã‚‹ã¨ã„ã†ã“ã¨ã«ãªã‚‹ï¼ˆç”²ï¼‘ï¼”ï¼‰ã€‚<br><br>ã¾ãŸã€æœ¬ä»¶è‘—ä½œç‰©ã®è£½ä½œã«ãŠã„ã¦ã€è£½ä½œã™ã‚‹æ„æ€ã‚’æœ‰ã—ã€æ³•å¾‹ä¸Šã®æ¨©åˆ©ç¾©å‹™ãŒå¸°å±ã™ã‚‹ä¸»ä½“ã¨ã—ã¦ã€çµŒæ¸ˆçš„ãªè²»ç”¨ã®è² æ‹…ã‚’ã—ãŸã®ã¯ç”³ç«‹äººã§ã‚ã‚‹ã€‚ã—ãŸãŒã£ã¦ã€ç”³ç«‹äººã¯æœ¬ä»¶è‘—ä½œç‰©ã®æ˜ ç”»è£½ä½œè€…ã«ã‚ãŸã‚‹ã€‚<br><br>ï¼»å‘¼ç§°ï¼¡ï¼½ã€ï¼»å‘¼ç§°ï¼¢ï¼½åŠã³ï¼»å‘¼ç§°ï¼£ï¼½ã¯ã€ç”³ç«‹äººã«å¯¾ã—ã¦ã€æœ¬ä»¶è‘—ä½œç‰©ã®è£½ä½œã«å‚åŠ ç´„æŸã‚’ã—ã¦ã„ãŸã€‚<br><br>ä»¥ä¸Šã‚ˆã‚Šã€ç”³ç«‹äººã¯æ˜ ç”»è£½ä½œè€…ã¨ã—ã¦ã€æœ¬ä»¶è‘—ä½œç‰©ã®è‘—ä½œæ¨©ã‚’æœ‰ã™ã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’ï¼™æ¡ï¼‘é …ã€‚ç”²ï¼‘ï¼”ï¼‰ã€‚<br><br>ã‚ˆã£ã¦ã€ç”³ç«‹äººã¯ã€ç›¸æ‰‹æ–¹ã«å¯¾ã—ã€æƒ…å ±æµé€šãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å‡¦æ³•ç¬¬ï¼˜æ¡ã€ç¬¬ï¼•æ¡ï¼‘é …ã«åŸºã¥ãã€åˆ¥ç´™ç™ºä¿¡è€…æƒ…å ±ç›®éŒ²è¨˜è¼‰ã®æƒ…å ±ã®é–‹ç¤ºã‚’æ±‚ã‚ã‚‹ã€‚</p>`,
            'commission': `<p style="margin-bottom: 20px; margin-left: 50px;">ç”³ç«‹äººã¯æœ¬ä»¶è‘—ä½œç‰©ã®è£½ä½œã«ç™ºæ„ã¨è²¬ä»»ã‚’æœ‰ã™ã‚‹è€…ã§ã‚ã‚Šã€æ˜ ç”»è£½ä½œè€…ã«ã‚ãŸã‚‹ã€‚ã—ãŸãŒã£ã¦ã€ç”³ç«‹äººã¯æ˜ ç”»è£½ä½œè€…ã¨ã—ã¦è‘—ä½œæ¨©ã‚’æœ‰ã™ã‚‹ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’ï¼™æ¡ï¼‘é …ï¼‰ã€‚<br><br>ã“ã®ã“ã¨ã¯ç”³ç«‹äººãŒç”³ç«‹å¤–ï¼»ä¼šç¤¾åï¼½ã«å¯¾ã—ã¦è²©å£²ã‚’å§”è¨—ã—ã¦ã„ã‚‹ã“ã¨ã‹ã‚‰æ˜ã‚‰ã‹ã§ã‚ã‚‹ï¼ˆç”²ï¼‘ï¼•ï¼‰ã€‚é ’å¸ƒæ¨©ã¯æ˜ ç”»è£½ä½œè€…ãŒå æœ‰ã™ã‚‹ã®ã§ã‚ã‚Šï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼’ï¼–æ¡ï¼‰ã€å½“è©²æ¨©åˆ©ã®åˆ©ç”¨è¨±è«¾ï¼ˆè‘—ä½œæ¨©æ³•ç¬¬ï¼–ï¼“æ¡ï¼‰ã‚’ç”³ç«‹äººãŒç”³ç«‹å¤–ï¼»ä¼šç¤¾åï¼½ã«å¯¾ã—ã¦ä¸ãˆã¦ã„ã‚‹ã®ã§ã‚ã‚‹ã‹ã‚‰ã€ç”³ç«‹äººãŒè‘—ä½œæ¨©è€…ã§ã‚ã‚‹ã“ã¨ãŒåˆç†çš„ã«æ¨èªã§ãã‚‹ã€‚<br><br>ã‚ˆã£ã¦ã€ç”³ç«‹äººã¯ã€ç›¸æ‰‹æ–¹ã«å¯¾ã—ã€æƒ…å ±æµé€šãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å‡¦æ³•ç¬¬ï¼˜æ¡ã€ç¬¬ï¼•æ¡ï¼‘é …ã«åŸºã¥ãã€åˆ¥ç´™ç™ºä¿¡è€…æƒ…å ±ç›®éŒ²è¨˜è¼‰ã®æƒ…å ±ã®é–‹ç¤ºã‚’æ±‚ã‚ã‚‹ã€‚</p>`
        };
        return sections[pattern] || `<p style="margin-bottom: 20px; margin-left: 50px;">ç”³ç«‹äººã¯ã€æœ¬ä»¶è‘—ä½œç‰©ï¼ˆç”²ï¼‘ï¼“ï¼‰ã®è‘—ä½œæ¨©è€…ã§ã‚ã‚‹ã€‚<br><br>ã‚ˆã£ã¦ã€ç”³ç«‹äººã¯ã€ç›¸æ‰‹æ–¹ã«å¯¾ã—ã€æƒ…å ±æµé€šãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å‡¦æ³•ç¬¬ï¼˜æ¡ã€ç¬¬ï¼•æ¡ï¼‘é …ã«åŸºã¥ãã€åˆ¥ç´™ç™ºä¿¡è€…æƒ…å ±ç›®éŒ²è¨˜è¼‰ã®æƒ…å ±ã®é–‹ç¤ºã‚’æ±‚ã‚ã‚‹ã€‚</p>`;
    }

    function generateEvidenceStatement() {
        // ãƒ­ã‚°è¨˜éŒ²
        logAction('evidence_generated', {
            label: 'è¨¼æ‹ èª¬æ˜æ›¸è‡ªå‹•ç”Ÿæˆ',
            timestamp: new Date().toISOString()
        });
        
        const preview = document.getElementById('evidencePreview');
        const cs = 'border:1px solid #000;padding:6px 8px;vertical-align:top;color:#000';
        const today = new Date();
        const year = today.getFullYear() - 2018; // ä»¤å’Œæ›ç®—
        preview.innerHTML = `
            <div style="font-family: 'Hiragino Mincho ProN', 'Yu Mincho', serif; font-size: 11px; line-height: 1.7; color: #1e293b;">
                <p style="text-align: right; margin-bottom: 10px; font-size: 10px; color: #6b7280;">ä»¤å’Œ${year}å¹´ï¼ˆç™ºãƒï¼‰ç¬¬â—‹â—‹â—‹å·</p>
                <p style="text-align: center; margin-bottom: 4px; font-weight: 600;">ç™ºä¿¡è€…æƒ…å ±é–‹ç¤ºå‘½ä»¤ç”³ç«‹äº‹ä»¶</p>
                <p style="text-align: center; margin-bottom: 16px; font-weight: 600;">æ¶ˆå»ç¦æ­¢å‘½ä»¤ç”³ç«‹äº‹ä»¶</p>
                <table style="width:auto; margin: 0 auto 16px; border:none; font-size:11px;">
                    <tr><td style="padding:3px 20px; border:none; color:#6b7280;">ç”³ç«‹äºº</td><td style="padding:3px 10px; border:none; font-weight: 500;">æ ªå¼ä¼šç¤¾ãƒŠãƒãƒ¥</td></tr>
                    <tr><td style="padding:3px 20px; border:none; color:#6b7280;">ç›¸æ‰‹æ–¹</td><td style="padding:3px 10px; border:none; font-weight: 500;">KDDIæ ªå¼ä¼šç¤¾</td></tr>
                </table>
                <h3 style="text-align: center; margin: 20px 0 14px; font-size: 15px; letter-spacing: 0.2em; font-weight: 700;">è¨¼ æ‹  èª¬ æ˜ æ›¸</h3>
                <p style="text-align: right; margin-bottom: 8px; font-size: 10px; color: #6b7280;">ä»¤å’Œâ—‹å¹´â—‹æœˆâ—‹æ—¥</p>
                <p style="text-align: right; margin-bottom: 20px; font-size: 10px; color: #6b7280; line-height: 1.6;">æ±äº¬åœ°æ–¹è£åˆ¤æ‰€ æ°‘äº‹ç¬¬â—‹éƒ¨ å¾¡ä¸­<br>ç”³ç«‹äººè¨´è¨Ÿä»£ç†äººå¼è­·å£«ã€€æˆ¸ç”° æ³‰</p>
                <table style="width: 100%; border-collapse: collapse; font-size: 10px; margin-top: 8px;">
                    <thead><tr style="background-color: #f3f4f6;">
                        <th style="${cs}; width:50px; text-align:center; font-weight: 600;">å·è¨¼</th>
                        <th style="${cs}; text-align:center; font-weight: 600;">æ¨™ç›®</th>
                        <th style="${cs}; width:46px; text-align:center; font-weight: 600;">åŸæœ¬<br>/å†™ã—</th>
                        <th style="${cs}; width:72px; text-align:center; font-weight: 600;">ä½œæˆå¹´æœˆæ—¥</th>
                        <th style="${cs}; width:70px; text-align:center; font-weight: 600;">ä½œæˆè€…</th>
                        <th style="${cs}; text-align:center; font-weight: 600;">ç«‹è¨¼è¶£æ—¨</th>
                    </tr></thead>
                    <tbody>
                        <tr>
                            <td style="${cs}; text-align:center">ç”²ï¼‘</td>
                            <td style="${cs}">æœ¬ä»¶è‘—ä½œç‰©ã®å‹•ç”»ã‚’æ’®å½±ã—ãŸæ›¸é¢</td>
                            <td style="${cs}; text-align:center">å†™ã—</td>
                            <td style="${cs}; text-align:center">R8.1.7</td>
                            <td style="${cs}">ç”³ç«‹äºº</td>
                            <td style="${cs}">æœ¬ä»¶è‘—ä½œç‰©ï¼ˆè‘—ä½œç‰©ç›®éŒ²è¨˜è¼‰ã®å‹•ç”»ï¼‰ã®å†…å®¹ã‚’æ˜ã‚‰ã‹ã«ã™ã‚‹ã‚‚ã®ã€‚ç”³ç«‹äººãŒè‘—ä½œæ¨©ã‚’æœ‰ã™ã‚‹å‹•ç”»ã®å…·ä½“çš„å†…å®¹ã‚’ç¤ºã™ã€‚</td>
                        </tr>
                        <tr>
                            <td style="${cs}; text-align:center">ç”²ï¼’</td>
                            <td style="${cs}">ä¾µå®³å‹•ç”»ã‚’æ’®å½±ã—ãŸæ›¸é¢</td>
                            <td style="${cs}; text-align:center">å†™ã—</td>
                            <td style="${cs}; text-align:center">ä¸æ˜</td>
                            <td style="${cs}">æœ¬ä»¶å„ç™ºä¿¡è€…</td>
                            <td style="${cs}">BitTorrentãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã§å…¬è¡†é€ä¿¡ã•ã‚Œã¦ã„ãŸä¾µå®³å‹•ç”»ã®å†…å®¹ã‚’æ˜ã‚‰ã‹ã«ã™ã‚‹ã‚‚ã®ã€‚ç”²ï¼‘ã®è‘—ä½œç‰©ã¨åŒä¸€åˆã¯é¡ä¼¼ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã™ã€‚</td>
                        </tr>
                        <tr>
                            <td style="${cs}; text-align:center">ç”²ï¼“</td>
                            <td style="${cs}">BTç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ver2æŠ€è¡“èª¬æ˜æ›¸</td>
                            <td style="${cs}; text-align:center">å†™ã—</td>
                            <td style="${cs}; text-align:center">R5.6.15</td>
                            <td style="${cs}">HDRå‰ç”°</td>
                            <td style="${cs}">BitTorrentãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ãŠã‘ã‚‹ä¾µå®³ãƒ”ã‚¢ã®æ¤œå‡ºã«ä½¿ç”¨ã™ã‚‹ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ï¼ˆver2ï¼‰ã®æŠ€è¡“çš„æ§‹æˆãƒ»å‹•ä½œåŸç†ã‚’èª¬æ˜ã™ã‚‹ã‚‚ã®ã€‚å½“è©²ã‚·ã‚¹ãƒ†ãƒ ã®ä¿¡é ¼æ€§ã®åŸºç¤ã¨ãªã‚‹æŠ€è¡“çš„ä»•æ§˜ã‚’æ˜ã‚‰ã‹ã«ã™ã‚‹ã€‚</td>
                        </tr>
                        <tr>
                            <td style="${cs}; text-align:center">ç”²ï¼”</td>
                            <td style="${cs}">é™³è¿°æ›¸ï¼ˆBTç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ver2ã®ä¿¡é ¼æ€§ã«ã¤ã„ã¦ï¼‰</td>
                            <td style="${cs}; text-align:center">å†™ã—</td>
                            <td style="${cs}; text-align:center">R5.6.15</td>
                            <td style="${cs}">HDRå‰ç”°</td>
                            <td style="${cs}">BTç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ver2ãŒæ­£ç¢ºã«BitTorrentãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«åŸºã¥ãé€šä¿¡ã‚’ç›£è¦–ã—ã€ä¾µå®³ãƒ”ã‚¢ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ãƒ»ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ç­‰ã‚’æ­£ç¢ºã«è¨˜éŒ²ã§ãã‚‹ã“ã¨ã®ä¿¡é ¼æ€§ã‚’é™³è¿°ã™ã‚‹ã‚‚ã®ã€‚</td>
                        </tr>
                        <tr>
                            <td style="${cs}; text-align:center">ç”²ï¼•</td>
                            <td style="${cs}">å ±å‘Šæ›¸ï¼ˆã‚·ã‚¹ãƒ†ãƒ ã®æ¤œè¨¼çµæœï¼‰</td>
                            <td style="${cs}; text-align:center">å†™ã—</td>
                            <td style="${cs}; text-align:center">R5.8.22</td>
                            <td style="${cs}">HDRå‰ç”°</td>
                            <td style="${cs}">BTç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ver2ã«ã¤ã„ã¦ç¬¬ä¸‰è€…ã«ã‚ˆã‚‹æ¤œè¨¼ã‚’è¡Œã„ã€ä¾µå®³ãƒ”ã‚¢ã®ç‰¹å®šçµæœãŒæ­£ç¢ºã§ã‚ã‚‹ã“ã¨ã€IPã‚¢ãƒ‰ãƒ¬ã‚¹ã®å–å¾—ã«èª¤ã‚ŠãŒãªã„ã“ã¨ã‚’ç¢ºèªã—ãŸæ¤œè¨¼çµæœã‚’å ±å‘Šã™ã‚‹ã‚‚ã®ã€‚</td>
                        </tr>
                        <tr>
                            <td style="${cs}; text-align:center">ç”²ï¼–</td>
                            <td style="${cs}">å ±å‘Šæ›¸ï¼ˆãƒ”ãƒ¼ã‚¹é€ä¿¡ã«ã¤ã„ã¦ã®æ¤œè¨¼ï¼‰</td>
                            <td style="${cs}; text-align:center">å†™ã—</td>
                            <td style="${cs}; text-align:center">R5.9.10</td>
                            <td style="${cs}">HDRå‰ç”°</td>
                            <td style="${cs}">BitTorrentãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«ãŠã‘ã‚‹ãƒ”ãƒ¼ã‚¹ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã®æ–­ç‰‡ï¼‰ã®é€ä¿¡å‹•ä½œã‚’æ¤œè¨¼ã—ã€ç™ºä¿¡è€…ãŒå®Ÿéš›ã«ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€éƒ¨ã‚’ä»–ã®ãƒ”ã‚¢ã«å¯¾ã—ã¦é€ä¿¡ï¼ˆå…¬è¡†é€ä¿¡ï¼‰ã—ã¦ã„ã‚‹ã“ã¨ã‚’æŠ€è¡“çš„ã«ç¢ºèªã™ã‚‹ã‚‚ã®ã€‚</td>
                        </tr>
                        <tr>
                            <td style="${cs}; text-align:center">ç”²ï¼—</td>
                            <td style="${cs}">é™³è¿°æ›¸ï¼ˆé€šä¿¡ã®ç§˜å¯†ã«ã¤ã„ã¦ï¼‰</td>
                            <td style="${cs}; text-align:center">å†™ã—</td>
                            <td style="${cs}; text-align:center">R5.10.3</td>
                            <td style="${cs}">HDRå‰ç”°</td>
                            <td style="${cs}">BTç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚‹IPã‚¢ãƒ‰ãƒ¬ã‚¹ã®å–å¾—ãŒã€BitTorrentãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®ä»•çµ„ã¿ã«åŸºã¥ãå…¬é–‹æƒ…å ±ã®å–å¾—ã§ã‚ã‚Šã€é›»æ°—é€šä¿¡äº‹æ¥­æ³•ä¸Šã®é€šä¿¡ã®ç§˜å¯†ã‚’ä¾µå®³ã™ã‚‹ã‚‚ã®ã§ã¯ãªã„ã“ã¨ã‚’é™³è¿°ã™ã‚‹ã‚‚ã®ã€‚</td>
                        </tr>
                        <tr>
                            <td style="${cs}; text-align:center">ç”²ï¼˜</td>
                            <td style="${cs}">å ±å‘Šæ›¸ï¼ˆä¾µå®³å‹•ç”»ã®ãƒ•ã‚¡ã‚¤ãƒ«åç§°ã«ã¤ã„ã¦ï¼‰</td>
                            <td style="${cs}; text-align:center">å†™ã—</td>
                            <td style="${cs}; text-align:center">R5.11.18</td>
                            <td style="${cs}">HDRå‰ç”°</td>
                            <td style="${cs}">BitTorrentãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã§æµé€šã™ã‚‹ä¾µå®³å‹•ç”»ã®ãƒ•ã‚¡ã‚¤ãƒ«åç§°ã‹ã‚‰ã€å½“è©²ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”³ç«‹äººã®è‘—ä½œç‰©ã«ä¿‚ã‚‹ã‚‚ã®ã§ã‚ã‚‹ã“ã¨ã‚’ç‰¹å®šã§ãã‚‹ã“ã¨ã‚’èª¬æ˜ã™ã‚‹ã‚‚ã®ã€‚ãƒ•ã‚¡ã‚¤ãƒ«åã«å«ã¾ã‚Œã‚‹å“ç•ªãƒ»ã‚¿ã‚¤ãƒˆãƒ«æƒ…å ±ç­‰ã¨ã®ç…§åˆçµæœã‚’ç¤ºã™ã€‚</td>
                        </tr>
                        <tr>
                            <td style="${cs}; text-align:center">ç”²ï¼™</td>
                            <td style="${cs}">å ±å‘Šæ›¸ï¼ˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ã®ä¿¡é ¼æ€§ã«ã¤ã„ã¦ï¼‰</td>
                            <td style="${cs}; text-align:center">å†™ã—</td>
                            <td style="${cs}; text-align:center">R6.1.11</td>
                            <td style="${cs}">HDRå‰ç”°</td>
                            <td style="${cs}">BTç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ãŒå–å¾—ã—ãŸIPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒã€å®Ÿéš›ã®ç™ºä¿¡è€…ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ä¸€è‡´ã™ã‚‹ã“ã¨ã®ä¿¡é ¼æ€§ã‚’æ¤œè¨¼ãƒ»èª¬æ˜ã™ã‚‹ã‚‚ã®ã€‚VPNãƒ»ãƒ—ãƒ­ã‚­ã‚·ç­‰ã«ã‚ˆã‚‹å½è£…ã®å¯èƒ½æ€§ã«ã¤ã„ã¦ã‚‚æ¤œè¨ã—ãŸçµæœã‚’ç¤ºã™ã€‚</td>
                        </tr>
                        <tr>
                            <td style="${cs}; text-align:center">ç”²ï¼‘ï¼</td>
                            <td style="${cs}">ãƒ‘ã‚½ã‚³ãƒ³ã®ç”»é¢ã‚’å°åˆ·ã—ãŸæ›¸é¢ï¼ˆDBè¨˜éŒ²ï¼‰</td>
                            <td style="${cs}; text-align:center">å†™ã—</td>
                            <td style="${cs}; text-align:center">R8.1.7</td>
                            <td style="${cs}">HDRå‰ç”°</td>
                            <td style="${cs}">BTç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ver2ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«è¨˜éŒ²ã•ã‚ŒãŸä¾µå®³ãƒ”ã‚¢ã®æ¤œå‡ºè¨˜éŒ²ã‚’ç”»é¢è¡¨ç¤ºã—å°åˆ·ã—ãŸã‚‚ã®ã€‚å„ç™ºä¿¡è€…ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãƒãƒ¼ãƒˆç•ªå·ã€æ¤œå‡ºæ—¥æ™‚ï¼ˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼‰ã€å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¤ãƒ³ãƒ•ã‚©ãƒãƒƒã‚·ãƒ¥ç­‰ã®æƒ…å ±ã‚’å«ã‚€ã€‚åˆ¥ç´™ç™ºä¿¡è€…æƒ…å ±ç›®éŒ²è¨˜è¼‰ã®å„ç™ºä¿¡è€…ã«å¯¾å¿œã™ã‚‹ã€‚</td>
                        </tr>
                        <tr>
                            <td style="${cs}; text-align:center">ç”²ï¼‘ï¼‘</td>
                            <td style="${cs}">å†ç”Ÿè©¦é¨“çµæœå ±å‘Šæ›¸</td>
                            <td style="${cs}; text-align:center">å†™ã—</td>
                            <td style="${cs}; text-align:center">R7.12.25</td>
                            <td style="${cs}">HDRå‰ç”°</td>
                            <td style="${cs}">BitTorrentãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‹ã‚‰å–å¾—ã—ãŸä¾µå®³ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¤ã„ã¦å†ç”Ÿè©¦é¨“ã‚’å®Ÿæ–½ã—ã€å½“è©²ãƒ•ã‚¡ã‚¤ãƒ«ãŒå®Ÿéš›ã«å†ç”Ÿå¯èƒ½ãªå‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚ã‚‹ã“ã¨ã€åŠã³ãã®å†…å®¹ãŒç”²ï¼‘ã®è‘—ä½œç‰©ã¨åŒä¸€åˆã¯å®Ÿè³ªçš„ã«åŒä¸€ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ãŸçµæœã‚’å ±å‘Šã™ã‚‹ã‚‚ã®ã€‚å„ãƒ”ãƒ¼ã‚¹ãƒªã‚¹ãƒˆï¼ˆPLï¼‰ã«å¯¾å¿œã™ã‚‹å†ç”Ÿçµæœã‚’å«ã‚€ã€‚</td>
                        </tr>
                        <tr>
                            <td style="${cs}; text-align:center">ç”²ï¼‘ï¼’</td>
                            <td style="${cs}">å ±å‘Šæ›¸ï¼ˆå†ç”Ÿè©¦é¨“ã®æ–¹æ³•ã«ã¤ã„ã¦ï¼‰</td>
                            <td style="${cs}; text-align:center">å†™ã—</td>
                            <td style="${cs}; text-align:center">R6.1.11</td>
                            <td style="${cs}">HDRå‰ç”°</td>
                            <td style="${cs}">ç”²ï¼‘ï¼‘ã®å†ç”Ÿè©¦é¨“ã§ä½¿ç”¨ã—ãŸè©¦é¨“æ–¹æ³•ãƒ»æ‰‹é †ã‚’è©³ç´°ã«èª¬æ˜ã™ã‚‹ã‚‚ã®ã€‚BitTorrentã‹ã‚‰å–å¾—ã—ãŸãƒ”ãƒ¼ã‚¹ã®å†æ§‹æˆæ–¹æ³•ã€å†ç”Ÿã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ç¨®é¡ã€å†ç”Ÿå¯å¦ã®åˆ¤å®šåŸºæº–ç­‰ã‚’æ˜ã‚‰ã‹ã«ã—ã€å†ç”Ÿè©¦é¨“ã®ä¿¡é ¼æ€§ã‚’æ‹…ä¿ã™ã‚‹ã€‚</td>
                        </tr>
                        <tr>
                            <td style="${cs}; text-align:center">ç”²ï¼‘ï¼“</td>
                            <td style="${cs}">æœ¬ä»¶è‘—ä½œç‰©ã®DVDã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å°åˆ·ã—ãŸæ›¸é¢</td>
                            <td style="${cs}; text-align:center">å†™ã—</td>
                            <td style="${cs}; text-align:center">R8.1.7</td>
                            <td style="${cs}">ç”³ç«‹äºº</td>
                            <td style="${cs}">æœ¬ä»¶è‘—ä½œç‰©ã«ä¿‚ã‚‹DVDå•†å“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¡¨é¢ã‚’å°åˆ·ã—ãŸã‚‚ã®ã€‚ç”³ç«‹äººã®åç§°ãŒè‘—ä½œæ¨©è€…ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã¦ãŠã‚Šã€ç”³ç«‹äººãŒæœ¬ä»¶è‘—ä½œç‰©ã®è‘—ä½œæ¨©è€…ã§ã‚ã‚‹ã“ã¨ã‚’ç«‹è¨¼ã™ã‚‹ã€‚</td>
                        </tr>
                        </tbody>
                </table>
                <p style="margin-top: 20px; font-size: 10px; color: #374151; text-align: right; font-weight: 500;">ä»¥ ä¸Š</p>
                <div style="margin-top: 30px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
                    <p style="font-size: 9px; color: #9ca3af; text-align: center;">ã“ã®è¨¼æ‹ èª¬æ˜æ›¸ã¯ç”³ç«‹æ›¸ä½œæˆç®¡ç†ã‚»ãƒ³ã‚¿ãƒ¼ã«ã‚ˆã‚Šè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã—ãŸ</p>
                </div>
            </div>`;
    }

    let isEditMode = false;
    let editedContent = '';
    
    // ç·¨é›†ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ
    function toggleEditMode() {
        const viewContent = document.getElementById('applicationViewContent');
        const editArea = document.getElementById('applicationEditArea');
        const toggleBtn = document.getElementById('toggleEditBtn');
        const saveBtn = document.getElementById('saveContentBtn');
        const indicator = document.getElementById('editModeIndicator');
        const btnIcon = document.getElementById('editBtnIcon');
        const btnText = document.getElementById('editBtnText');
        
        isEditMode = !isEditMode;
        
        if (isEditMode) {
            // ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ
            // HTMLã‹ã‚‰ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«å¤‰æ›
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = currentApplicationContent;
            const plainText = tempDiv.textContent || tempDiv.innerText || '';
            
            editArea.value = plainText.trim();
            viewContent.style.display = 'none';
            editArea.style.display = 'block';
            saveBtn.style.display = 'inline-flex';
            indicator.style.display = 'inline-block';
            
            toggleBtn.style.background = '#6b7280';
            toggleBtn.style.borderColor = '#4b5563';
            btnIcon.textContent = 'ğŸ‘ï¸';
            btnText.textContent = 'ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼';
            
            // ãƒ­ã‚°è¨˜éŒ²
            logAction('edit_mode_enabled', {
                label: 'ç”³ç«‹æ›¸ç·¨é›†ãƒ¢ãƒ¼ãƒ‰é–‹å§‹',
                documentTitle: currentApplicationTitle
            });
        } else {
            // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ
            viewContent.style.display = 'block';
            editArea.style.display = 'none';
            saveBtn.style.display = 'none';
            indicator.style.display = 'none';
            
            toggleBtn.style.background = '#10b981';
            toggleBtn.style.borderColor = '#059669';
            btnIcon.textContent = 'âœï¸';
            btnText.textContent = 'ç·¨é›†ãƒ¢ãƒ¼ãƒ‰';
            
            // ãƒ­ã‚°è¨˜éŒ²
            logAction('edit_mode_disabled', {
                label: 'ç”³ç«‹æ›¸ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ‰',
                documentTitle: currentApplicationTitle
            });
        }
    }
    
    // ç·¨é›†å†…å®¹ã‚’ä¿å­˜
    function saveEditedContent() {
        const editArea = document.getElementById('applicationEditArea');
        const viewContent = document.getElementById('applicationViewContent');
        
        if (!editArea.value.trim()) {
            alert('ä¿å­˜ã™ã‚‹å†…å®¹ãŒã‚ã‚Šã¾ã›ã‚“');
            return;
        }
        
        editedContent = editArea.value;
        
        // ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’HTMLã«å¤‰æ›ï¼ˆæ”¹è¡Œã‚’<br>ã«ï¼‰
        const htmlContent = editedContent
            .split('\n')
            .map(line => `<p style="margin: 8px 0; line-height: 1.8;">${line || '&nbsp;'}</p>`)
            .join('');
        
        currentApplicationContent = `<div style="max-width: 900px; margin: 0 auto;">${htmlContent}</div>`;
        viewContent.innerHTML = `<div style="line-height: 1.8; color: #333;">${currentApplicationContent}</div>`;
        
        // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
        try {
            const savedDocuments = JSON.parse(localStorage.getItem('lnmake_saved_documents') || '{}');
            const docId = `doc_${currentApplicationTitle}_${Date.now()}`;
            savedDocuments[docId] = {
                title: currentApplicationTitle,
                content: editedContent,
                htmlContent: currentApplicationContent,
                appealType: currentAppealType,
                savedAt: new Date().toISOString(),
                lastModified: new Date().toISOString()
            };
            localStorage.setItem('lnmake_saved_documents', JSON.stringify(savedDocuments));
            
            // ä¿å­˜æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
            showActionNotification({
                type: 'content_saved',
                data: {
                    label: 'ç”³ç«‹æ›¸ã‚’ä¿å­˜ã—ã¾ã—ãŸ',
                    docId: docId
                }
            });
            
            // ãƒ­ã‚°è¨˜éŒ²
            logAction('content_saved', {
                label: 'ç”³ç«‹æ›¸å†…å®¹ã‚’ä¿å­˜',
                documentTitle: currentApplicationTitle,
                contentLength: editedContent.length,
                docId: docId
            });
            
            console.log('âœ“ ç”³ç«‹æ›¸ã‚’ä¿å­˜ã—ã¾ã—ãŸ:', docId);
        } catch (e) {
            console.error('ä¿å­˜ã«å¤±æ•—:', e);
            alert('ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + e.message);
        }
        
        // ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã‚’ç¶­æŒ
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¼•ãç¶šãç·¨é›†ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
    }
    
    function goBack() {
        const mainContent = document.getElementById('mainContent');
        const appViewContainer = document.getElementById('applicationViewContainer');
        
        if (!mainContent || !appViewContainer) {
            console.error('goBack: Required elements not found');
            return;
        }
        
        // ç·¨é›†ä¸­ã®å ´åˆã¯ç¢ºèª
        if (isEditMode) {
            const editArea = document.getElementById('applicationEditArea');
            if (editArea.value !== editedContent && editArea.value.trim() !== '') {
                if (!confirm('ç·¨é›†ä¸­ã®å†…å®¹ãŒä¿å­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚æˆ»ã‚Šã¾ã™ã‹ï¼Ÿ')) {
                    return;
                }
            }
        }
        
        // ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã‚’ãƒªã‚»ãƒƒãƒˆ
        isEditMode = false;
        editedContent = '';
        const viewContent = document.getElementById('applicationViewContent');
        const editArea = document.getElementById('applicationEditArea');
        const toggleBtn = document.getElementById('toggleEditBtn');
        const saveBtn = document.getElementById('saveContentBtn');
        const indicator = document.getElementById('editModeIndicator');
        
        viewContent.style.display = 'block';
        editArea.style.display = 'none';
        saveBtn.style.display = 'none';
        indicator.style.display = 'none';
        toggleBtn.style.background = '#10b981';
        toggleBtn.style.borderColor = '#059669';
        document.getElementById('editBtnIcon').textContent = 'âœï¸';
        document.getElementById('editBtnText').textContent = 'ç·¨é›†ãƒ¢ãƒ¼ãƒ‰';
        
        // ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆåŠ¹æœ
        appViewContainer.style.transition = 'opacity 0.2s ease';
        appViewContainer.style.opacity = '0';
        
        setTimeout(() => {
            mainContent.style.display = 'block';
            appViewContainer.style.display = 'none';
            appViewContainer.style.opacity = '1';
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            // ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³åŠ¹æœ
            mainContent.style.opacity = '0';
            mainContent.style.transition = 'opacity 0.3s ease';
            setTimeout(() => {
                mainContent.style.opacity = '1';
            }, 10);
        }, 200);
    }

    function downloadDocument() {
        if (!currentApplicationTitle || !currentApplicationContent) {
            alert('å…ˆã«ç”³ç«‹æ›¸ã‚’ä½œæˆã—ã¦ãã ã•ã„');
            return;
        }
        
        const contentEl = document.getElementById('applicationViewContent');
        if (!contentEl) {
            alert('ç”³ç«‹æ›¸ã®å†…å®¹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            return;
        }
        
        const text = contentEl.innerText;
        if (!text || text.trim().length === 0) {
            alert('ç”³ç«‹æ›¸ã®å†…å®¹ãŒç©ºã§ã™');
            return;
        }
        
        try {
            const today = new Date();
            const dateStr = `${today.getFullYear()}${('0' + (today.getMonth() + 1)).slice(-2)}${('0' + today.getDate()).slice(-2)}`;
            const filename = `${currentApplicationTitle}_${dateStr}.txt`;
            
            const el = document.createElement('a');
            el.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
            el.setAttribute('download', filename);
            el.style.display = 'none';
            document.body.appendChild(el); 
            el.click(); 
            document.body.removeChild(el);
            
            // ãƒ­ã‚°è¨˜éŒ²
            logAction('document_downloaded', {
                label: 'ãƒ†ã‚­ã‚¹ãƒˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰',
                fileName: filename,
                fileSize: text.length
            });
        } catch (err) {
            console.error('ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼:', err);
            alert('ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ' + err.message);
        }
    }

    function exportWord() {
        if (typeof window.docx === 'undefined') {
            alert('Wordå‡ºåŠ›ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚');
            return;
        }
        if (!currentApplicationTitle || !currentApplicationContent) {
            alert('å…ˆã«ç”³ç«‹æ›¸ã‚’ä½œæˆã—ã¦ãã ã•ã„');
            return;
        }
        
        try {
            const { Document, Packer, Paragraph, TextRun, AlignmentType } = window.docx;
            const contentText = document.getElementById('applicationViewContent').innerText;
            const sections = contentText.split('\n').map(line =>
                new Paragraph({ 
                    text: line || ' ', 
                    alignment: line.includes('ä»¤å’Œ') || line.includes('å¾¡ä¸­') ? AlignmentType.RIGHT : 
                               line.includes('å½“äº‹è€…ç›®éŒ²') || line.includes('ç™ºä¿¡è€…æƒ…å ±') ? AlignmentType.CENTER : 
                               AlignmentType.LEFT, 
                    spacing: { line: 360 } 
                })
            );
            const doc = new Document({ 
                sections: [{ 
                    properties: { 
                        page: { 
                            margin: { 
                                top: 1440, 
                                right: 1440, 
                                bottom: 1440, 
                                left: 1440 
                            } 
                        } 
                    }, 
                    children: sections 
                }] 
            });
            Packer.toBlob(doc).then(blob => { 
                if (typeof saveAs !== 'undefined') {
                    const filename = currentApplicationTitle + '.docx';
                    saveAs(blob, filename); 
                    
                    // ãƒ­ã‚°è¨˜éŒ²
                    logAction('document_downloaded', {
                        label: 'Wordå‡ºåŠ›',
                        fileName: filename,
                        fileType: 'docx'
                    });
                } else {
                    alert('FileSaverãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚');
                }
            }).catch(err => {
                console.error('Wordå‡ºåŠ›ã‚¨ãƒ©ãƒ¼:', err);
                alert('Wordå‡ºåŠ›ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ' + err.message);
            });
        } catch (err) {
            console.error('Wordå‡ºåŠ›ã‚¨ãƒ©ãƒ¼:', err);
            alert('Wordå‡ºåŠ›ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ' + err.message);
        }
    }

    function downloadEvidencePDF() {
        const preview = document.getElementById('evidencePreview');
        if (preview.innerHTML.includes('ç”Ÿæˆå†…å®¹ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™')) { 
            alert('å…ˆã«ã€Œè‡ªå‹•ç”Ÿæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„'); 
            return; 
        }
        const w = window.open('', '', 'width=900,height=700');
        if (!w) {
            alert('ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã§ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’è¨±å¯ã—ã¦ãã ã•ã„ã€‚');
            return;
        }
        w.document.write(`<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><title>è¨¼æ‹ èª¬æ˜æ›¸ - å°åˆ·ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</title><style>body{font-family:'Hiragino Mincho ProN','Yu Mincho',serif;margin:20mm;line-height:1.6;color:#000;background:#fff;font-size:11px}table{width:100%;border-collapse:collapse;margin:16px 0}th,td{border:1px solid #000;padding:6px 8px;text-align:left;color:#000;vertical-align:top}th{background:#f5f5f5;text-align:center;font-weight:600}h3{text-align:center;margin:24px 0 16px;font-size:14px;letter-spacing:0.15em}p{margin:8px 0}strong{font-weight:600}@media print{body{background:#fff;color:#000;-webkit-print-color-adjust:exact;print-color-adjust:exact}th,td{color:#000;border-color:#000}th{background:#f5f5f5!important}@page{margin:20mm;size:A4 portrait}}</style></head><body>${preview.innerHTML}<script>window.onload=function(){setTimeout(function(){window.print()},500)}<\/script></body></html>`);
        w.document.close();
        
        // ãƒ­ã‚°è¨˜éŒ²
        logAction('document_downloaded', {
            label: 'è¨¼æ‹ èª¬æ˜æ›¸PDFå‡ºåŠ›',
            fileName: 'è¨¼æ‹ èª¬æ˜æ›¸.pdf',
            fileType: 'pdf'
        });
    }

    function downloadEvidenceMD() {
        const preview = document.getElementById('evidencePreview');
        if (preview.innerHTML.includes('ç”Ÿæˆå†…å®¹ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™')) { 
            alert('å…ˆã«ã€Œè‡ªå‹•ç”Ÿæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„'); 
            return; 
        }
        
        const today = new Date();
        const dateStr = `${today.getFullYear()}å¹´${today.getMonth() + 1}æœˆ${today.getDate()}æ—¥`;
        
        const md = `# è¨¼æ‹ èª¬æ˜æ›¸

ä»¤å’Œï¼˜å¹´ï¼ˆç™ºãƒï¼‰ç¬¬â—‹â—‹â—‹å·

**ç™ºä¿¡è€…æƒ…å ±é–‹ç¤ºå‘½ä»¤ç”³ç«‹äº‹ä»¶**  
**æ¶ˆå»ç¦æ­¢å‘½ä»¤ç”³ç«‹äº‹ä»¶**

ç”³ç«‹äººã€€æ ªå¼ä¼šç¤¾ãƒãƒƒã‚¯ã‚¹ãƒ»ã‚¨ãƒ¼  
ç›¸æ‰‹æ–¹ã€€ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯æ ªå¼ä¼šç¤¾

---

ä»¤å’Œâ—‹å¹´â—‹æœˆâ—‹æ—¥  
æ±äº¬åœ°æ–¹è£åˆ¤æ‰€ æ°‘äº‹ç¬¬â—‹éƒ¨ å¾¡ä¸­  
ç”³ç«‹äººè¨´è¨Ÿä»£ç†äººå¼è­·å£«ã€€â—‹â—‹ â—‹â—‹

---

## è¨¼æ‹ ä¸€è¦§

| å·è¨¼ | æ¨™ç›® | åŸæœ¬/å†™ã— | ä½œæˆå¹´æœˆæ—¥ | ä½œæˆè€… | ç«‹è¨¼è¶£æ—¨ |
|:----:|:-----|:--------:|:---------:|:----:|:---------|
| ç”²ï¼‘ | æœ¬ä»¶è‘—ä½œç‰©ã®å‹•ç”»ã‚’æ’®å½±ã—ãŸæ›¸é¢ | å†™ã— | R8.1.7 | ç”³ç«‹äºº | æœ¬ä»¶è‘—ä½œç‰©ï¼ˆè‘—ä½œç‰©ç›®éŒ²è¨˜è¼‰ã®å‹•ç”»ï¼‰ã®å†…å®¹ã‚’æ˜ã‚‰ã‹ã«ã™ã‚‹ã‚‚ã®ã€‚ç”³ç«‹äººãŒè‘—ä½œæ¨©ã‚’æœ‰ã™ã‚‹å‹•ç”»ã®å…·ä½“çš„å†…å®¹ã‚’ç¤ºã™ã€‚ |
| ç”²ï¼’ | ä¾µå®³å‹•ç”»ã‚’æ’®å½±ã—ãŸæ›¸é¢ | å†™ã— | ä¸æ˜ | æœ¬ä»¶å„ç™ºä¿¡è€… | BitTorrentãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã§å…¬è¡†é€ä¿¡ã•ã‚Œã¦ã„ãŸä¾µå®³å‹•ç”»ã®å†…å®¹ã‚’æ˜ã‚‰ã‹ã«ã™ã‚‹ã‚‚ã®ã€‚ç”²ï¼‘ã®è‘—ä½œç‰©ã¨åŒä¸€åˆã¯é¡ä¼¼ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã™ã€‚ |
| ç”²ï¼“ | BTç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ver2æŠ€è¡“èª¬æ˜æ›¸ | å†™ã— | R5.6.15 | HDRå‰ç”° | BitTorrentãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ãŠã‘ã‚‹ä¾µå®³ãƒ”ã‚¢ã®æ¤œå‡ºã«ä½¿ç”¨ã™ã‚‹ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ï¼ˆver2ï¼‰ã®æŠ€è¡“çš„æ§‹æˆãƒ»å‹•ä½œåŸç†ã‚’èª¬æ˜ã™ã‚‹ã‚‚ã®ã€‚å½“è©²ã‚·ã‚¹ãƒ†ãƒ ã®ä¿¡é ¼æ€§ã®åŸºç¤ã¨ãªã‚‹æŠ€è¡“çš„ä»•æ§˜ã‚’æ˜ã‚‰ã‹ã«ã™ã‚‹ã€‚ |
| ç”²ï¼” | é™³è¿°æ›¸ï¼ˆBTç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ver2ã®ä¿¡é ¼æ€§ã«ã¤ã„ã¦ï¼‰ | å†™ã— | R5.6.15 | HDRå‰ç”° | BTç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ver2ãŒæ­£ç¢ºã«BitTorrentãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«åŸºã¥ãé€šä¿¡ã‚’ç›£è¦–ã—ã€ä¾µå®³ãƒ”ã‚¢ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ãƒ»ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ç­‰ã‚’æ­£ç¢ºã«è¨˜éŒ²ã§ãã‚‹ã“ã¨ã®ä¿¡é ¼æ€§ã‚’é™³è¿°ã™ã‚‹ã‚‚ã®ã€‚ |
| ç”²ï¼• | å ±å‘Šæ›¸ï¼ˆã‚·ã‚¹ãƒ†ãƒ ã®æ¤œè¨¼çµæœï¼‰ | å†™ã— | R5.8.22 | HDRå‰ç”° | BTç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ver2ã«ã¤ã„ã¦ç¬¬ä¸‰è€…ã«ã‚ˆã‚‹æ¤œè¨¼ã‚’è¡Œã„ã€ä¾µå®³ãƒ”ã‚¢ã®ç‰¹å®šçµæœãŒæ­£ç¢ºã§ã‚ã‚‹ã“ã¨ã€IPã‚¢ãƒ‰ãƒ¬ã‚¹ã®å–å¾—ã«èª¤ã‚ŠãŒãªã„ã“ã¨ã‚’ç¢ºèªã—ãŸæ¤œè¨¼çµæœã‚’å ±å‘Šã™ã‚‹ã‚‚ã®ã€‚ |
| ç”²ï¼– | å ±å‘Šæ›¸ï¼ˆãƒ”ãƒ¼ã‚¹é€ä¿¡ã«ã¤ã„ã¦ã®æ¤œè¨¼ï¼‰ | å†™ã— | R5.9.10 | HDRå‰ç”° | BitTorrentãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«ãŠã‘ã‚‹ãƒ”ãƒ¼ã‚¹ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã®æ–­ç‰‡ï¼‰ã®é€ä¿¡å‹•ä½œã‚’æ¤œè¨¼ã—ã€ç™ºä¿¡è€…ãŒå®Ÿéš›ã«ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€éƒ¨ã‚’ä»–ã®ãƒ”ã‚¢ã«å¯¾ã—ã¦é€ä¿¡ï¼ˆå…¬è¡†é€ä¿¡ï¼‰ã—ã¦ã„ã‚‹ã“ã¨ã‚’æŠ€è¡“çš„ã«ç¢ºèªã™ã‚‹ã‚‚ã®ã€‚ |
| ç”²ï¼— | é™³è¿°æ›¸ï¼ˆé€šä¿¡ã®ç§˜å¯†ã«ã¤ã„ã¦ï¼‰ | å†™ã— | R5.10.3 | HDRå‰ç”° | BTç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚‹IPã‚¢ãƒ‰ãƒ¬ã‚¹ã®å–å¾—ãŒã€BitTorrentãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®ä»•çµ„ã¿ã«åŸºã¥ãå…¬é–‹æƒ…å ±ã®å–å¾—ã§ã‚ã‚Šã€é›»æ°—é€šä¿¡äº‹æ¥­æ³•ä¸Šã®é€šä¿¡ã®ç§˜å¯†ã‚’ä¾µå®³ã™ã‚‹ã‚‚ã®ã§ã¯ãªã„ã“ã¨ã‚’é™³è¿°ã™ã‚‹ã‚‚ã®ã€‚ |
| ç”²ï¼˜ | å ±å‘Šæ›¸ï¼ˆä¾µå®³å‹•ç”»ã®ãƒ•ã‚¡ã‚¤ãƒ«åç§°ã«ã¤ã„ã¦ï¼‰ | å†™ã— | R5.11.18 | HDRå‰ç”° | BitTorrentãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã§æµé€šã™ã‚‹ä¾µå®³å‹•ç”»ã®ãƒ•ã‚¡ã‚¤ãƒ«åç§°ã‹ã‚‰ã€å½“è©²ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”³ç«‹äººã®è‘—ä½œç‰©ã«ä¿‚ã‚‹ã‚‚ã®ã§ã‚ã‚‹ã“ã¨ã‚’ç‰¹å®šã§ãã‚‹ã“ã¨ã‚’èª¬æ˜ã™ã‚‹ã‚‚ã®ã€‚ãƒ•ã‚¡ã‚¤ãƒ«åã«å«ã¾ã‚Œã‚‹å“ç•ªãƒ»ã‚¿ã‚¤ãƒˆãƒ«æƒ…å ±ç­‰ã¨ã®ç…§åˆçµæœã‚’ç¤ºã™ã€‚ |
| ç”²ï¼™ | å ±å‘Šæ›¸ï¼ˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ã®ä¿¡é ¼æ€§ã«ã¤ã„ã¦ï¼‰ | å†™ã— | R6.1.11 | HDRå‰ç”° | BTç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ãŒå–å¾—ã—ãŸIPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒã€å®Ÿéš›ã®ç™ºä¿¡è€…ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ä¸€è‡´ã™ã‚‹ã“ã¨ã®ä¿¡é ¼æ€§ã‚’æ¤œè¨¼ãƒ»èª¬æ˜ã™ã‚‹ã‚‚ã®ã€‚VPNãƒ»ãƒ—ãƒ­ã‚­ã‚·ç­‰ã«ã‚ˆã‚‹å½è£…ã®å¯èƒ½æ€§ã«ã¤ã„ã¦ã‚‚æ¤œè¨ã—ãŸçµæœã‚’ç¤ºã™ã€‚ |
| ç”²ï¼‘ï¼ | ãƒ‘ã‚½ã‚³ãƒ³ã®ç”»é¢ã‚’å°åˆ·ã—ãŸæ›¸é¢ï¼ˆDBè¨˜éŒ²ï¼‰ | å†™ã— | R8.1.7 | HDRå‰ç”° | BTç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ver2ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«è¨˜éŒ²ã•ã‚ŒãŸä¾µå®³ãƒ”ã‚¢ã®æ¤œå‡ºè¨˜éŒ²ã‚’ç”»é¢è¡¨ç¤ºã—å°åˆ·ã—ãŸã‚‚ã®ã€‚å„ç™ºä¿¡è€…ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãƒãƒ¼ãƒˆç•ªå·ã€æ¤œå‡ºæ—¥æ™‚ï¼ˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼‰ã€å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¤ãƒ³ãƒ•ã‚©ãƒãƒƒã‚·ãƒ¥ç­‰ã®æƒ…å ±ã‚’å«ã‚€ã€‚åˆ¥ç´™ç™ºä¿¡è€…æƒ…å ±ç›®éŒ²è¨˜è¼‰ã®å„ç™ºä¿¡è€…ã«å¯¾å¿œã™ã‚‹ã€‚ |
| ç”²ï¼‘ï¼‘ | å†ç”Ÿè©¦é¨“çµæœå ±å‘Šæ›¸ | å†™ã— | R7.12.25 | HDRå‰ç”° | BitTorrentãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‹ã‚‰å–å¾—ã—ãŸä¾µå®³ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¤ã„ã¦å†ç”Ÿè©¦é¨“ã‚’å®Ÿæ–½ã—ã€å½“è©²ãƒ•ã‚¡ã‚¤ãƒ«ãŒå®Ÿéš›ã«å†ç”Ÿå¯èƒ½ãªå‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚ã‚‹ã“ã¨ã€åŠã³ãã®å†…å®¹ãŒç”²ï¼‘ã®è‘—ä½œç‰©ã¨åŒä¸€åˆã¯å®Ÿè³ªçš„ã«åŒä¸€ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ãŸçµæœã‚’å ±å‘Šã™ã‚‹ã‚‚ã®ã€‚å„ãƒ”ãƒ¼ã‚¹ãƒªã‚¹ãƒˆï¼ˆPLï¼‰ã«å¯¾å¿œã™ã‚‹å†ç”Ÿçµæœã‚’å«ã‚€ã€‚ |
| ç”²ï¼‘ï¼’ | å ±å‘Šæ›¸ï¼ˆå†ç”Ÿè©¦é¨“ã®æ–¹æ³•ã«ã¤ã„ã¦ï¼‰ | å†™ã— | R6.1.11 | HDRå‰ç”° | ç”²ï¼‘ï¼‘ã®å†ç”Ÿè©¦é¨“ã§ä½¿ç”¨ã—ãŸè©¦é¨“æ–¹æ³•ãƒ»æ‰‹é †ã‚’è©³ç´°ã«èª¬æ˜ã™ã‚‹ã‚‚ã®ã€‚BitTorrentã‹ã‚‰å–å¾—ã—ãŸãƒ”ãƒ¼ã‚¹ã®å†æ§‹æˆæ–¹æ³•ã€å†ç”Ÿã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ç¨®é¡ã€å†ç”Ÿå¯å¦ã®åˆ¤å®šåŸºæº–ç­‰ã‚’æ˜ã‚‰ã‹ã«ã—ã€å†ç”Ÿè©¦é¨“ã®ä¿¡é ¼æ€§ã‚’æ‹…ä¿ã™ã‚‹ã€‚ |
| ç”²ï¼‘ï¼“ | æœ¬ä»¶è‘—ä½œç‰©ã®DVDã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å°åˆ·ã—ãŸæ›¸é¢ | å†™ã— | R8.1.7 | ç”³ç«‹äºº | æœ¬ä»¶è‘—ä½œç‰©ã«ä¿‚ã‚‹DVDå•†å“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¡¨é¢ã‚’å°åˆ·ã—ãŸã‚‚ã®ã€‚ç”³ç«‹äººã®åç§°ãŒè‘—ä½œæ¨©è€…ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã¦ãŠã‚Šã€ç”³ç«‹äººãŒæœ¬ä»¶è‘—ä½œç‰©ã®è‘—ä½œæ¨©è€…ã§ã‚ã‚‹ã“ã¨ã‚’ç«‹è¨¼ã™ã‚‹ã€‚ |

---

ä»¥ ä¸Š

---

*ç”Ÿæˆæ—¥æ™‚: ${dateStr}*  
*ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ç”³ç«‹æ›¸ä½œæˆç®¡ç†ã‚»ãƒ³ã‚¿ãƒ¼ã«ã‚ˆã‚Šè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã—ãŸ*`;

        const el = document.createElement('a');
        el.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(md));
        el.setAttribute('download', 'è¨¼æ‹ èª¬æ˜æ›¸_' + today.getFullYear() + ('0' + (today.getMonth() + 1)).slice(-2) + ('0' + today.getDate()).slice(-2) + '.md');
        el.style.display = 'none';
        document.body.appendChild(el); 
        el.click(); 
        document.body.removeChild(el);
        
        // ãƒ­ã‚°è¨˜éŒ²
        logAction('document_downloaded', {
            label: 'è¨¼æ‹ èª¬æ˜æ›¸MDå‡ºåŠ›',
            fileName: el.getAttribute('download'),
            fileType: 'markdown'
        });
    }
</script>

<!-- ========== ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ©Ÿèƒ½ ========== -->
<link rel="stylesheet" href="data:text/css;base64,LmZlZWRiYWNrLWZsb2F0LWJ0bntwb3NpdGlvbjpmaXhlZDtib3R0b206MjRweDtyaWdodDoyNHB4O3dpZHRoOjYwcHg7aGVpZ2h0OjYwcHg7Ym9yZGVyLXJhZGl1czo1MCU7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCMzYjgyZjYgMCUsIzI1NjNlYiAxMDAlKTtjb2xvcjojZmZmO2JvcmRlcjpub25lO2JveC1zaGFkb3c6MCA0cHggMTJweCByZ2JhKDU5LDEzMCwyNDYsMC40KTtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6MjRweDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7ei1pbmRleDo5OTk4O3RyYW5zaXRpb246YWxsIC4zcyBlYXNlfS5mZWVkYmFjay1mbG9hdC1idG46aG92ZXJ7dHJhbnNmb3JtOnNjYWxlKDEuMSl9">
<style>
.feedback-modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);z-index:9999;align-items:center;justify-content:center}
.feedback-modal-overlay.active{display:flex}
.feedback-modal-box{background:#fff;border-radius:16px;max-width:600px;width:90%;max-height:85vh;overflow-y:auto;box-shadow:0 20px 60px rgba(0,0,0,0.3)}
.feedback-modal-header{display:flex;justify-content:space-between;align-items:center;padding:24px 24px 16px;border-bottom:1px solid #e5e7eb}
.feedback-modal-title{font-size:18px;font-weight:700;color:#111827}
.feedback-modal-close{width:32px;height:32px;border-radius:8px;border:none;background:#f3f4f6;color:#6b7280;cursor:pointer;font-size:20px}
.feedback-modal-close:hover{background:#e5e7eb}
.feedback-modal-body{padding:24px}
.feedback-form-group{margin-bottom:20px}
.feedback-form-label{display:block;font-size:13px;font-weight:600;margin-bottom:8px;color:#374151}
.feedback-form-select,.feedback-form-input,.feedback-form-textarea{width:100%;padding:12px;border:1px solid #d1d5db;border-radius:8px;font-family:inherit;font-size:14px}
.feedback-form-textarea{min-height:120px;resize:vertical}
.feedback-form-submit{width:100%;padding:14px;background:linear-gradient(135deg,#3b82f6 0%,#2563eb 100%);color:#fff;border:none;border-radius:8px;font-size:15px;font-weight:600;cursor:pointer}
.feedback-status{margin-top:16px;padding:12px;border-radius:8px;text-align:center;font-size:13px;font-weight:600;display:none}
.feedback-status.success{background:#d1fae5;color:#065f46}
</style>

<button class="feedback-float-btn" onclick="(function(){document.getElementById('feedbackModalOverlay').classList.add('active');document.getElementById('feedbackLocation').value=document.title.split('â€”')[0].trim()})()" title="ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’é€ä¿¡: M-99"><span style="font-size:24px">ğŸ’¬</span><span class="element-id" style="position:absolute;bottom:2px;right:2px;font-size:7px;padding:1px 3px;background:#fff;color:#3b82f6" title="è¦ç´ ID: M-99">M-99</span></button>

<div id="feedbackModalOverlay" class="feedback-modal-overlay" onclick="if(event.target.id==='feedbackModalOverlay')this.classList.remove('active')">
  <div class="feedback-modal-box">
    <div class="feedback-modal-header">
      <div class="feedback-modal-title">ğŸ’¬ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’é€ä¿¡</div>
      <button class="feedback-modal-close" onclick="document.getElementById('feedbackModalOverlay').classList.remove('active')">Ã—</button>
    </div>
    <div class="feedback-modal-body">
      <form id="feedbackForm" onsubmit="event.preventDefault();var t=document.getElementById('feedbackType').value,l=document.getElementById('feedbackLocation').value,c=document.getElementById('feedbackContent').value.trim(),n=document.getElementById('feedbackName').value.trim();if(!c){document.getElementById('feedbackStatus').textContent='å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„';document.getElementById('feedbackStatus').style.display='block';return}var f={id:'fb_'+Date.now(),type:t,location:l||document.title,content:c,name:n||'åŒ¿å',timestamp:new Date().toISOString()};var fs=JSON.parse(localStorage.getItem('system_feedbacks')||'[]');fs.push(f);localStorage.setItem('system_feedbacks',JSON.stringify(fs));document.getElementById('feedbackStatus').className='feedback-status success';document.getElementById('feedbackStatus').textContent='âœ“ é€ä¿¡ã—ã¾ã—ãŸï¼';document.getElementById('feedbackStatus').style.display='block';setTimeout(function(){document.getElementById('feedbackModalOverlay').classList.remove('active')},2000)">
        <div class="feedback-form-group">
          <label class="feedback-form-label">ç¨®é¡</label>
          <select id="feedbackType" class="feedback-form-select" required>
            <option value="">é¸æŠ</option>
            <option value="bug">ğŸ› ãƒã‚°</option>
            <option value="improvement">ğŸ’¡ æ”¹å–„ææ¡ˆ</option>
            <option value="question">â“ è³ªå•</option>
            <option value="other">ğŸ“ ãã®ä»–</option>
          </select>
        </div>
        <div class="feedback-form-group">
          <label class="feedback-form-label">ãƒšãƒ¼ã‚¸ãƒ»æ©Ÿèƒ½å</label>
          <input type="text" id="feedbackLocation" class="feedback-form-input">
        </div>
        <div class="feedback-form-group">
          <label class="feedback-form-label">è©³ç´° *</label>
          <textarea id="feedbackContent" class="feedback-form-textarea" required placeholder="è©³ã—ãæ•™ãˆã¦ãã ã•ã„"></textarea>
        </div>
        <div class="feedback-form-group">
          <label class="feedback-form-label">ãŠåå‰ï¼ˆä»»æ„ï¼‰</label>
          <input type="text" id="feedbackName" class="feedback-form-input">
        </div>
        <button type="submit" class="feedback-form-submit">ğŸ“¤ é€ä¿¡</button>
        <div id="feedbackStatus" class="feedback-status"></div>
      </form>
    </div>
  </div>
</div>

</body>
</html>